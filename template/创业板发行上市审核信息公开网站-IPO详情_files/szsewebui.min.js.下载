!function(e){"use strict";var t="1.0.0",s="JxMark",i=e,n=i.Jx,a={};if(!("undefined"==typeof n||n.mark&&n.mark===s))throw new Error('"Jx" name is defined in other javascript code !!!');n&&(a=n.PACKAGES),n=function(e){var t=this,s=function(e,t){return e&&e.hasOwnProperty&&e instanceof t};return e?s(t,n)?t._init():t=new n:t=n.Root,t},n.prototype={version:t,_init:function(){this.constructor=n},namespace:function(e){if(!e)return i;e=String(e);var t,s,n=e.split("."),a=i;for(t=0;t<n.length;t+=1)s=n[t],a[s]=a[s]||{},a=a[n[t]];return a},"package":function(){var e,t=arguments[0],s=arguments[arguments.length-1],a=i;if("function"!=typeof s)throw new Error("Function required");"string"==typeof t?(a=this.namespace(t),n.PACKAGES[t]||(n.PACKAGES[t]={isLoaded:!0,returnValue:e}),a.packageName=t):"object"==typeof t&&(a=t),e=s.call(a,this),"string"==typeof t&&(n.PACKAGES[t].returnValue=e)},checkPackage:function(e){return n.PACKAGES[e]},startTime:+new Date,toString:function(){return"JET version "+this.version+" !"}},n.PACKAGES=a,n.Root=new n((!0)),n.mark=s,i.Jx=n}(this),Jx()["package"](function(e){"use strict";var t,s,i,n,a,o,r,l,h,c,d,u,p,m;t=function(e){return"undefined"==typeof e},s=function(e){return null===e},i=function(e){return(0===e||e)&&e.constructor===Number},a=function(e){return(e===!1||e)&&e.constructor===Boolean},n=function(e){return(""===e||e)&&e.constructor===String},o=function(e){return e&&(e.constructor===Object||"[object Object]"===Object.prototype.toString.call(e))},r=function(e){return e&&(e.constructor===Array||"[object Array]"===Object.prototype.toString.call(e))},l=function(e){return!!(e&&e.callee&&i(e.length))},h=function(e){return e&&e.constructor===Function},c=function(e){return t(e)?"undefined":s(e)?"null":i(e)?"number":a(e)?"boolean":n(e)?"string":o(e)?"object":r(e)?"array":l(e)?"arguments":h(e)?"function":"other"},u=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},p=function(e,t,s){var i,n,e,a,l=arguments;for(1===l.length?(e=this,i=0):(e=l[0]||{},i=1);i<arguments.length;i++){a=arguments[i];for(n in a){var c=e[n],d=a[n];c!==d&&(!d||!o(d)||r(d)||d.nodeType||h(d)?void 0!==d&&(e[n]=d):(c=e[n]||{},e[n]=p(c,d||(null!=d.length?[]:{}))))}}return e},d=function(){},m=function(){var t=arguments.length,s=arguments[t-1];if(s.init=s.init||function(){},2===t){var i=arguments[0].extend,n=function(){};n.prototype=i.prototype;var a=function(){this.init.apply(this,arguments)};return a.superClass=i.prototype,a.callSuper=function(e,t){var s=Array.prototype.slice,i=s.call(arguments,2),n=a.superClass[t];n&&n.apply(e,i.concat(s.call(arguments)))},a.prototype=new n,a.prototype.constructor=a,e.extend(a.prototype,s),a.prototype.init=function(){s.init.apply(this,arguments)},a}if(1===t){var o=function(){return this.init.apply(this,arguments)};return o.prototype=s,o}},e.isUndefined=t,e.isNull=s,e.isNumber=i,e.isString=n,e.isBoolean=a,e.isObject=o,e.isArray=r,e.isArguments=l,e.isFunction=h,e.$typeof=c,e.emptyFunc=d,e.random=u,e.extend=p,e.Class=m}),function(){function e(){return Os.apply(null,arguments)}function t(e){Os=e}function s(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function n(e,t){var s,i=[];for(s=0;s<e.length;++s)i.push(t(e[s],s));return i}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var s in t)a(t,s)&&(e[s]=t[s]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function r(e,t,s,i){return Ne(e,t,s,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(e){return null==e._pf&&(e._pf=l()),e._pf}function c(e){if(null==e._isValid){var t=h(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=r(NaN);return null!=e?o(h(t),e):h(t).userInvalidated=!0,t}function u(e,t){var s,i,n;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=h(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),As.length>0)for(s in As)i=As[s],n=t[i],"undefined"!=typeof n&&(e[i]=n);return e}function p(t){u(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Ls===!1&&(Ls=!0,e.updateOffset(this),Ls=!1)}function m(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function f(e){return e<0?Math.ceil(e):Math.floor(e)}function g(e){var t=+e,s=0;return 0!==t&&isFinite(t)&&(s=f(t)),s}function v(e,t,s){var i,n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(i=0;i<n;i++)(s&&e[i]!==t[i]||!s&&g(e[i])!==g(t[i]))&&o++;return o+a}function b(){}function y(e){return e?e.toLowerCase().replace("_","-"):e}function k(e){for(var t,s,i,n,a=0;a<e.length;){for(n=y(e[a]).split("-"),t=n.length,s=y(e[a+1]),s=s?s.split("-"):null;t>0;){if(i=w(n.slice(0,t).join("-")))return i;if(s&&s.length>=t&&v(n,s,!0)>=t-1)break;t--}a++}return null}function w(e){var t=null;if(!Ys[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Es._abbr,require("./locale/"+e),x(t)}catch(s){}return Ys[e]}function x(e,t){var s;return e&&(s="undefined"==typeof t?_(e):C(e,t),s&&(Es=s)),Es._abbr}function C(e,t){return null!==t?(t.abbr=e,Ys[e]=Ys[e]||new b,Ys[e].set(t),x(e),Ys[e]):(delete Ys[e],null)}function _(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Es;if(!s(e)){if(t=w(e))return t;e=[e]}return k(e)}function D(e,t){var s=e.toLowerCase();Hs[s]=Hs[s+"s"]=Hs[t]=e}function S(e){return"string"==typeof e?Hs[e]||Hs[e.toLowerCase()]:void 0}function I(e){var t,s,i={};for(s in e)a(e,s)&&(t=S(s),t&&(i[t]=e[s]));return i}function N(t,s){return function(i){return null!=i?($(this,t,i),e.updateOffset(this,s),this):M(this,t)}}function M(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function $(e,t,s){return e._d["set"+(e._isUTC?"UTC":"")+t](s)}function T(e,t){var s;if("object"==typeof e)for(s in e)this.set(s,e[s]);else if(e=S(e),"function"==typeof this[e])return this[e](t);return this}function P(e,t,s){var i=""+Math.abs(e),n=t-i.length,a=e>=0;return(a?s?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}function O(e,t,s,i){var n=i;"string"==typeof i&&(n=function(){return this[i]()}),e&&(Bs[e]=n),t&&(Bs[t[0]]=function(){return P(n.apply(this,arguments),t[1],t[2])}),s&&(Bs[s]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function E(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function A(e){var t,s,i=e.match(Vs);for(t=0,s=i.length;t<s;t++)Bs[i[t]]?i[t]=Bs[i[t]]:i[t]=E(i[t]);return function(n){var a="";for(t=0;t<s;t++)a+=i[t]instanceof Function?i[t].call(n,e):i[t];return a}}function L(e,t){return e.isValid()?(t=Y(t,e.localeData()),Us[t]=Us[t]||A(t),Us[t](e)):e.localeData().invalidDate()}function Y(e,t){function s(e){return t.longDateFormat(e)||e}var i=5;for(Rs.lastIndex=0;i>=0&&Rs.test(e);)e=e.replace(Rs,s),Rs.lastIndex=0,i-=1;return e}function H(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function V(e,t,s){ii[e]=H(t)?t:function(e){return e&&s?s:t}}function R(e,t){return a(ii,e)?ii[e](t._strict,t._locale):new RegExp(U(e))}function U(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,s,i,n){return t||s||i||n}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(e,t){var s,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,s){s[t]=g(e)}),s=0;s<e.length;s++)ni[e[s]]=i}function j(e,t){B(e,function(e,s,i,n){i._w=i._w||{},t(e,i._w,i,n)})}function F(e,t,s){null!=t&&a(ni,e)&&ni[e](t,s._a,s,e)}function W(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function z(e){return this._months[e.month()]}function G(e){return this._monthsShort[e.month()]}function J(e,t,s){var i,n,a;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(n=r([2e3,i]),s&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),s||this._monthsParse[i]||(a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),s&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(s&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!s&&this._monthsParse[i].test(e))return i}}function q(e,t){var s;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(s=Math.min(e.date(),W(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,s),e)}function Q(t){return null!=t?(q(this,t),e.updateOffset(this,!0),this):M(this,"Month")}function K(){return W(this.year(),this.month())}function X(e){var t,s=e._a;return s&&h(e).overflow===-2&&(t=s[oi]<0||s[oi]>11?oi:s[ri]<1||s[ri]>W(s[ai],s[oi])?ri:s[li]<0||s[li]>24||24===s[li]&&(0!==s[hi]||0!==s[ci]||0!==s[di])?li:s[hi]<0||s[hi]>59?hi:s[ci]<0||s[ci]>59?ci:s[di]<0||s[di]>999?di:-1,h(e)._overflowDayOfYear&&(t<ai||t>ri)&&(t=ri),h(e).overflow=t),e}function Z(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ee(e,t){var s=!0;return o(function(){return s&&(Z(e+"\n"+(new Error).stack),s=!1),t.apply(this,arguments)},t)}function te(e,t){mi[e]||(Z(t),mi[e]=!0)}function se(e){var t,s,i=e._i,n=fi.exec(i);if(n){for(h(e).iso=!0,t=0,s=gi.length;t<s;t++)if(gi[t][1].exec(i)){e._f=gi[t][0];break}for(t=0,s=vi.length;t<s;t++)if(vi[t][1].exec(i)){e._f+=(n[6]||" ")+vi[t][0];break}i.match(ei)&&(e._f+="Z"),we(e)}else e._isValid=!1}function ie(t){var s=bi.exec(t._i);return null!==s?void(t._d=new Date((+s[1]))):(se(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ne(e,t,s,i,n,a,o){var r=new Date(e,t,s,i,n,a,o);return e<1970&&r.setFullYear(e),r}function ae(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function oe(e){return re(e)?366:365}function re(e){return e%4===0&&e%100!==0||e%400===0}function le(){return re(this.year())}function he(e,t,s){var i,n=s-t,a=s-e.day();return a>n&&(a-=7),a<n-7&&(a+=7),i=Me(e).add(a,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ce(e){return he(e,this._week.dow,this._week.doy).week}function de(){return this._week.dow}function ue(){return this._week.doy}function pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function me(e){var t=he(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function fe(e,t,s,i,n){var a,o=6+n-i,r=ae(e,0,1+o),l=r.getUTCDay();return l<n&&(l+=7),s=null!=s?1*s:n,a=1+o+7*(t-1)-l+s,{year:a>0?e:e-1,dayOfYear:a>0?a:oe(e-1)+a}}function ge(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ve(e,t,s){return null!=e?e:null!=t?t:s}function be(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ye(e){var t,s,i,n,a=[];if(!e._d){for(i=be(e),e._w&&null==e._a[ri]&&null==e._a[oi]&&ke(e),e._dayOfYear&&(n=ve(e._a[ai],i[ai]),e._dayOfYear>oe(n)&&(h(e)._overflowDayOfYear=!0),s=ae(n,0,e._dayOfYear),e._a[oi]=s.getUTCMonth(),e._a[ri]=s.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=i[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[li]&&0===e._a[hi]&&0===e._a[ci]&&0===e._a[di]&&(e._nextDay=!0,e._a[li]=0),e._d=(e._useUTC?ae:ne).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[li]=24)}}function ke(e){var t,s,i,n,a,o,r;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(a=1,o=4,s=ve(t.GG,e._a[ai],he(Me(),1,4).year),i=ve(t.W,1),n=ve(t.E,1)):(a=e._locale._week.dow,o=e._locale._week.doy,s=ve(t.gg,e._a[ai],he(Me(),a,o).year),i=ve(t.w,1),null!=t.d?(n=t.d,n<a&&++i):n=null!=t.e?t.e+a:a),r=fe(s,i,n,o,a),e._a[ai]=r.year,e._dayOfYear=r.dayOfYear}function we(t){if(t._f===e.ISO_8601)return void se(t);t._a=[],h(t).empty=!0;var s,i,n,a,o,r=""+t._i,l=r.length,c=0;for(n=Y(t._f,t._locale).match(Vs)||[],s=0;s<n.length;s++)a=n[s],i=(r.match(R(a,t))||[])[0],i&&(o=r.substr(0,r.indexOf(i)),o.length>0&&h(t).unusedInput.push(o),r=r.slice(r.indexOf(i)+i.length),c+=i.length),Bs[a]?(i?h(t).empty=!1:h(t).unusedTokens.push(a),F(a,i,t)):t._strict&&!i&&h(t).unusedTokens.push(a);h(t).charsLeftOver=l-c,r.length>0&&h(t).unusedInput.push(r),h(t).bigHour===!0&&t._a[li]<=12&&t._a[li]>0&&(h(t).bigHour=void 0),t._a[li]=xe(t._locale,t._a[li],t._meridiem),ye(t),X(t)}function xe(e,t,s){var i;return null==s?t:null!=e.meridiemHour?e.meridiemHour(t,s):null!=e.isPM?(i=e.isPM(s),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Ce(e){var t,s,i,n,a;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)a=0,t=u({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],we(t),c(t)&&(a+=h(t).charsLeftOver,a+=10*h(t).unusedTokens.length,h(t).score=a,(null==i||a<i)&&(i=a,s=t));o(e,s||t)}function _e(e){if(!e._d){var t=I(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ye(e)}}function De(e){var t=new p(X(Se(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Se(e){var t=e._i,n=e._f;return e._locale=e._locale||_(e._l),null===t||void 0===n&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new p(X(t)):(s(n)?Ce(e):n?we(e):i(t)?e._d=t:Ie(e),e))}function Ie(t){var a=t._i;void 0===a?t._d=new Date:i(a)?t._d=new Date((+a)):"string"==typeof a?ie(t):s(a)?(t._a=n(a.slice(0),function(e){return parseInt(e,10)}),ye(t)):"object"==typeof a?_e(t):"number"==typeof a?t._d=new Date(a):e.createFromInputFallback(t)}function Ne(e,t,s,i,n){var a={};return"boolean"==typeof s&&(i=s,s=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=n,a._l=s,a._i=e,a._f=t,a._strict=i,De(a)}function Me(e,t,s,i){return Ne(e,t,s,i,!1)}function $e(e,t){var i,n;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return Me();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}function Te(){var e=[].slice.call(arguments,0);return $e("isBefore",e)}function Pe(){var e=[].slice.call(arguments,0);return $e("isAfter",e)}function Oe(e){var t=I(e),s=t.year||0,i=t.quarter||0,n=t.month||0,a=t.week||0,o=t.day||0,r=t.hour||0,l=t.minute||0,h=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*h+6e4*l+36e5*r,this._days=+o+7*a,this._months=+n+3*i+12*s,this._data={},this._locale=_(),this._bubble()}function Ee(e){return e instanceof Oe}function Ae(e,t){O(e,0,0,function(){var e=this.utcOffset(),s="+";return e<0&&(e=-e,s="-"),s+P(~~(e/60),2)+t+P(~~e%60,2)})}function Le(e){var t=(e||"").match(ei)||[],s=t[t.length-1]||[],i=(s+"").match(Ci)||["-",0,0],n=+(60*i[1])+g(i[2]);return"+"===i[0]?n:-n}function Ye(t,s){var n,a;return s._isUTC?(n=s.clone(),a=(m(t)||i(t)?+t:+Me(t))-+n,n._d.setTime(+n._d+a),e.updateOffset(n,!1),n):Me(t).local()}function He(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ve(t,s){var i,n=this._offset||0;return null!=t?("string"==typeof t&&(t=Le(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&s&&(i=He(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==t&&(!s||this._changeInProgress?tt(this,Qe(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:He(this)}function Re(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ue(e){return this.utcOffset(0,e)}function Be(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(He(this),"m")),this}function je(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Le(this._i)),this}function Fe(e){return e=e?Me(e).utcOffset():0,(this.utcOffset()-e)%60===0}function We(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ze(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(u(e,this),e=Se(e),e._a){var t=e._isUTC?r(e._a):Me(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ge(){return!this._isUTC}function Je(){return this._isUTC}function qe(){return this._isUTC&&0===this._offset}function Qe(e,t){var s,i,n,o=e,r=null;return Ee(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(r=_i.exec(e))?(s="-"===r[1]?-1:1,o={y:0,d:g(r[ri])*s,h:g(r[li])*s,m:g(r[hi])*s,s:g(r[ci])*s,ms:g(r[di])*s}):(r=Di.exec(e))?(s="-"===r[1]?-1:1,o={y:Ke(r[2],s),M:Ke(r[3],s),d:Ke(r[4],s),h:Ke(r[5],s),m:Ke(r[6],s),s:Ke(r[7],s),w:Ke(r[8],s)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(n=Ze(Me(o.from),Me(o.to)),o={},o.ms=n.milliseconds,o.M=n.months),i=new Oe(o),Ee(e)&&a(e,"_locale")&&(i._locale=e._locale),i}function Ke(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function Xe(e,t){var s={milliseconds:0,months:0};return s.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function Ze(e,t){var s;return t=Ye(t,e),e.isBefore(t)?s=Xe(e,t):(s=Xe(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s}function et(e,t){return function(s,i){var n,a;return null===i||isNaN(+i)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),a=s,s=i,i=a),s="string"==typeof s?+s:s,n=Qe(s,i),tt(this,n,e),this}}function tt(t,s,i,n){var a=s._milliseconds,o=s._days,r=s._months;n=null==n||n,a&&t._d.setTime(+t._d+a*i),o&&$(t,"Date",M(t,"Date")+o*i),r&&q(t,M(t,"Month")+r*i),n&&e.updateOffset(t,o||r)}function st(e,t){var s=e||Me(),i=Ye(s,this).startOf("day"),n=this.diff(i,"days",!0),a=n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(t&&t[a]||this.localeData().calendar(a,this,Me(s)))}function it(){return new p(this)}function nt(e,t){var s;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=m(e)?e:Me(e),+this>+e):(s=m(e)?+e:+Me(e),s<+this.clone().startOf(t))}function at(e,t){var s;return t=S("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=m(e)?e:Me(e),+this<+e):(s=m(e)?+e:+Me(e),+this.clone().endOf(t)<s)}function ot(e,t,s){return this.isAfter(e,s)&&this.isBefore(t,s)}function rt(e,t){var s;return t=S(t||"millisecond"),"millisecond"===t?(e=m(e)?e:Me(e),+this===+e):(s=+Me(e),+this.clone().startOf(t)<=s&&s<=+this.clone().endOf(t))}function lt(e,t,s){var i,n,a=Ye(e,this),o=6e4*(a.utcOffset()-this.utcOffset());return t=S(t),"year"===t||"month"===t||"quarter"===t?(n=ht(this,a),"quarter"===t?n/=3:"year"===t&&(n/=12)):(i=this-a,n="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),s?n:f(n)}function ht(e,t){var s,i,n=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(n,"months");return t-a<0?(s=e.clone().add(n-1,"months"),i=(t-a)/(a-s)):(s=e.clone().add(n+1,"months"),i=(t-a)/(s-a)),-(n+i)}function ct(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():L(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):L(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ut(t){var s=L(this,t||e.defaultFormat);return this.localeData().postformat(s)}function pt(e,t){return this.isValid()?Qe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.from(Me(),e)}function ft(e,t){return this.isValid()?Qe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.to(Me(),e)}function vt(e){var t;return void 0===e?this._locale._abbr:(t=_(e),null!=t&&(this._locale=t),this)}function bt(){return this._locale}function yt(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function kt(e){return e=S(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function wt(){return+this._d-6e4*(this._offset||0)}function xt(){return Math.floor(+this/1e3)}function Ct(){return this._offset?new Date((+this)):this._d}function _t(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Dt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function St(){return c(this)}function It(){return o({},h(this))}function Nt(){return h(this).overflow}function Mt(e,t){O(0,[e,e.length],0,t)}function $t(e,t,s){return he(Me([e,11,31+t-s]),t,s).week}function Tt(e){var t=he(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function Pt(e){var t=he(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Ot(){return $t(this.year(),1,4)}function Et(){var e=this.localeData()._week;return $t(this.year(),e.dow,e.doy)}function At(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Lt(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Yt(e){return this._weekdays[e.day()]}function Ht(e){return this._weekdaysShort[e.day()]}function Vt(e){return this._weekdaysMin[e.day()]}function Rt(e){var t,s,i;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(s=Me([2e3,1]).day(t),i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ut(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Lt(e,this.localeData()),this.add(e-t,"d")):t}function Bt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function jt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Ft(e,t){O(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Wt(e,t){return t._meridiemParse}function zt(e){return"p"===(e+"").toLowerCase().charAt(0)}function Gt(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}function Jt(e,t){t[di]=g(1e3*("0."+e))}function qt(){return this._isUTC?"UTC":""}function Qt(){return this._isUTC?"Coordinated Universal Time":""}function Kt(e){return Me(1e3*e)}function Xt(){return Me.apply(null,arguments).parseZone()}function Zt(e,t,s){var i=this._calendar[e];return"function"==typeof i?i.call(t,s):i}function es(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function ts(){return this._invalidDate}function ss(e){return this._ordinal.replace("%d",e)}function is(e){return e}function ns(e,t,s,i){var n=this._relativeTime[s];return"function"==typeof n?n(e,t,s,i):n.replace(/%d/i,e)}function as(e,t){var s=this._relativeTime[e>0?"future":"past"];return"function"==typeof s?s(t):s.replace(/%s/i,t)}function os(e){var t,s;for(s in e)t=e[s],"function"==typeof t?this[s]=t:this["_"+s]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function rs(e,t,s,i){var n=_(),a=r().set(i,t);return n[s](a,e)}function ls(e,t,s,i,n){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return rs(e,t,s,n);var a,o=[];for(a=0;a<i;a++)o[a]=rs(e,a,s,n);return o}function hs(e,t){return ls(e,t,"months",12,"month")}function cs(e,t){return ls(e,t,"monthsShort",12,"month")}function ds(e,t){return ls(e,t,"weekdays",7,"day")}function us(e,t){return ls(e,t,"weekdaysShort",7,"day")}function ps(e,t){return ls(e,t,"weekdaysMin",7,"day")}function ms(){var e=this._data;return this._milliseconds=Ji(this._milliseconds),this._days=Ji(this._days),this._months=Ji(this._months),e.milliseconds=Ji(e.milliseconds),e.seconds=Ji(e.seconds),e.minutes=Ji(e.minutes),e.hours=Ji(e.hours),e.months=Ji(e.months),e.years=Ji(e.years),this}function fs(e,t,s,i){var n=Qe(t,s);return e._milliseconds+=i*n._milliseconds,e._days+=i*n._days,e._months+=i*n._months,e._bubble()}function gs(e,t){return fs(this,e,t,1)}function vs(e,t){return fs(this,e,t,-1)}function bs(e){return e<0?Math.floor(e):Math.ceil(e)}function ys(){var e,t,s,i,n,a=this._milliseconds,o=this._days,r=this._months,l=this._data;return a>=0&&o>=0&&r>=0||a<=0&&o<=0&&r<=0||(a+=864e5*bs(ws(r)+o),o=0,r=0),l.milliseconds=a%1e3,e=f(a/1e3),l.seconds=e%60,t=f(e/60),l.minutes=t%60,s=f(t/60),l.hours=s%24,o+=f(s/24),n=f(ks(o)),r+=n,o-=bs(ws(n)),i=f(r/12),r%=12,l.days=o,l.months=r,l.years=i,this}function ks(e){return 4800*e/146097}function ws(e){return 146097*e/4800}function xs(e){var t,s,i=this._milliseconds;if(e=S(e),"month"===e||"year"===e)return t=this._days+i/864e5,s=this._months+ks(t),"month"===e?s:s/12;switch(t=this._days+Math.round(ws(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Cs(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function _s(e){return function(){return this.as(e)}}function Ds(e){return e=S(e),this[e+"s"]()}function Ss(e){return function(){return this._data[e]}}function Is(){return f(this.days()/7)}function Ns(e,t,s,i,n){return n.relativeTime(t||1,!!s,e,i)}function Ms(e,t,s){var i=Qe(e).abs(),n=dn(i.as("s")),a=dn(i.as("m")),o=dn(i.as("h")),r=dn(i.as("d")),l=dn(i.as("M")),h=dn(i.as("y")),c=n<un.s&&["s",n]||1===a&&["m"]||a<un.m&&["mm",a]||1===o&&["h"]||o<un.h&&["hh",o]||1===r&&["d"]||r<un.d&&["dd",r]||1===l&&["M"]||l<un.M&&["MM",l]||1===h&&["y"]||["yy",h];return c[2]=t,c[3]=+e>0,c[4]=s,Ns.apply(null,c)}function $s(e,t){return void 0!==un[e]&&(void 0===t?un[e]:(un[e]=t,!0))}function Ts(e){var t=this.localeData(),s=Ms(this,!e,t);return e&&(s=t.pastFuture(+this,s)),t.postformat(s)}function Ps(){var e,t,s,i=pn(this._milliseconds)/1e3,n=pn(this._days),a=pn(this._months);e=f(i/60),t=f(e/60),i%=60,e%=60,s=f(a/12),a%=12;var o=s,r=a,l=n,h=t,c=e,d=i,u=this.asSeconds();return u?(u<0?"-":"")+"P"+(o?o+"Y":"")+(r?r+"M":"")+(l?l+"D":"")+(h||c||d?"T":"")+(h?h+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var Os,Es,As=e.momentProperties=[],Ls=!1,Ys={},Hs={},Vs=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Rs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Us={},Bs={},js=/\d/,Fs=/\d\d/,Ws=/\d{3}/,zs=/\d{4}/,Gs=/[+-]?\d{6}/,Js=/\d\d?/,qs=/\d{1,3}/,Qs=/\d{1,4}/,Ks=/[+-]?\d{1,6}/,Xs=/\d+/,Zs=/[+-]?\d+/,ei=/Z|[+-]\d\d:?\d\d/gi,ti=/[+-]?\d+(\.\d{1,3})?/,si=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ii={},ni={},ai=0,oi=1,ri=2,li=3,hi=4,ci=5,di=6;O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),O("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),V("M",Js),V("MM",Js,Fs),V("MMM",si),V("MMMM",si),B(["M","MM"],function(e,t){t[oi]=g(e)-1}),B(["MMM","MMMM"],function(e,t,s,i){var n=s._locale.monthsParse(e,i,s._strict);null!=n?t[oi]=n:h(s).invalidMonth=e});var ui="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),pi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),mi={};e.suppressDeprecationWarnings=!1;var fi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],vi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),D("year","y"),V("Y",Zs),V("YY",Js,Fs),V("YYYY",Qs,zs),V("YYYYY",Ks,Gs),V("YYYYYY",Ks,Gs),B(["YYYYY","YYYYYY"],ai),B("YYYY",function(t,s){s[ai]=2===t.length?e.parseTwoDigitYear(t):g(t)}),B("YY",function(t,s){s[ai]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var yi=N("FullYear",!1);O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),V("w",Js),V("ww",Js,Fs),V("W",Js),V("WW",Js,Fs),j(["w","ww","W","WW"],function(e,t,s,i){t[i.substr(0,1)]=g(e)});var ki={dow:0,doy:6};O("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),V("DDD",qs),V("DDDD",Ws),B(["DDD","DDDD"],function(e,t,s){s._dayOfYear=g(e)}),e.ISO_8601=function(){};var wi=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Me.apply(null,arguments);return e<this?this:e}),xi=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Me.apply(null,arguments);return e>this?this:e});Ae("Z",":"),Ae("ZZ",""),V("Z",ei),V("ZZ",ei),B(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=Le(e)});var Ci=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var _i=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Di=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Qe.fn=Oe.prototype;var Si=et(1,"add"),Ii=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ni=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Mt("gggg","weekYear"),Mt("ggggg","weekYear"),Mt("GGGG","isoWeekYear"),Mt("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),V("G",Zs),V("g",Zs),V("GG",Js,Fs),V("gg",Js,Fs),V("GGGG",Qs,zs),V("gggg",Qs,zs),V("GGGGG",Ks,Gs),V("ggggg",Ks,Gs),j(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,i){t[i.substr(0,2)]=g(e)}),j(["gg","GG"],function(t,s,i,n){s[n]=e.parseTwoDigitYear(t)}),O("Q",0,0,"quarter"),D("quarter","Q"),V("Q",js),B("Q",function(e,t){t[oi]=3*(g(e)-1)}),O("D",["DD",2],"Do","date"),D("date","D"),V("D",Js),V("DD",Js,Fs),V("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),B(["D","DD"],ri),B("Do",function(e,t){t[ri]=g(e.match(Js)[0],10)});var Mi=N("Date",!0);O("d",0,"do","day"),
O("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),O("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),O("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),V("d",Js),V("e",Js),V("E",Js),V("dd",si),V("ddd",si),V("dddd",si),j(["dd","ddd","dddd"],function(e,t,s){var i=s._locale.weekdaysParse(e);null!=i?t.d=i:h(s).invalidWeekday=e}),j(["d","e","E"],function(e,t,s,i){t[i]=g(e)});var $i="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ti="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");O("H",["HH",2],0,"hour"),O("h",["hh",2],0,function(){return this.hours()%12||12}),Ft("a",!0),Ft("A",!1),D("hour","h"),V("a",Wt),V("A",Wt),V("H",Js),V("h",Js),V("HH",Js,Fs),V("hh",Js,Fs),B(["H","HH"],li),B(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e}),B(["h","hh"],function(e,t,s){t[li]=g(e),h(s).bigHour=!0});var Oi=/[ap]\.?m?\.?/i,Ei=N("Hours",!0);O("m",["mm",2],0,"minute"),D("minute","m"),V("m",Js),V("mm",Js,Fs),B(["m","mm"],hi);var Ai=N("Minutes",!1);O("s",["ss",2],0,"second"),D("second","s"),V("s",Js),V("ss",Js,Fs),B(["s","ss"],ci);var Li=N("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),O(0,["SSS",3],0,"millisecond"),O(0,["SSSS",4],0,function(){return 10*this.millisecond()}),O(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),O(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),O(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),O(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),O(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),V("S",qs,js),V("SS",qs,Fs),V("SSS",qs,Ws);var Yi;for(Yi="SSSS";Yi.length<=9;Yi+="S")V(Yi,Xs);for(Yi="S";Yi.length<=9;Yi+="S")B(Yi,Jt);var Hi=N("Milliseconds",!1);O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var Vi=p.prototype;Vi.add=Si,Vi.calendar=st,Vi.clone=it,Vi.diff=lt,Vi.endOf=kt,Vi.format=ut,Vi.from=pt,Vi.fromNow=mt,Vi.to=ft,Vi.toNow=gt,Vi.get=T,Vi.invalidAt=Nt,Vi.isAfter=nt,Vi.isBefore=at,Vi.isBetween=ot,Vi.isSame=rt,Vi.isValid=St,Vi.lang=Ni,Vi.locale=vt,Vi.localeData=bt,Vi.max=xi,Vi.min=wi,Vi.parsingFlags=It,Vi.set=T,Vi.startOf=yt,Vi.subtract=Ii,Vi.toArray=_t,Vi.toObject=Dt,Vi.toDate=Ct,Vi.toISOString=dt,Vi.toJSON=dt,Vi.toString=ct,Vi.unix=xt,Vi.valueOf=wt,Vi.year=yi,Vi.isLeapYear=le,Vi.weekYear=Tt,Vi.isoWeekYear=Pt,Vi.quarter=Vi.quarters=At,Vi.month=Q,Vi.daysInMonth=K,Vi.week=Vi.weeks=pe,Vi.isoWeek=Vi.isoWeeks=me,Vi.weeksInYear=Et,Vi.isoWeeksInYear=Ot,Vi.date=Mi,Vi.day=Vi.days=Ut,Vi.weekday=Bt,Vi.isoWeekday=jt,Vi.dayOfYear=ge,Vi.hour=Vi.hours=Ei,Vi.minute=Vi.minutes=Ai,Vi.second=Vi.seconds=Li,Vi.millisecond=Vi.milliseconds=Hi,Vi.utcOffset=Ve,Vi.utc=Ue,Vi.local=Be,Vi.parseZone=je,Vi.hasAlignedHourOffset=Fe,Vi.isDST=We,Vi.isDSTShifted=ze,Vi.isLocal=Ge,Vi.isUtcOffset=Je,Vi.isUtc=qe,Vi.isUTC=qe,Vi.zoneAbbr=qt,Vi.zoneName=Qt,Vi.dates=ee("dates accessor is deprecated. Use date instead.",Mi),Vi.months=ee("months accessor is deprecated. Use month instead",Q),Vi.years=ee("years accessor is deprecated. Use year instead",yi),Vi.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Re);var Ri=Vi,Ui={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Bi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ji="Invalid date",Fi="%d",Wi=/\d{1,2}/,zi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Gi=b.prototype;Gi._calendar=Ui,Gi.calendar=Zt,Gi._longDateFormat=Bi,Gi.longDateFormat=es,Gi._invalidDate=ji,Gi.invalidDate=ts,Gi._ordinal=Fi,Gi.ordinal=ss,Gi._ordinalParse=Wi,Gi.preparse=is,Gi.postformat=is,Gi._relativeTime=zi,Gi.relativeTime=ns,Gi.pastFuture=as,Gi.set=os,Gi.months=z,Gi._months=ui,Gi.monthsShort=G,Gi._monthsShort=pi,Gi.monthsParse=J,Gi.week=ce,Gi._week=ki,Gi.firstDayOfYear=ue,Gi.firstDayOfWeek=de,Gi.weekdays=Yt,Gi._weekdays=$i,Gi.weekdaysMin=Vt,Gi._weekdaysMin=Pi,Gi.weekdaysShort=Ht,Gi._weekdaysShort=Ti,Gi.weekdaysParse=Rt,Gi.isPM=zt,Gi._meridiemParse=Oi,Gi.meridiem=Gt,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+s}}),e.lang=ee("moment.lang is deprecated. Use moment.locale instead.",x),e.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",_);var Ji=Math.abs,qi=_s("ms"),Qi=_s("s"),Ki=_s("m"),Xi=_s("h"),Zi=_s("d"),en=_s("w"),tn=_s("M"),sn=_s("y"),nn=Ss("milliseconds"),an=Ss("seconds"),on=Ss("minutes"),rn=Ss("hours"),ln=Ss("days"),hn=Ss("months"),cn=Ss("years"),dn=Math.round,un={s:45,m:45,h:22,d:26,M:11},pn=Math.abs,mn=Oe.prototype;mn.abs=ms,mn.add=gs,mn.subtract=vs,mn.as=xs,mn.asMilliseconds=qi,mn.asSeconds=Qi,mn.asMinutes=Ki,mn.asHours=Xi,mn.asDays=Zi,mn.asWeeks=en,mn.asMonths=tn,mn.asYears=sn,mn.valueOf=Cs,mn._bubble=ys,mn.get=Ds,mn.milliseconds=nn,mn.seconds=an,mn.minutes=on,mn.hours=rn,mn.days=ln,mn.weeks=Is,mn.months=hn,mn.years=cn,mn.humanize=Ts,mn.toISOString=Ps,mn.toString=Ps,mn.toJSON=Ps,mn.locale=vt,mn.localeData=bt,mn.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ps),mn.lang=Ni,O("X",0,0,"unix"),O("x",0,0,"valueOf"),V("x",Zs),V("X",ti),B("X",function(e,t,s){s._d=new Date(1e3*parseFloat(e,10))}),B("x",function(e,t,s){s._d=new Date(g(e))}),e.version="2.10.6",t(Me),e.fn=Ri,e.min=Te,e.max=Pe,e.utc=r,e.unix=Kt,e.months=hs,e.isDate=i,e.locale=x,e.invalid=d,e.duration=Qe,e.isMoment=m,e.weekdays=ds,e.parseZone=Xt,e.localeData=_,e.isDuration=Ee,e.monthsShort=cs,e.weekdaysMin=ps,e.defineLocale=C,e.weekdaysShort=us,e.normalizeUnits=S,e.relativeTimeThreshold=$s;var fn=e;window.moment=fn}(),function(e){e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,s){var i=100*e+t;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,s;return t=e().startOf("week"),s=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?s+"dddAh点整":s+"dddAh点mm"},lastWeek:function(){var t,s;return t=e().startOf("week"),s=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?s+"dddAh点整":s+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(moment),function(e){e.locale("zh_cn")}(moment),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var s in t)if(void 0!==e.style[s])return{end:t[s]};return!1}e.fn.emulateTransitionEnd=function(t){var s=!1,i=this;e(this).one("bsTransitionEnd",function(){s=!0});var n=function(){s||e(i).trigger(e.support.transition.end)};return setTimeout(n,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);var s=""===t.handle?e(this):e(this).find(t.handle),i=e(this),n=function(){var t,s;return{start:function(n){t=i.css("z-index"),s=function(){var e=i.outerHeight(),t=i.outerWidth(),s=i.offset().top+e-n.pageY,a=i.offset().left+t-n.pageX;return function(n){i.offset({top:n.pageY+s-e,left:n.pageX+a-t})}}(),e(window).on("mousemove",s).addClass("draggable")},stop:function(){e(window).off("mousemove",s).removeClass("draggable")}}}();return s.css("cursor",t.cursor).on("mousedown",function(t){e(window).one("mouseup",function(e){n.stop(),s.removeClass("active-handle")}),n.start(t),s.addClass("active-handle")}),s}}(jQuery),$.fn.extend({dragging:function(e){function t(){o.each(function(e){var t=parseInt(Math.random()*(b-k)),s=parseInt(Math.random()*(v-y));"x"==c.toLowerCase()?$(this).css({left:s}):"y"==c.toLowerCase()?$(this).css({top:t}):"both"==c.toLowerCase()&&$(this).css({top:t,left:s})})}var s,i,n,a,o=$(this),r=o.parent(),l={move:"both",randomPosition:!0,hander:1},h=$.extend({},l,e),c=h.move,d=h.randomPosition,u=h.hander;h.parent&&(o=h.parent),u=1==u?o:o.find(h.hander),r.css({position:"relative"}),h.parent?o.css({position:"absolute",left:"50%",marginLeft:-o.width()/2}):o.css({position:"absolute"}),u.css({cursor:"move"});var p,m,f,g,v=r.width(),b=r.height(),y=o.width()+parseInt(o.css("padding-left"))+parseInt(o.css("padding-right")),k=o.height()+parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom")),w=!1;d&&t(),u.mousedown(function(e){return w=!0,n=e.pageX,a=e.pageY,p=o.position().left,m=o.position().top,!1}),$(document).mouseup(function(e){w=!1}),$(document).mousemove(function(e){function t(){if(w===!0)return o.css({left:f}),f<0&&o.css({left:"0"}),f>v-y&&o.css({left:v-y}),f}function r(){if(w===!0)return o.css({top:g}),g<0&&o.css({top:"0"}),g>b-k&&o.css({top:b-k}),g}function l(){w===!0&&o.css({left:f,top:g})}s=e.pageX,f=p+s-n,i=e.pageY,g=m+i-a,"x"==c.toLowerCase()?t():"y"==c.toLowerCase()?r():"both"==c.toLowerCase()&&l()})}}),function(e,t,s){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t||s)}(function(e){var t=function(t,s,i){var n={invalid:[],getCaret:function(){try{var e,s=0,i=t.get(0),a=document.selection,o=i.selectionStart;return a&&navigator.appVersion.indexOf("MSIE 10")===-1?(e=a.createRange(),e.moveStart("character",-n.val().length),s=e.text.length):(o||"0"===o)&&(s=o),s}catch(r){}},setCaret:function(e){try{if(t.is(":focus")){var s,i=t.get(0);i.setSelectionRange?i.setSelectionRange(i.value.length,i.value.length):(s=i.createTextRange(),s.collapse(!0),s.moveEnd("character",s.value.length),s.moveStart("character",s.value.length),s.select())}}catch(n){}},events:function(){t.on("keydown.mask",function(e){t.data("mask-keycode",e.keyCode||e.which),t.data("mask-previus-value",t.val()),t.data("mask-previus-caret-pos",n.getCaret()),n.maskDigitPosMapOld=n.maskDigitPosMap}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",n.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){r===n.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("blur.mask",function(){r=n.val()}).on("focus.mask",function(t){i.selectOnFocus===!0&&e(t.target).select()}).on("focusout.mask",function(){i.clearIfNotMatch&&!a.test(n.val())&&n.val("")})},getRegexMask:function(){for(var e,t,i,n,a,r,l=[],h=0;h<s.length;h++)e=o.translation[s.charAt(h)],e?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),i=e.optional,n=e.recursive,n?(l.push(s.charAt(h)),a={digit:s.charAt(h),pattern:t}):l.push(i||n?t+"?":t)):l.push(s.charAt(h).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=l.join(""),a&&(r=r.replace(new RegExp("("+a.digit+"(.*"+a.digit+")?)"),"($1)?").replace(new RegExp(a.digit,"g"),a.pattern)),new RegExp(r)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var s,i=t.is("input"),n=i?"val":"text";return arguments.length>0?(t[n]()!==e&&t[n](e),s=t):s=t[n](),s},calculateCaretPosition:function(){var e=t.data("mask-previus-value")||"",s=n.getMasked(),i=n.getCaret();if(e!==s){var a=t.data("mask-previus-caret-pos")||0,o=s.length,r=e.length,l=0,h=0,c=0,d=0,u=0;for(u=i;u<o&&n.maskDigitPosMap[u];u++)h++;for(u=i-1;u>=0&&n.maskDigitPosMap[u];u--)l++;for(u=i-1;u>=0;u--)n.maskDigitPosMap[u]&&c++;for(u=a-1;u>=0;u--)n.maskDigitPosMapOld[u]&&d++;if(i>r)i=o;else if(a>=i&&a!==r){if(!n.maskDigitPosMapOld[i]){var p=i;i-=d-c,i-=l,n.maskDigitPosMap[i]&&(i=p)}}else i>a&&(i+=c-d,i+=h)}return i},behaviour:function(s){s=s||window.event,n.invalid=[];var i=t.data("mask-keycode");if(e.inArray(i,o.byPassKeys)===-1){var a=n.getMasked(),r=n.getCaret();return setTimeout(function(){n.setCaret(n.calculateCaretPosition())},10),n.val(a),n.setCaret(r),n.callbacks(s)}},getMasked:function(e,t){var a,r,l=[],h=void 0===t?n.val():t+"",c=0,d=s.length,u=0,p=h.length,m=1,f="push",g=-1,v=0,b=[];i.reverse?(f="unshift",m=-1,a=0,c=d-1,u=p-1,r=function(){return c>-1&&u>-1}):(a=d-1,r=function(){return c<d&&u<p});for(var y;r();){var k=s.charAt(c),w=h.charAt(u),x=o.translation[k];x?(w.match(x.pattern)?(l[f](w),x.recursive&&(g===-1?g=c:c===a&&(c=g-m),a===g&&(c-=m)),c+=m):w===y?(v--,y=void 0):x.optional?(c+=m,u-=m):x.fallback?(l[f](x.fallback),c+=m,u-=m):n.invalid.push({p:u,v:w,e:x.pattern}),u+=m):(e||l[f](k),w===k?(b.push(u),u+=m):(y=k,b.push(u+v),v++),c+=m)}var C=s.charAt(a);d!==p+1||o.translation[C]||l.push(C);var _=l.join("");return n.mapMaskdigitPositions(_,b,p),_},mapMaskdigitPositions:function(e,t,s){var a=i.reverse?e.length-s:0;n.maskDigitPosMap={};for(var o=0;o<t.length;o++)n.maskDigitPosMap[t[o]+a]=1},callbacks:function(e){var a=n.val(),o=a!==r,l=[a,e,t,i],h=function(e,t,s){"function"==typeof i[e]&&t&&i[e].apply(this,s)};h("onChange",o===!0,l),h("onKeyPress",o===!0,l),h("onComplete",a.length===s.length,l),h("onInvalid",n.invalid.length>0,[a,e,t,n.invalid,i])}};t=e(t);var a,o=this,r=n.val();s="function"==typeof s?s(n.val(),void 0,t,i):s,o.mask=s,o.options=i,o.remove=function(){var e=n.getCaret();return n.destroyEvents(),n.val(o.getCleanVal()),n.setCaret(e),t},o.getCleanVal=function(){return n.getMasked(!0)},o.getMaskedVal=function(e){return n.getMasked(!1,e)},o.init=function(r){if(r=r||!1,i=i||{},o.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,o.byPassKeys=e.jMaskGlobals.byPassKeys,o.translation=e.extend({},e.jMaskGlobals.translation,i.translation),o=e.extend(!0,{},o,i),a=n.getRegexMask(),r)n.events(),n.val(n.getMasked());else{i.placeholder&&t.attr("placeholder",i.placeholder),t.data("mask")&&t.attr("autocomplete","off");for(var l=0,h=!0;l<s.length;l++){var c=o.translation[s.charAt(l)];if(c&&c.recursive){h=!1;break}}h&&t.attr("maxlength",s.length),n.destroyEvents(),n.events();var d=n.getCaret();n.val(n.getMasked()),n.setCaret(d)}},o.init(!t.is("input"))};e.maskWatchers={};var s=function(){var s=e(this),n={},a="data-mask-",o=s.attr("data-mask");if(s.attr(a+"reverse")&&(n.reverse=!0),s.attr(a+"clearifnotmatch")&&(n.clearIfNotMatch=!0),"true"===s.attr(a+"selectonfocus")&&(n.selectOnFocus=!0),i(s,o,n))return s.data("mask",new t(this,o,n))},i=function(t,s,i){i=i||{};var n=e(t).data("mask"),a=JSON.stringify,o=e(t).val()||e(t).text();try{return"function"==typeof s&&(s=s(o)),"object"!=typeof n||a(n.options)!==a(i)||n.mask!==s}catch(r){}},n=function(e){var t,s=document.createElement("div");return e="on"+e,t=e in s,t||(s.setAttribute(e,"return;"),t="function"==typeof s[e]),s=null,t};e.fn.mask=function(s,n){n=n||{};var a=this.selector,o=e.jMaskGlobals,r=o.watchInterval,l=n.watchInputs||o.watchInputs,h=function(){if(i(this,s,n))return e(this).data("mask",new t(this,s,n))};return e(this).each(h),a&&""!==a&&l&&(clearInterval(e.maskWatchers[a]),e.maskWatchers[a]=setInterval(function(){e(document).find(a).each(h)},r)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){t=t||e.jMaskGlobals.maskElements;var i=t instanceof e?t:e(t);i.filter(e.jMaskGlobals.dataMaskAttr).each(s)};var a={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&n("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},a=e.jMaskGlobals=e.extend(!0,{},a,e.jMaskGlobals),a.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},a.watchInterval)},window.jQuery,window.Zepto),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.ui=e.ui||{};var t=(e.ui.version="1.12.1",0),s=Array.prototype.slice;e.cleanData=function(t){return function(s){var i,n,a;for(a=0;null!=(n=s[a]);a++)try{i=e._data(n,"events"),i&&i.remove&&e(n).triggerHandler("remove")}catch(o){}t(s)}}(e.cleanData),e.widget=function(t,s,i){var n,a,o,r={},l=t.split(".")[0];t=t.split(".")[1];var h=l+"-"+t;return i||(i=s,s=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][h.toLowerCase()]=function(t){return!!e.data(t,h)},e[l]=e[l]||{},n=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,n,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),o=new s,o.options=e.widget.extend({},o.options),e.each(i,function(t,i){return e.isFunction(i)?void(r[t]=function(){function e(){return s.prototype[t].apply(this,arguments)}function n(e){return s.prototype[t].apply(this,e)}return function(){var t,s=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=i.apply(this,arguments),this._super=s,this._superApply=a,t}}()):void(r[t]=i)}),a.prototype=e.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix||t:t},r,{constructor:a,namespace:l,widgetName:t,widgetFullName:h}),n?(e.each(n._childConstructors,function(t,s){var i=s.prototype;e.widget(i.namespace+"."+i.widgetName,a,s._proto)}),delete n._childConstructors):s._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var i,n,a=s.call(arguments,1),o=0,r=a.length;o<r;o++)for(i in a[o])n=a[o][i],a[o].hasOwnProperty(i)&&void 0!==n&&(e.isPlainObject(n)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):t[i]=n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(a){var o="string"==typeof a,r=s.call(arguments,1),l=this;return o?this.length||"instance"!==a?this.each(function(){var s,i=e.data(this,n);return"instance"===a?(l=i,!1):i?e.isFunction(i[a])&&"_"!==a.charAt(0)?(s=i[a].apply(i,r),s!==i&&void 0!==s?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):l=void 0:(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each(function(){var t=e.data(this,n);t?(t.option(a||{}),t._init&&t._init()):e.data(this,n,new i(a,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(s,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),s),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,s){t._removeClass(s,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,s){var i,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;a<i.length-1;a++)n[i[a]]=n[i[a]]||{},n=n[i[a]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=s}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var s,i,n;for(s in t)n=this.classesElementLookup[s],t[s]!==this.options.classes[s]&&n&&n.length&&(i=e(n.get()),this._removeClass(n,s),i.addClass(this._classes({element:i,keys:s,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function s(s,a){var o,r;for(r=0;r<s.length;r++)o=n.classesElementLookup[s[r]]||e(),o=e(t.add?e.unique(o.get().concat(t.element.get())):o.not(t.element).get()),n.classesElementLookup[s[r]]=o,i.push(s[r]),a&&t.classes[s[r]]&&i.push(t.classes[s[r]])}var i=[],n=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&s(t.keys.match(/\S+/g)||[],!0),t.extra&&s(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var s=this;e.each(s.classesElementLookup,function(i,n){e.inArray(t.target,n)!==-1&&(s.classesElementLookup[i]=e(n.not(t.target).get()))})},_removeClass:function(e,t,s){return this._toggleClass(e,t,s,!1)},_addClass:function(e,t,s){return this._toggleClass(e,t,s,!0)},_toggleClass:function(e,t,s,i){i="boolean"==typeof i?i:s;var n="string"==typeof e||null===e,a={extra:n?t:s,keys:n?e:t,element:n?this.element:e,add:i};return a.element.toggleClass(this._classes(a),i),this},_on:function(t,s,i){var n,a=this;"boolean"!=typeof t&&(i=s,s=t,t=!1),i?(s=n=e(s),this.bindings=this.bindings.add(s)):(i=s,s=this.element,n=this.widget()),e.each(i,function(i,o){function r(){if(t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+a.eventNamespace,c=l[2];c?n.on(h,c,r):s.on(h,r)})},_off:function(t,s){s=(s||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(s).off(s),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function s(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(s,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,s,i){var n,a,o=this.options[t];if(i=i||{},s=e.Event(s),s.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),s.target=this.element[0],a=s.originalEvent)for(n in a)n in s||(s[n]=a[n]);return this.element.trigger(s,i),!(e.isFunction(o)&&o.apply(this.element[0],[s].concat(i))===!1||s.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,s){e.Widget.prototype["_"+t]=function(i,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?s:n.effect||s:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&i.delay(n.delay),o&&e.effects&&e.effects.effect[r]?i[t](n):r!==t&&i[r]?i[r](n.duration,n.easing,a):i.queue(function(s){e(this)[t](),a&&a.call(i[0]),s()})}});var i=(e.widget,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(s){return!!e.data(s,t)}}):function(t,s,i){return!!e.data(t,i[3])}}),e.fn.scrollParent=function(t){var s=this.css("position"),i="absolute"===s,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==s&&a.length?a:e(this[0].ownerDocument||document)},e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);e(document).on("mouseup",function(){i=!1});e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(s){if(!0===e.data(s.target,t.widgetName+".preventClickEvent"))return e.removeData(s.target,t.widgetName+".preventClickEvent"),s.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var s=this,n=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,i=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,s,i){var n,a=e.ui[t].prototype;for(n in i)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([s,i[n]])},call:function(e,t,s,i){var n,a=e.plugins[t];if(a&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;n<a.length;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,s)}},e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(s){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var s=this.options;return!(this.helper||s.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(s.iframeFix===!0?"iframe":s.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var s=e.ui.safeActiveElement(this.document[0]),i=e(t.target);i.closest(s).length||e.ui.safeBlur(s)},_mouseStart:function(t){var s=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){
return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,s){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!s){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var s=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var s=this.options,i=e.isFunction(s.helper),n=i?e(s.helper.apply(this.element[0],[t])):"clone"===s.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===s.appendTo?this.element[0].parentNode:s.appendTo),i&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),s=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==s&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,s,i,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),s=e(n.containment),i=s[0],void(i&&(t=/(scroll|auto)/.test(s.css("overflow")),this.containment=[(parseInt(s.css("borderLeftWidth"),10)||0)+(parseInt(s.css("paddingLeft"),10)||0),(parseInt(s.css("borderTopWidth"),10)||0)+(parseInt(s.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(s.css("borderRightWidth"),10)||0)-(parseInt(s.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(s.css("borderBottomWidth"),10)||0)-(parseInt(s.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=s))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var s="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*s,left:t.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*s}},_generatePosition:function(e,t){var s,i,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),l=e.pageX,h=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),s=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):s=this.containment,e.pageX-this.offset.click.left<s[0]&&(l=s[0]+this.offset.click.left),e.pageY-this.offset.click.top<s[1]&&(h=s[1]+this.offset.click.top),e.pageX-this.offset.click.left>s[2]&&(l=s[2]+this.offset.click.left),e.pageY-this.offset.click.top>s[3]&&(h=s[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=s?n-this.offset.click.top>=s[1]||n-this.offset.click.top>s[3]?n:n-this.offset.click.top>=s[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=s?a-this.offset.click.left>=s[0]||a-this.offset.click.left>s[2]?a:a-this.offset.click.left>=s[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,s,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[s,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,s,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,s,i){var n=e.extend({},s,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var s=e(this).sortable("instance");s&&!s.options.disabled&&(i.sortables.push(s),s.refreshPositions(),s._trigger("activate",t,n))})},stop:function(t,s,i){var n=e.extend({},s,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(t,s,i){e.each(i.sortables,function(){var n=!1,a=this;a.positionAbs=i.positionAbs,a.helperProportions=i.helperProportions,a.offset.click=i.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n})),n?(a.isOver||(a.isOver=1,i._parent=s.helper.parent(),a.currentItem=s.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return s.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=i.offset.click.top,a.offset.click.left=i.offset.click.left,a.offset.parent.left-=i.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=i.offset.parent.top-a.offset.parent.top,i._trigger("toSortable",t),i.dropped=a.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,a.fromOutside=i),a.currentItem&&(a._mouseDrag(t),s.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),s.helper.appendTo(i._parent),i._refreshOffsets(t),s.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,s,i){var n=e("body"),a=i.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,s,i){var n=i.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,s,i){var n=e(s.helper),a=i.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,s,i){var n=i.options;n._opacity&&e(s.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,s){s.scrollParentNotHidden||(s.scrollParentNotHidden=s.helper.scrollParent(!1)),s.scrollParentNotHidden[0]!==s.document[0]&&"HTML"!==s.scrollParentNotHidden[0].tagName&&(s.overflowOffset=s.scrollParentNotHidden.offset())},drag:function(t,s,i){var n=i.options,a=!1,o=i.scrollParentNotHidden[0],r=i.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,s,i){var n=i.options;i.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),s=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:s.top,left:s.left})})},drag:function(t,s,i){var n,a,o,r,l,h,c,d,u,p,m=i.options,f=m.snapTolerance,g=s.offset.left,v=g+i.helperProportions.width,b=s.offset.top,y=b+i.helperProportions.height;for(u=i.snapElements.length-1;u>=0;u--)l=i.snapElements[u].left-i.margins.left,h=l+i.snapElements[u].width,c=i.snapElements[u].top-i.margins.top,d=c+i.snapElements[u].height,v<l-f||g>h+f||y<c-f||b>d+f||!e.contains(i.snapElements[u].item.ownerDocument,i.snapElements[u].item)?(i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(c-y)<=f,a=Math.abs(d-b)<=f,o=Math.abs(l-v)<=f,r=Math.abs(h-g)<=f,n&&(s.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),a&&(s.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),o&&(s.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h}).left)),p=n||a||o||r,"outer"!==m.snapMode&&(n=Math.abs(c-b)<=f,a=Math.abs(d-y)<=f,o=Math.abs(l-g)<=f,r=Math.abs(h-v)<=f,n&&(s.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),a&&(s.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),o&&(s.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),r&&(s.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left)),!i.snapElements[u].snapping&&(n||a||o||r||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,s,i){var n,a=i.options,o=e.makeArray(e(a.stack)).sort(function(t,s){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(s).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,s,i){var n=e(s.helper),a=i.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,s,i){var n=i.options;n._zIndex&&e(s.helper).css("zIndex",n._zIndex)}});e.ui.draggable;e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,s=this.options,i=s.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(s.scope),s.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,s){if("accept"===t)this.accept=e.isFunction(s)?s:function(e){return e.is(s)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(s)}this._super(t,s)},_activate:function(t){var s=e.ui.ddmanager.current;this._addActiveClass(),s&&this._trigger("activate",t,this.ui(s))},_deactivate:function(t){var s=e.ui.ddmanager.current;this._removeActiveClass(),s&&this._trigger("deactivate",t,this.ui(s))},_over:function(t){var s=e.ui.ddmanager.current;s&&(s.currentItem||s.element)[0]!==this.element[0]&&this.accept.call(this.element[0],s.currentItem||s.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(s)))},_out:function(t){var s=e.ui.ddmanager.current;s&&(s.currentItem||s.element)[0]!==this.element[0]&&this.accept.call(this.element[0],s.currentItem||s.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(s)))},_drop:function(t,s){var i=s||e.ui.ddmanager.current,a=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var s=e(this).droppable("instance");if(s.options.greedy&&!s.options.disabled&&s.options.scope===i.options.scope&&s.accept.call(s.element[0],i.currentItem||i.element)&&n(i,e.extend(s,{offset:s.element.offset()}),s.options.tolerance,t))return a=!0,!1}),!a&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(i)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var n=e.ui.intersect=function(){function e(e,t,s){return e>=t&&e<t+s}return function(t,s,i,n){if(!s.offset)return!1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,l=o+t.helperProportions.height,h=s.offset.left,c=s.offset.top,d=h+s.proportions().width,u=c+s.proportions().height;switch(i){case"fit":return h<=a&&r<=d&&c<=o&&l<=u;case"intersect":return h<a+t.helperProportions.width/2&&r-t.helperProportions.width/2<d&&c<o+t.helperProportions.height/2&&l-t.helperProportions.height/2<u;case"pointer":return e(n.pageY,c,s.proportions().height)&&e(n.pageX,h,s.proportions().width);case"touch":return(o>=c&&o<=u||l>=c&&l<=u||o<c&&l>u)&&(a>=h&&a<=d||r>=h&&r<=d||a<h&&r>d);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,s){var i,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=s?s.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<a.length;i++)if(!(a[i].options.disabled||t&&!a[i].accept.call(a[i].element[0],t.currentItem||t.element))){for(n=0;n<r.length;n++)if(r[n]===a[i].element[0]){a[i].proportions().height=0;continue e}a[i].visible="none"!==a[i].element.css("display"),a[i].visible&&("mousedown"===o&&a[i]._activate.call(a[i],s),a[i].offset=a[i].element.offset(),a[i].proportions({width:a[i].element[0].offsetWidth,height:a[i].element[0].offsetHeight}))}},drop:function(t,s){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n(t,this,this.options.tolerance,s)&&(i=this._drop.call(this,s)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,s)))}),i},dragStart:function(t,s){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,s)})},drag:function(t,s){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,s),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,a,o,r=n(t,this,this.options.tolerance,s),l=!r&&this.isover?"isout":r&&!this.isover?"isover":null;l&&(this.options.greedy&&(a=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===a}),o.length&&(i=e(o[0]).droppable("instance"),i.greedyChild="isover"===l)),i&&"isover"===l&&(i.isover=!1,i.isout=!0,i._out.call(i,s)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,s),i&&"isout"===l&&(i.isout=!1,i.isover=!0,i._over.call(i,s)))}})},dragStop:function(t,s){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,s)}},e.uiBackCompat!==!1&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});e.ui.droppable,e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,s){return e>=t&&e<t+s},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,s){var i=null,n=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return i=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(i=e(t.target)),!!i&&(!(this.options.handle&&!s&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,s,i){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var s,i,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),s=this.items.length-1;s>=0;s--)if(i=this.items[s],n=i.item[0],a=this._intersectsWithPointer(i),a&&i.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===n||e.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],n))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,s){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,s);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var s=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(s).each(function(){var s=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);s&&i.push((t.key||s[1]+"[]")+"="+(t.key&&t.expression?s[1]:s[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var s=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},s.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,s=t+this.helperProportions.width,i=this.positionAbs.top,n=i+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,l=r+e.height,h=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||i+h>r&&i+h<l,u="y"===this.options.axis||t+c>a&&t+c<o,p=d&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:a<t+this.helperProportions.width/2&&s-this.helperProportions.width/2<o&&r<i+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,s,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=i&&n;return!!a&&(t=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection(),this.floating?"right"===s||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&s||"left"===n&&!s:i&&("down"===i&&t||"up"===i&&!t);
},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function s(){r.push(this)}var i,n,a,o,r=[],l=[],h=this._connectWith();if(h&&t)for(i=h.length-1;i>=0;i--)for(a=e(h[i],this.document[0]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(s);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var s=0;s<t.length;s++)if(t[s]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var s,i,n,a,o,r,l,h,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(s=u.length-1;s>=0;s--)for(n=e(u[s],this.document[0]),i=n.length-1;i>=0;i--)a=e.data(n[i],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(s=d.length-1;s>=0;s--)for(o=d[s][1],r=d[s][0],i=0,h=r.length;i<h;i++)l=e(r[i]),l.data(this.widgetName+"-item",o),c.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var s,i,n,a;for(s=this.items.length-1;s>=0;s--)i=this.items[s],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),a=n.offset(),i.left=a.left,i.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(s=this.containers.length-1;s>=0;s--)a=this.containers[s].element.offset(),this.containers[s].containerCache.left=a.left,this.containers[s].containerCache.top=a.top,this.containers[s].containerCache.width=this.containers[s].element.outerWidth(),this.containers[s].containerCache.height=this.containers[s].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var s,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(s=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+i+">",t.document[0]);return t._addClass(n,"ui-sortable-placeholder",s||t.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(n)):"tr"===i?t._createTrPlaceholder(t.currentItem,n):"img"===i&&n.attr("src",t.currentItem.attr("src")),s||n.css("visibility","hidden"),n},update:function(e,n){s&&!i.forcePlaceholderSize||(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,s){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)})},_contactContainers:function(t){var s,i,n,a,o,r,l,h,c,d,u=null,p=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(u&&e.contains(this.containers[s].element[0],u.element[0]))continue;u=this.containers[s],p=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",t,this._uiHash(this)),this.containers[s].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,c=u.floating||this._isFloating(this.currentItem),o=c?"left":"top",r=c?"width":"height",d=c?"pageX":"pageY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[o],h=!1,t[d]-l>this.items[i][r]/2&&(h=!0),Math.abs(t[d]-l)<n&&(n=Math.abs(t[d]-l),a=this.items[i],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var s=this.options,i=e.isFunction(s.helper)?e(s.helper.apply(this.element[0],[t,this.currentItem])):"clone"===s.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==s.appendTo?s.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!s.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!s.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,s,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],s=e(n.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[s.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,s.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,s){s||(s=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:s.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*i,left:s.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*i}},_generatePosition:function(t){var s,i,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(s=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?s-this.offset.click.top>=this.containment[1]&&s-this.offset.click.top<=this.containment[3]?s:s-this.offset.click.top>=this.containment[1]?s-n.grid[1]:s+n.grid[1]:s,i=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,s,i){s?s[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function s(e,t,s){return function(i){s._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(s("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(s("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var s=t||this;return{helper:s.helper,placeholder:s.placeholder||e([]),position:s.position,originalPosition:s.originalPosition,offset:s.positionAbs,item:s.currentItem,sender:t?t.element:null}}})}),Jx()["package"]("s.utilities",function(e){"use strict";String.format=function(){if(0===arguments.length)return null;for(var e=arguments[0],t=1;t<arguments.length;t++){var s=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(s,arguments[t])}return e},this.indexOfArray=function(e,t,s){var i=!0;if(Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]),"object"!=typeof t)return e.indexOf(t);for(var n=0;n<e.length;n++){i=!0;for(var a=0;a<s.length;a++)t[s[a]]!=e[n][s[a]]&&(i=!1);if(i)return n}return-1},this.removeOneofArray=function(e,t,s){var i=this.indexOfArray(e,t,s);return i>=0&&e.splice(i,1),e},this.addSomeOfArray=function(e,t,s,i,n){if(t=Array.isArray(t)?t:[t],n){var a=this.indexOfArray(e,s,i),o=t.concat([]);o.unshift(a,0),Array.prototype.splice.apply(e,o)}else e=e.concat(t);return e},this.Modal=function(e){function t(e){var t=$.extend(!0,{},n,e),i=t.targetElement;if(delete t.targetElement,void 0===$(i).attr("disabled")){var a=new s.ui.controls.Modal(i,t);return a}}var i={},n={onInitialized:function(){this.show()}};return i={open:t,message:function(s){var i,n,a=s.type,o=s.modalClass,r=function(e){this.hide()};switch(a){case"error":n={modalTitle:s.modalTitle||"错误信息",buttons:'    <button type="button" class="btn btn-primary c-close">'+(s.buttons&&s.buttons.cancel||"关闭")+"</button>"};break;case"warn":n={modalTitle:s.modalTitle||"警告信息",buttons:'    <button type="button" class="btn btn-default cancel">'+(s.buttons&&s.buttons.cancel||"取消")+'</button>    <button type="button" class="btn btn-primary confirm">'+(s.buttons&&s.buttons.confirm||"确认")+"</button>",btnevent:{confirm:{selector:".confirm",eventName:"click",handler:s.ok||r},cancel:{selector:".cancel",eventName:"click",handler:s.cancel||r}}};break;case"success":n={modalTitle:s.modalTitle||"成功信息",buttons:'    <button type="button" class="btn btn-primary cancel">'+(s.buttons&&s.buttons.cancel||"关闭")+"</button>",btnevent:{cancel:{selector:".cancel",eventName:"click",handler:s.cancel||r}}};break;case"confirm":n={modalTitle:s.modalTitle||"确认信息",buttons:'    <button type="button" class="btn btn-default cancel">'+(s.buttons&&s.buttons.cancel||"取消")+'</button>    <button type="button" class="btn btn-primary confirm">'+(s.buttons&&s.buttons.confirm||"确认")+"</button>",btnevent:{confirm:{selector:".confirm",eventName:"click",handler:s.ok||r},cancel:{selector:".cancel",eventName:"click",handler:s.cancel||r}}};break;default:n={modalTitle:s.modalTitle||"提示信息",buttons:s.buttons||'    <button type="button" class="btn btn-primary c-close">关闭</button>'}}i={targetElement:s.targetElement,modalId:"#c-modal-messagebox-"+a,modalContainer:"#c-modal-messagebox",modalClass:o,content:'<div class="modal-content">    <div class="modal-header">    <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>        <h4 class="modal-title" id="demoModal3Label">'+n.modalTitle+'</h4>    </div>    <div class="modal-body">        <div class="c-msg-wrap c-msg-'+a+'">            <i class="icon"></i>            <div class="content">                <div class="c-msg-con">'+s.message+'                </div>            </div>         </div>    </div>    <div class="modal-footer">'+n.buttons+"    </div></div>",buttons:n.btnevent||{}},i.buttons.cClose={selector:".c-close",eventName:"click",handler:function(e){this.hide()}};var n=$.extend(!0,{},e,i);return t(n)}}},this.buildApi=function(e,t){function s(t){return function(){return e[t].apply(e,arguments)}}var i={};for(var n in t)i[n]=s(t[n]);return i},this.safeApply=function(e,t){e.$$phase||e.$root.$$phase?t():e.$apply(t)},this.replaceParseData=function(e){return this._replaceParseData(e),e},this.restoreParseData=function(e){return this._restoreParseData(e),e},this._replaceParseData=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)if("object"!=typeof e[t])e[t]=this.replaceStr(e[t]);else for(var s in e[t])"string"==typeof e[t][s]?e[t][s]=this.replaceStr(e[t][s]):this._replaceParseData(e[t][s])},this._restoreParseData=function(e){Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)if("object"!=typeof e[t])e[t]=this.restoreStr(e[t]);else for(var s in e[t])"string"==typeof e[t][s]?e[t][s]=this.restoreStr(e[t][s]):this._restoreParseData(e[t][s])},this.replaceStr=function(e){if("string"!=typeof e)return e;for(var t,s=[{key:"&",value:"&amp;"},{key:"'",value:"&quot;"},{key:'"',value:"&apos;"},{key:"<",value:"&lt;"},{key:">",value:"&gt;"}],i=e,n=0;n<s.length;n++)t=new RegExp(s[n].key,"g"),i=i.replace(t,s[n].value);return i},this.restoreStr=function(e){if("string"!=typeof e)return e;for(var t,s=[{key:"&",value:"&amp;"},{key:"'",value:"&quot;"},{key:'"',value:"&apos;"},{key:"<",value:"&lt;"},{key:">",value:"&gt;"}],i=e,n=0;n<s.length;n++)t=new RegExp(s[n].value,"g"),i=i.replace(t,s[n].key);return i}}),Jx()["package"]("s.ui",function(e){"use strict";this.BaseControl=new e.Class({initSettings:function(e){var t=this.parseAttributes();this.settings=$.extend(!0,{},this.defaults,t,e)},replaceParseData:function(e){return s.utilities.replaceParseData(e)},restoreParseData:function(e){return s.utilities.restoreParseData(e)},parseAttributes:function(){var e=this,t={};return $.each(this.attributeMap,function(s,i){var n="s-"+i;e.element.is("[data-"+n+"]")&&(t[s]=e.element.data(n))}),t},destroy:function(){}})});var mi18nData={"szsewebui.cascadeNames":"一级名称,二级名称,三级名称","szsewebui.cxpand":"展开","szsewebui.collapse":"收起","szsewebui.lastMonth":"上一月","szsewebui.nextMonth":"下一月","szsewebui.today":"今日","szsewebui.confirm":"确定","szsewebui.start":"开始","szsewebui.end":"结束","szsewebui.year":"年","szsewebui.month":"月","szsewebui.startDate":"开始日期","szsewebui.endDate":"结束日期","szsewebui.startTime":"开始时间:","szsewebui.endTime":"结束时间:","szsewebui.lastDay":"最近1日","szsewebui.lastYear":"最近1年","szsewebui.enter":"请输入","szsewebui.nextYear":"下一年","szsewebui.all":"全部","szsewebui.selectSecond":"请选择秒钟","szsewebui.selectHour":"请选择小时","szsewebui.selectMinute":"请选择分钟","szsewebui.noFind":"无法匹配到适合的选项！","szsewebui.queryStaff":"调出选人控件查询","szsewebui.pleaseSelect":"请选择","szsewebui.department":"部门","szsewebui.selectStaff":"选择人员","szsewebui.selectAll":"全选","szsewebui.inputKeyword":"请输入关键字","szsewebui.toBeSelected":"待选","szsewebui.add":"添加","szsewebui.remove":"移除","szsewebui.clear":"清除","szsewebui.selected":"已选","szsewebui.cancel":"取消","szsewebui.nextPage":"下一页","szsewebui.prevPage":"上一页","szsewebui.jumpTo":"跳转到：","szsewebui.to":"至"};window.Mi18n=window.Mi18n||function(){return{locale:function(e){return mi18nData[e]}}}(),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={data:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a href="#" role="option"></a></li>',minLength:0,scrollHeight:0,autoSelect:!0,afterSelect:$.noop,addItem:!1,delay:0,map:'{"text":"text","returnValue":"json"}',onSelected:void 0,matcher:void 0,sorter:void 0,template:void 0,nofound:"",nofoundWidth:150,highlighterCustom:void 0,showItemList:!0,maxItems:0},n={items:"items",minLength:"min-length",delay:"delay",map:"map",highlighterCustom:"highlighter-custom",showItemList:"show-item-list",maxItems:"max-items"};this.Typeahead=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.map=this.settings.map,this.timeId,"string"==typeof this.settings.map&&""!==this.settings.map&&(this.map=JSON.parse(this.settings.map)),this.matcher=this.settings.matcher||this.matcher,this.sorter=this.settings.sorter||this.sorter,this.template=this.settings.template||this.template,this.mouseover=this.settings.mouseover||this.mouseover,this.mouseout=this.settings.mouseout||this.mouseout,this.select=this.settings.select||this.select,this.autoSelect="boolean"!=typeof this.settings.autoSelect||this.settings.autoSelect,this.highlighter=this.settings.highlighter||this.highlighter,this.render=this.settings.render||this.render,this.updater=this.settings.updater||this.updater,this.displayText=this.settings.displayText||this.displayText,this.nofound=this.settings.nofound&&'<p style="padding:5px 5px;width:'+this.settings.nofoundWidth+'px;" >'+this.settings.nofound+"</p>",this.source=this.settings.source||this.settings.data,this.sourceMap={},this.delay=this.settings.delay,this.buildHtml(),this.initElements(),this.bindEvents()},buildHtml:function(){var e=this.element.data("plugin-id"),t='<div class="c-typeahead-container">   <span class="glyphicon glyphicon-menu-down"></span>   <ul id="c-typeahead-menu-'+e+'" class="typeahead dropdown-menu">   </ul></div>';this.container=$(t),this.element.before(this.container),this.container.prepend(this.element),this.element.is("input")&&this.element.attr("autocomplete","off")},initElements:function(){this.elements={view:this.element,menu:$(".dropdown-menu",this.container)};var e=this.elements.view.data("plugin-id");this.elements.view.attr("data-s-dropdown-id","#c-typeahead-menu-"+e),this.dropdown=new s.ui.controls.Dropdown(this.elements.view,{_pluginId:e})},bindEvents:function(){this.elements.view.on("click",$.proxy(this.focusClick,this)),this.elements.view.on("focus",$.proxy(this.focusClick,this)),this.elements.view.on("input",$.proxy(this.focusClick,this)),this.elements.menu.on("mouseover","li",$.proxy(this.proxyMouseover,this)),this.elements.menu.on("mouseout","li",$.proxy(this.proxyMouseout,this)),this.elements.menu.on("click","li",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)),this.elements.view.on("keyup",$.proxy(this.keyup,this)),this.elements.view.on("keydown",$.proxy(this.keydown,this)),"function"==typeof this.settings.onSelected&&this.elements.view.on("onSelected",$.proxy(this.settings.onSelected,this)),"function"==typeof this.settings.onChanged&&this.elements.view.on("onChanged",this.settings.onChanged),this.element.unbind("click.bs.dropdown")},proxyMouseover:function(e){var t=$(e.currentTarget);t.is("li")&&!t.hasClass("disabled")&&"function"==typeof this.settings.mouseover&&this.settings.mouseover.apply(this,[e,t.data("value")])},proxyMouseout:function(e){var t=$(e.currentTarget);t.is("li")&&!t.hasClass("disabled")&&"function"==typeof this.settings.mouseout&&this.settings.mouseout.apply(this,[e,t.data("value")])},focusClick:function(e){var t=this;this.elements.view.prop("disabled")||(""===$(e.target).val()&&this.settings.showItemList===!1?this.elements.menu.html(""):(t.timeId&&window.clearTimeout(t.timeId),t.timeId=window.setTimeout(function(){t.lookup(),t.setScrollTop()},100)))},setScrollTop:function(e){var t=this.elements.menu.find("strong").eq(0).parents("li");if(t.length>0){var s=t.position().top-this.elements.menu.find("li:first").position().top;this.elements.menu.scrollTop(s)}},setSource:function(e){if(this.source=e,this.sourceMap={},e)for(var t=0;t<e.length;t++){var s=e[t];this.sourceMap[this.displayText(s)]=s}this.elements.view.is(":focus")&&this.lookup()},setValue:function(e){"object"==typeof e&&(e=this.displayText(e)),this.elements.view.val(e)},matcher:function(e){var t=this.displayText(e);return t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,s=[],i=[],n=[];t=e.shift();){var a=this.displayText(t);a.toLowerCase().indexOf(this.query.toLowerCase())?a.indexOf(this.query)?i.push(t):n.push(t):s.push(t)}return s.concat(i,n)},template:function(e){return e},highlighter:function(e,t){var s=$("<div></div>"),i=this.query;if(null===i||"undefined"==typeof i)return s.text(e).html();var n,a,o,r,l,h=e.toLowerCase().indexOf(i.toLowerCase());if(n=i.length,0===n)return this.template(s.text(e).html(),t);for(;h>-1;)a=e.substr(0,h),o=e.substr(h,n),r=e.substr(h+n),l=this.settings.highlighterCustom?$(this.settings.highlighterCustom).text(o):$("<strong></strong>").text(o),s.append(document.createTextNode(a)).append(l),e=r,h=e.toLowerCase().indexOf(i.toLowerCase());return this.template(s.append(document.createTextNode(e)).html(),t)},displayText:function(e){if(this.map.hasOwnProperty("text")){var t=this.map.text;return e[t]||e}return e},move:function(e){if(this.isMenuOpen()){switch(e.keyCode){case 9:case 13:this.select(),this.dropdown.toggle(e);break;case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next()}e.stopPropagation()}},next:function(e){var t=this.elements.menu.find(".active").removeClass("active"),s=t.next();s.length||(s=$(this.elements.menu.find("li")[0])),s.addClass("active"),this.setScrollTop()},prev:function(e){var t=this.elements.menu.find(".active").removeClass("active"),s=t.prev();s.length||(s=this.elements.menu.find("li").last()),s.addClass("active"),this.setScrollTop()},keydown:function(e){switch(e.keyCode){case 38:if(e.shiftKey)return;e.preventDefault();break;case 40:if(e.shiftKey)return;e.preventDefault();break;case 13:e.preventDefault()}},keyup:function(e){var t=this,s=$.inArray(e.keyCode,[40,38,9,13,27]);s===-1&&t.elements.view.val().length>=t.settings.minLength?t.lookup():t.move(e)},select:function(){if(!this.elements.menu.find(".active").hasClass("disabled")){var e=this.elements.menu.find(".active").data("value");this.elements.view.data("active",e),this.elements.view.val(this.displayText(e)),this.elements.view.trigger("onSelected",[this.displayText(e),e])}},lookup:function(e){"undefined"!=typeof e&&null!==e?this.query=e:this.query=this.elements.view.val()||"";var t=$.proxy(function(){$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source&&this.process(this.source)},this);this.elements.view.trigger("onChanged",this.query),clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(t,this.delay)},process:function(e){var t=this;return e=$.grep(e,function(e){return t.matcher(e,t.query)>-1}),e=this.sorter(e),e&&0!==e.length?(this.isMenuOpen()||this.container.addClass("open"),e.length>0?this.elements.view.data("active",e[0]):this.elements.view.data("active",null),"all"===this.settings.items?this.render(e):this.render(e.slice(0,this.settings.items))):void(this.nofound?this.elements.menu.html(this.nofound):this.isMenuOpen()&&this.container.removeClass("open"))},render:function(e){var t=this,s=this,i=!1,n="<li><a></a></li>";if(this.elements.menu.html(""),e=$(e).map(function(e,a){var o=s.displayText(a);return e=$(n).data("value",a),a.unselectable&&e.addClass("disabled"),e.find("a").html(t.highlighter(o,a)),o===s.elements.view.val()&&(e.addClass("active"),s.elements.view.data("active",a),i=!0),s.elements.menu.append(e),e[0]}),this.autoSelect&&!i&&(e.first().addClass("active"),this.elements.view.data("active",e.first().data("value"))),this.settings.maxItems&&!this.heightSate&&e.length>0){var a=this.elements.menu.find("li").eq(0).height();a=a?a:30,this.elements.menu.css("maxHeight",this.settings.maxItems*a+10),this.heightSate=!0}return this.setScrollTop(),this},returnValue:function(e){if(this.map.hasOwnProperty("returnValue")){var t=this.map.returnValue;return"json"===t?e:e[t]||e}return e},getValue:function(e){var t=this.sourceMap[e];return"undefined"==typeof t?e:this.returnValue(t)},destroy:function(){this.elements.view.data("typeahead",null),this.elements.view.data("active",null),this.elements.menu.remove(),this.elements.view.off("focus").off("keyup"),"function"==typeof this.settings.onSelected&&this.elements.view.off("onSelected"),"function"==typeof this.settings.onChanged&&this.elements.view.off("onChanged")},click:function(e){this.select(),this.dropdown.toggle(e)},mouseenter:function(e){this.elements.menu.find(".active").removeClass("active"),$(e.currentTarget).addClass("active")},isMenuOpen:function(){return!!this.container.hasClass("open")},enable:function(){},disable:function(){},getApi:function(){var e=this,t={setSource:"setSource",getValue:"getValue"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="typeahead",i=s.ui.controls.Typeahead;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={minDate:"1900-01-01",maxDate:"2099-12-31",showWeekNumbers:!1,weekLabel:"W",format:"YYYY/MM/DD",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:0,showLunar:!1,disabledDates:[],onSelected:void 0,render:void 0},n={minDate:"min-date",maxDate:"max-date",showWeekNumbers:"show-week-numbers",weekLabel:"week-label",firstDay:"first-day",daysOfWeek:"days-of-week",format:"format",showLunar:"show-lunar"};this.Calendar=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.render=this.settings.render||this.render,this.currentCalendar={},this.buildHtml(),this.initElements(),this.bindEvents(),this.setDate())},buildHtml:function(){var e=(this.element.data("plugin-id"),'<div class="c-calendar-container"><div class="calendar-table"></div></div>');if(this.container=$(e),this.element.before(this.container),this.element.hide(),"string"==typeof this.settings.daysOfWeek&&(this.settings.daysOfWeek=JSON.parse(this.settings.daysOfWeek)),"object"==typeof this.settings.daysOfWeek&&(this.settings.daysOfWeek=this.settings.daysOfWeek.slice()),
"object"==typeof this.settings.monthNames&&(this.settings.monthNames=this.settings.monthNames.slice()),"string"==typeof this.settings.minDate&&(this.settings.minDate=moment(this.settings.minDate,this.settings.format)),"string"==typeof this.settings.maxDate&&(this.settings.maxDate=moment(this.settings.maxDate,this.settings.format)),"object"==typeof this.settings.minDate&&(this.settings.minDate=moment(this.settings.minDate)),"object"==typeof this.settings.maxDate&&(this.settings.maxDate=moment(this.settings.maxDate)),0!==this.settings.firstDay)for(var t=this.settings.firstDay;t>0;)this.settings.daysOfWeek.push(this.settings.daysOfWeek.shift()),t--},initElements:function(){this.elements={calendar:this.container,table:$(".calendar-table",this.container),td:$("td.available",this.container)}},transferAttributes:function(){this.element.prop("disabled")&&this.disable()},bindEvents:function(){this.container.find(".calendar-table").on("click","td",$.proxy(this.clickDate,this)),"function"==typeof this.settings.onSelected&&this.container.on("onSelected",this.settings.onSelected)},setMinDate:function(e){"string"==typeof e&&(this.settings.minDate=moment(e,this.settings.format)),"object"==typeof e&&(this.settings.minDate=moment(e))},setMaxDate:function(e){"string"==typeof e&&(this.settings.maxDate=moment(e,this.settings.format)),"object"==typeof e&&(this.settings.maxDate=moment(e))},renderCalendar:function(){var e=this.settings.disabledDates?Array.isArray(this.settings.disabledDates)?this.settings.disabledDates:[this.settings.disabledDates]:[],t=this.currentCalendar,s=t.month.month(),i=t.month.year(),n=0,a=0,o=0,r=moment([i,s]).daysInMonth(),l=moment([i,s,1]),h=moment([i,s,r]),c=moment(l).subtract(1,"month").month(),d=moment(l).subtract(1,"month").year(),u=moment([d,c]).daysInMonth(),p=l.day(),t=[];t.firstDay=l,t.lastDay=h;for(var m=0;m<6;m++)t[m]=[];var f=u-p+this.settings.firstDay+1;f>u&&(f-=7),p==this.settings.firstDay&&(f=u-6);for(var g,v,b=moment([d,c,f,12,a,o]),m=0,g=0,v=0;m<42;m++,g++,b=moment(b).add(24,"hour"))m>0&&g%7===0&&(g=0,v++),t[v][g]=b.clone().hour(n).minute(a).second(o),b.hour(12),this.settings.minDate&&t[v][g].format("YYYY-MM-DD")==this.settings.minDate.format("YYYY-MM-DD")&&t[v][g].isBefore(this.settings.minDate)&&(t[v][g]=this.settings.minDate.clone()),this.settings.maxDate&&t[v][g].format("YYYY-MM-DD")==this.settings.maxDate.format("YYYY-MM-DD")&&t[v][g].isAfter(this.settings.maxDate)&&(t[v][g]=this.settings.maxDate.clone());this.currentCalendar.calendar=t;var y=!1;this.settings.minDate&&(y=this.settings.minDate.clone());var k=!1;this.settings.maxDate&&(k=this.settings.maxDate.clone());var w=this.currentCalendar.month.clone(),x=(w.month(),w.year(),this.currentCalendar.selectedDate&&this.currentCalendar.selectedDate.clone()),C='<table class="table-condensed">';C+="<thead>",C+="<tr>",this.settings.showWeekNumbers&&(C+='<th class="week">'+this.settings.weekLabel+"</th>");var _=this;$.each(this.settings.daysOfWeek,function(e,t){C+=e===(7-_.settings.firstDay)%7||e===(6-_.settings.firstDay)%7?'<th class="weekend">'+t+"</th>":"<th>"+t+"</th>"}),C+="</tr>",C+="</thead>",C+="<tbody>";for(var v=0;v<6;v++){C+="<tr>",this.settings.showWeekNumbers&&(C+='<td class="week"><div class="tdcontainer">'+t[v][0].week()+"</div></td>");for(var g=0;g<7;g++){var D=[];t[v][g].isSame(x,"day")&&D.push("selected"),t[v][g].isSame(new Date,"day")&&D.push("today");for(var S=0;S<e.length;S++)t[v][g].isSame(moment(e[S],"YYYY-MM-DD"),"day")&&D.push("disable");t[v][g].isoWeekday()>5&&D.push("weekend"),t[v][g].month()!=t[1][1].month()&&D.push("off"),this.settings.minDate&&t[v][g].isBefore(this.settings.minDate,"day")&&D.push("off","disabled"),k&&t[v][g].isAfter(k,"day")&&D.push("off","disabled");var I=this.render(new Date(t[v][g])),N="",M=!1,T=new RegExp("disable").test(I);T&&D.push("disable");for(var m=0;m<D.length;m++)N+=D[m]+" ","disabled"==D[m]&&(M=!0);M||(N+="available"),C+='<td class="'+N.replace(/^\s+|\s+$/g,"")+'" data-title="r'+v+"c"+g+'" ><div class="tdcontainer">'+I+"</div></td>"}C+="</tr>"}C+="</tbody>",C+="</table>",this.elements.table.html(C)},prev:function(){this.currentCalendar.month.subtract(1,"month"),this.renderCalendar()},next:function(){this.currentCalendar.month.add(1,"month"),this.renderCalendar()},clickDate:function(e){var t=$(e.target);if(t.is("td")||(t=t.parents("td")),!t.hasClass("disable")&&t.hasClass("available")){var s=t.attr("data-title"),i=s.substr(1,1),n=s.substr(3,1),a=this.currentCalendar.calendar[i][n];this.currentCalendar.month=a.clone(),this.currentCalendar.selectedDate=a.clone(),this.renderCalendar(),this.container.trigger("onSelected",a.format(this.settings.format)),this.settings.clickcallback&&this.settings.clickcallback()}},setDate:function(e){var t;e?"string"==typeof e?t=moment(e,this.settings.format):"object"==typeof e&&(t=moment(e)):t=moment(),this.settings.minDate&&t.isBefore(this.settings.minDate)&&(t=this.settings.minDate.clone()),this.settings.maxDate&&t.isAfter(this.settings.maxDate)&&(t=this.settings.maxDate.clone()),this.currentCalendar.month=t.clone(),this.currentCalendar.selectedDate=moment(e,this.settings.format),this.renderCalendar()},setYear:function(e){this.currentCalendar.month.year(e),this.renderCalendar()},setMonth:function(e){this.currentCalendar.month.month(e),this.renderCalendar()},getDate:function(e){var e=this.currentCalendar.month.clone();return e=e.format(this.settings.format)},getYear:function(){return this.currentCalendar.month.year()},getMonth:function(){return this.currentCalendar.month.month()+1},render:function(e){return this.settings.showLunar?this.lunarRender(e):e.getDate()},lunarRender:function(e){var t=$(this).Calendar("FullCalendar",e),s=""!==t.solarFestival?t.solarFestival:""!==t.lunarFestival?t.lunarFestival:""!==t.solarTerm?t.solarTerm:t.lDayLabel;return"<span class='day-number'>"+e.getDate()+"</span><span class='day-almanac'>"+s+"</span>"},getShowDate:function(){if(this.currentCalendar.calendar){var e=this.currentCalendar.calendar[0][0],t=this.currentCalendar.calendar[5][6];return e=e.format(this.settings.format),t=t.format(this.settings.format),[e,t]}return null},refresh:function(){},destroy:function(){},getApi:function(){var e=this,t={prev:"prev",next:"next",setDate:"setDate",setYear:"setYear",setMonth:"setMonth",getDate:"getDate",getYear:"getYear",getMonth:"getMonth",enable:"enable",disable:"disable",getShowDate:"getShowDate"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="calendar",i=s.ui.controls.Calendar;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),function(e){var t=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448),s=new Array(31,28,31,30,31,30,31,31,30,31,30,31),i=(new Array("鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"),new Array("小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至")),n=new Array(0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758),a=new Array("日","一","二","三","四","五","六","七","八","九","十"),o=new Array("初","十","廿","卅"),r=new Array("0101 元旦","0214 情人节","0308 妇女节","0312 植树节","0315 三一五","0401 愚人节","0501 劳动节","0504 青年节","0512 护士节","0601 儿童节","0701 建党节","0801 建军节","0910 教师节","1001 国庆节","1006 老人节","1224 平安夜","1225 圣诞节"),l=new Array("0101 春节","0115 元宵节","0505 端午节","0707 七夕","0715 中元节","0815 中秋节","0909 重阳节","1208 腊八节","1224 小年"),h={lYearDays:function(s){var i,n=348;for(i=32768;i>8;i>>=1)n+=t[s-1900]&i?1:0;return n+e(this).Calendar("leapDays",s)},leapDays:function(s){return e(this).Calendar("leapMonth",s)?65536&t[s-1900]?30:29:0},leapMonth:function(e){return 15&t[e-1900]},monthDays:function(e,s){return t[e-1900]&65536>>s?30:29},cDay:function(e){var t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=o[Math.floor(e/10)],t+=a[e%10]}return t},solarDays:function(e,t){return 1===t?e%4===0&&e%100!==0||e%400===0?29:28:s[t]},sTerm:function(e,t){var s=new Date(31556925974.7*(e-1900)+6e4*n[t]+Date.UTC(1900,0,6,2,5));return s.getUTCDate()},Dianaday:function(t){t=new Date(t.getFullYear(),t.getMonth(),t.getDate());var s,i={},n=0,a=0,o=new Date(1900,0,31),r=(t-o)/864e5;for(i.dayCyl=r+40,i.monCyl=14,s=1900;s<2050&&r>0;s++)a=e(this).Calendar("lYearDays",s),r-=a,i.monCyl+=12;for(r<0&&(r+=a,s--,i.monCyl-=12),i.year=s,i.yearCyl=s-1864,n=e(this).Calendar("leapMonth",s),i.isLeap=!1,s=1;s<13&&r>0;s++)n>0&&s===n+1&&i.isLeap===!1?(--s,i.isLeap=!0,a=e(this).Calendar("leapDays",i.year)):a=e(this).Calendar("monthDays",i.year,s),i.isLeap===!0&&s===n+1&&(i.isLeap=!1),r-=a,i.isLeap===!1&&i.monCyl++;return 0===r&&n>0&&s===n+1&&(i.isLeap?i.isLeap=!1:(i.isLeap=!0,--s,--i.monCyl)),r<0&&(r+=a,--s,--i.monCyl),i.month=s,i.day=r+1,o=null,r=null,i},FullCalendar:function(t){var s={},n=e(this).Calendar("Dianaday",t);if(s.origin=new Date(t.valueOf()),s.sYear=t.getFullYear(),s.sMonth=t.getMonth()+1,s.sDay=t.getDate(),s.week=a[t.getDay()],s.lYear=n.year,s.lMonth=n.month,s.lDay=n.day,s.isLeap=n.isLeap,1==s.lDay){var o=(s.lMonth>10?"十":"")+a[(s.lMonth-1)%10+1];s.lDayLabel=(s.isLeap?"闰":"")+o+"月",o=null}else s.lDayLabel=e(this).Calendar("cDay",s.lDay);s.lunarFestival="",s.solarFestival="";for(var h=0;h<l.length;h++)parseInt(l[h].substr(0,2),10)==s.lMonth&&parseInt(l[h].substr(2,4),10)==s.lDay&&(s.lunarFestival=l[h].substr(5));if(12==s.lMonth&&s.lDay>=29){var c=e(this).Calendar("Dianaday",new Date(t.getFullYear(),t.getMonth(),t.getDate()+1));1==c.month&&1==c.day&&(s.lunarFestival="除夕"),c=null}for(var h=0;h<r.length;h++)parseInt(r[h].substr(0,2),10)==s.sMonth&&parseInt(r[h].substr(2,4),10)==s.sDay&&(s.solarFestival=r[h].substr(5));5==s.sMonth&&"日"==s.week&&s.sDay>=8&&s.sDay<=14&&(s.solarFestival="母亲节"),6==s.sMonth&&"日"==s.week&&s.sDay>=15&&s.sDay<=21&&(s.solarFestival="父亲节"),s.solarTerm="";var d=new Date(s.sYear,s.sMonth,1).getDay();return tmp1=e(this).Calendar("sTerm",s.sYear,2*s.sMonth-2),tmp2=e(this).Calendar("sTerm",s.sYear,2*s.sMonth-1),s.sDay==tmp1&&(s.solarTerm=i[2*s.sMonth-2]),s.sDay==tmp2&&(s.solarTerm=i[2*s.sMonth-1]),d=null,n=null,s}};e.fn.Calendar=function(t){return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method with name "+t+" does not exists for jQuery.Calendar"):h.init.apply(this,arguments)}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={cascadeNames:"一级名称,二级名称,三级名称",dataUrl:"",map:{text:"name",returnValue:"id"},onChanged:void 0},n={cascadeNames:"cascade-names",dataUrl:"data-url",map:"map"},a=new e.Class({init:function(e,t,s){this.inputElements=e,this.settings=t,this.cascades=this.settings.cascadeNames.split(","),this.data=s,this.buildHtml(),this.initElements(),this.bindEvents(),this.bindEventsInterface(),this.refresh()},buildHtml:function(){for(var e="",t="",s=0;s<this.cascades.length;s++){var i=this.cascades[s];e+='<li data-s-cascade="'+s+'" class="c-cascade-tab-'+s+'"><a href="#">'+i+'<span class="caret"></span></a></li>',t+='<div class="c-cascade-'+s+' c-cascade-content"></div>'}var n='<div class="c-cascade-menu dropdown-menu">    <div class="c-cascade-path">        <ul class="c-cascade-tabs">'+e+"        </ul>    </div>"+t+'    <span class="c-cascade-close glyphicon glyphicon-remove"></span></div>';this.container=$(n),this.container.insertAfter(this.inputElements.clear)},initElements:function(){var e=this;this.elements={tabs:$(".c-cascade-tabs li",this.container),contents:$(".c-cascade-content",this.container),close:$(".c-cascade-close",this.container),getTab:function(t){var s=".c-cascade-tab-"+t;return $(s,e.container)},getContent:function(t){var s=".c-cascade-"+t;return $(s,e.container)},getNodes:function(t){var s=".c-cascade-"+t+" li";return $(s,e.container)}}},grep:function(e,t){for(var s=0;s<e.length;s++)if(t===e[s].id){var i=e[s];return i}},_buildNodes:function(e,t){for(var s='<ul class="c-cascade-nodes">',i=0;i<e.length;i++){var n=e[i],a=n.childs?n.childs.length:n.childs;s+='<li data-s-id="'+n.id+'" data-s-child="'+a+'">'+n.name+"</li>"}s+="</ul>",this.elements.getContent(t).empty().append(s)},bindEvents:function(){var e=this,t=this.elements;this.inputElements.view.on("click",$.proxy(this.show,this)),this.inputElements.view.on("blur",$.proxy(this.blur,this)),this.container.on("mouseenter",$.proxy(this.mouseenter,this)).on("mouseleave",$.proxy(this.mouseleave,this)),t.tabs.on("click",function(t){var s=$(this).data("s-cascade");e.activeCascadeIndex=parseInt(s),e._activeTab(),t.preventDefault()});for(var s=this.getPath(),i=0;i<=s.length;i++)this._bindEventsNodes(i);t.close.on("click",function(t){e.hide()})},_bindEventsNodes:function(e){var t=this,s=this.elements.getNodes(e);s.on("click",function(e){var s=$(this).data("s-id"),i=$(this).data("s-child");t.change(s,t.activeCascadeIndex),t.refresh($(this));var n=t.getPath();if(n.length<t.cascades.length){for(var a=n.length;a<t.cascades.length;a++)t._setTab(a,t.cascades[a]);for(var o=n.length+1;o<t.cascades.length;o++)t.elements.getContent(o).empty();"false"!==i&&i||t.hide()}else t.hide()})},bindEventsInterface:function(){},refresh:function(e){var t=this.getPath();this._refreshInputView(t),this._refreshTabs(t),this._refreshTabContents(t),e&&!$(e).data("s-child")||(this.activeCascadeIndex=this.getLastestTabIndex(t)),this._activeTab()},_refreshTabs:function(e){for(var t,s=this.data,i=0;i<e.length;i++){var n=e[i];if(t=this.grep(s,n),!t)break;s=t.childs,this._setTab(i,t.name)}},_setTab:function(e,t){var s=this.elements.getTab(e);s.html('<a href="#">'+t+'<span class="caret"></span>')},_activeTab:function(){this.elements.tabs.removeClass("active"),this.elements.getTab(this.activeCascadeIndex).addClass("active"),this.elements.contents.hide(),this.elements.getContent(this.activeCascadeIndex).show()},_refreshTabContents:function(e){for(var t,s=this.data,i=this.getLastestTabIndex(e),n=0;n<i+1;n++){this._buildNodes(s,n),this._bindEventsNodes(n);var a=e[n];if(!a)break;if(t=this.grep(s,a),!t)break;s=t.childs}},_refreshInputView:function(e){for(var t,s=[],i=this.data,n=this.settings.map.text,a=0;a<e.length;a++){var o=e[a];if(t=this.grep(i,o),!t)break;i=t.childs,s.push(t[n])}var r=s.join(" / ");this.inputElements.view.val(r),r?this.inputElements.clear.show():this.inputElements.clear.hide()},getPath:function(){var e=this.inputElements.orginal.val(),t=""===e?[]:e.split(",");return t},getLastestTabIndex:function(e){var t=e.length===this.cascades.length?e.length-1:e.length;return t},change:function(e,t){for(var s=this.getPath();s.length>t;)s.pop();s.push(e),this.inputElements.orginal.val(s.join(",")),this.inputElements.orginal.trigger("onChanged",s.join(","))},blur:function(e){var t=this;this.mousedover||setTimeout(function(){t.hide()},200)},mouseenter:function(e){this.mousedover=!0},mouseleave:function(e){this.mousedover=!1},show:function(){var e=$.extend({},this.inputElements.view.position(),{height:this.inputElements.view[0].offsetHeight});this.container.css({top:e.top+e.height,left:e.left}).show()},hide:function(){this.container.hide()},destroy:function(){this.inputElements.view.off("click"),this.inputElements.view.off("blur"),this.container.off("mouseenter"),this.container.off("mouseleave"),this.container.remove()},clear:function(){var e=this.elements.tabs;this.inputElements.view.val(""),this.inputElements.clear.hide(),this.inputElements.orginal.val(""),this.inputElements.orginal.trigger("onChanged","");for(var t=0;t<this.cascades.length;t++){var s=this.cascades[t];$(e[t]).children("a").html(s)}$(e[0]).trigger("click")}});this.Cascade=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){if(t+=1,this.element=$(e),this.container,this.elements,this.value=this.element.val(),!this.element.data("initialized")){this.element.data("initialized",!0),this.element.data("plugin-id",t),this.initSettings(s),this.map=this.settings.map,"string"==typeof this.settings.map&&""!==this.settings.map&&(this.map=JSON.parse(this.settings.map)),this.buildHtml(),this.initElements(),this.transferAttributes();var i=this;this.d=$.Deferred(),$.when(this.getData(this.d)).done(function(){i.getDataMap(i.data),i.render()}),this.bindEvents(),this.bindEventsInterface()}},buildHtml:function(){var e='<div class="c-cascade-container">    <input type="text" autocomplete="off"  unselectable="on"/>    <span class="c-cascade-clear">&times;</span></div>';this.container=$(e),this.element.before(this.container)},getData:function(e){if(this.settings.data)return this.data=$.extend(!0,[],this.settings.data),delete this.settings.data,e.resolve(),e.promise();var t=this;return $.ajax({dataType:"json",url:this.settings.dataUrl,data:{},success:function(s){t.data=s,e.resolve()},error:function(t,s,i){e.reject()}}),e.promise()},updateDate:function(e){e&&(this.menu&&this.menu.destroy(),this.data=e,this.getDataMap(this.data),this.menu=new a(this.elements,this.settings,this.data))},render:function(){this.menu=new a(this.elements,this.settings,this.data)},refresh:function(){var e=this;$.when(this.d.promise()).done(function(){e.menu&&e.menu.refresh()}).fail(function(){e.menu&&e.menu.refresh()})},initElements:function(){this.elements={orginal:this.element,view:$("input[type=text]",this.container),clear:$(".c-cascade-clear",this.container)},this.elements.orginal.hide(),this.elements.view.prop("readonly","readonly")},bindEvents:function(){var e=this,t=e.elements;t.clear.on("click",function(t){e.element.prop("disabled")||e.menu.clear()}),"function"==typeof this.settings.onChanged&&t.orginal.on("onChanged",this.settings.onChanged)},bindEventsInterface:function(){},transferAttributes:function(){this.elements.view.attr("required",this.element.attr("required")),this.elements.view.attr("rel",this.element.attr("rel")),this.elements.view.attr("title",this.element.attr("title")),this.elements.view.attr("class",this.element.attr("class")),this.elements.view.attr("tabindex",this.element.attr("tabindex")),this.elements.orginal.removeAttr("tabindex"),this.element.prop("disabled")&&this.disable()},disable:function(){this.element.prop("disabled",!0),this.elements.view.prop("disabled",!0)},enable:function(){this.element.prop("disabled",!1),this.elements.view.prop("disabled",!1)},getNode:function(e){var t=$.extend(!0,{},e);delete t.childs,this.sourceMap[e.id]=t},getNodes:function(e){if(e&&0!==e.length)for(var t=0;t<e.length;t++)this.getNode(e[t]),this.getNodes(e[t].childs)},getDataMap:function(e){this.sourceMap={};var t=[{childs:e}];this.getNodes(t)},getValue:function(){var e=this.elements.orginal.val();if(""===e)return e;var t=this.map.returnValue;if("id"===t)return e;if("json"===t){for(var s=this.sourceMap,i=e.split(","),n=[],a=0;a<i.length;a++)n.push(s[i[a]]);return n}},setValue:function(e){if("undefined"==typeof e||null===e||""===e)return this.elements.orginal.val(""),this.refresh(),"";var t=[];if("object"==typeof e)for(var s=0;s<e.length;s++)t.push(e[s].id);else for(var i=e.split(","),s=0;s<i.length;s++)t.push(i[s]);return t=t.join(","),this.elements.orginal.val(t),this.refresh(),t}})}),function(e){"use strict";var t="cascade",i=s.ui.controls.Cascade;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";function t(e){var t,s=e.attr("data-s-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return $(s)}var i=0,n={toggle:!0},a={},o=350;this.Collapse=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,settings:{},value:"",data:{},templates:{},init:function(e,t){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),i+=1,this.element.data("plugin-id",i),this.initSettings(t),this.isTrigger=this.element.hasClass("c-collapse-trigger"),this.initElements(),this.bindEvents())},initElements:function(){if(this.isTrigger){t(this.element)}else this.container=this.element,this.elements={triggers:$(".c-collapse-trigger",this.container),targets:$(".collapse",this.container)}},bindEvents:function(){this.isTrigger?this.element.on("click",$.proxy(this.onToggle,this)):this.elements.triggers.on("click",$.proxy(this.onToggle,this))},bindEventsInterface:function(){this.element},render:function(){},dimension:function(e){var t=e.hasClass("width");return t?"width":"height"},show:function(e){if(!this.transitioning&&!e.hasClass("in")){var t=$.Event("show.bs.collapse");if(e.trigger(t),!t.isDefaultPrevented()){if(!this.isTrigger){var s=this;this.elements.targets.each(function(){s.hide($(this))})}var i=this.dimension(e);e.removeClass("collapse").addClass("collapsing")[i](0),this.element.removeClass("collapsed"),this.transitioning=1;var n=function(){e.removeClass("collapsing").addClass("collapse in")[i](""),e.parents(".panel").addClass("open"),this.transitioning=0,e.trigger("shown.bs.collapse")};if(!$.support.transition)return n.call(this);var a=$.camelCase(["scroll",i].join("-"));e.one("bsTransitionEnd",$.proxy(n,this)).emulateTransitionEnd(o)[i](e[0][a])}}},hide:function(e){if(!this.transitioning&&e.hasClass("in")){var t=$.Event("hide.bs.collapse");if(e.trigger(t),!t.isDefaultPrevented()){var s=this.dimension(e);e[s](e[s]())[0].offsetHeight,e.addClass("collapsing").removeClass("collapse in"),e.parents(".panel").removeClass("open"),this.element.addClass("collapsed"),this.transitioning=1;var i=function(){this.transitioning=0,e.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return $.support.transition?void e[s](0).one("bsTransitionEnd",$.proxy(i,this)).emulateTransitionEnd(o):i.call(this)}}},onToggle:function(e){e.preventDefault();var s=$(e.target).hasClass("c-collapse-trigger")?$(e.target):$(e.target).parents(".c-collapse-trigger"),i=t(s);this.isTrigger?this.toggle(i):this.show(i)},toggle:function(e){var t=e.hasClass("in")?"hide":"show";this[t](e)},getParent:function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(e,s){var i=$(s);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},addAriaAndCollapsedClass:function(e,t){var s=e.hasClass("in");t.toggleClass("collapsed",!s)},refresh:function(){},enable:function(){},disable:function(){},destroy:function(){}})}),function(e){"use strict";var t="collapse",i=s.ui.controls.Collapse;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={},n={nofound:"nofound"};this.Combobox=new e.Class({extend:s.ui.controls.Typeahead},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.map=this.settings.map,this.matchAll=!1,"string"==typeof this.settings.map&&""!==this.settings.map&&(this.map=JSON.parse(this.settings.map)),this.matcher=this.settings.matcher||this.matcher,this.sorter=this.settings.sorter||this.sorter,this.template=this.settings.template||this.template,this.mouseover=this.settings.mouseover||this.mouseover,this.mouseout=this.settings.mouseout||this.mouseout,this.select=this.settings.select||this.select,this.autoSelect="boolean"!=typeof this.settings.autoSelect||this.settings.autoSelect,this.highlighter=this.settings.highlighter||this.highlighter,this.render=this.settings.render||this.render,this.updater=this.settings.updater||this.updater,this.displayText=this.settings.displayText||this.displayText,this.nofound=this.settings.nofound&&'<p class="nofound">'+this.settings.nofound+"</p>",this.source=this.settings.source||this.settings.data,this.clear=this.settings.clear||function(){},this.sourceMap={},this.delay=this.settings.delay,this.buildHtml(),this.initElements(),this.bindEvents()},initElements:function(){this.elements={view:this.element,menu:$(".dropdown-menu",this.container),menuDwon:$(".glyphicon-menu-down",this.container),menuRemove:$(".glyphicon-remove",this.container)};var e=this.elements.view.data("plugin-id");this.elements.view.attr("data-s-dropdown-id","#c-combobox-menu-"+e),this.dropdown=new s.ui.controls.Dropdown(this.elements.view,{_pluginId:e})},buildHtml:function(){var e=this.element.data("plugin-id"),t='<div class="c-typeahead-container c-combobox-container">   <span class="glyphicon glyphicon-remove hidden"></span>   <span class="glyphicon glyphicon-menu-down "></span>   <ul id="c-combobox-menu-'+e+'" class="typeahead dropdown-menu combobox">   </ul></div>';this.container=$(t),this.element.before(this.container),this.container.prepend(this.element),this.element.is("input")&&this.element.attr("autocomplete","off")},bindEvents:function(){this.elements.view.on("click",$.proxy(this.focusClick,this)),this.elements.view.on("focus",$.proxy(this.focusClick,this)),this.elements.view.on("blur",$.proxy(this.blur,this)),this.elements.menuDwon.on("click",$.proxy(this.focusClick,this)),this.elements.menuRemove.on("click",$.proxy(this.textRomove,this)),this.elements.menu.on("mouseover","li",$.proxy(this.proxyMouseover,this)),this.elements.menu.on("mouseout","li",$.proxy(this.proxyMouseout,this)),this.elements.menu.on("click","li",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)),this.elements.view.on("keyup",$.proxy(this.keyup,this)),this.elements.view.on("keydown",$.proxy(this.keydown,this)),"function"==typeof this.settings.onSelected&&this.elements.view.on("onSelected",$.proxy(this.settings.onSelected,this)),"function"==typeof this.settings.onChanged&&this.elements.view.on("onChanged",this.settings.onChanged),this.element.unbind("click.bs.dropdown")},matcher:function(e){var t=this.displayText(e);return t===this.query&&(this.matchAll=!0),t.toLowerCase().indexOf(this.query.toLowerCase())},lookup:function(e){"undefined"!=typeof e&&null!==e?this.query=e:this.query=this.elements.view.val()||"";var t=$.proxy(function(){$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source&&this.process(this.source)},this);this.elements.view.trigger("onChanged",this.query),clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(t,this.delay),this.query.length>0?this.elements.menuRemove.removeClass("hidden"):this.elements.menuRemove.addClass("hidden")},process:function(e){var t=this,s=e;return e=$.grep(e,function(e){return t.matcher(e,t.query)>-1}),this.matchAll&&(e=[].concat(s)),this.matchAll=!1,e=this.sorter(e),e&&0!==e.length?(this.isMenuOpen()||this.container.addClass("open"),t.nofoundType=!1,e.length>0?this.elements.view.data("active",e[0]):this.elements.view.data("active",null),"all"===this.settings.items?this.render(e):this.render(e.slice(0,this.settings.items))):void(this.nofound?(this.elements.menu.html(this.nofound),this.isMenuOpen()||this.container.addClass("open"),t.nofoundType=!0):this.isMenuOpen()&&this.container.removeClass("open"))},blur:function(){var e=this;this.nofoundType===!0&&(e.clear(),e.elements.menuRemove.addClass("hidden"))},textRomove:function(e){this.clear(),this.elements.menuRemove.addClass("hidden"),this.elements.view.focus()},select:function(){if(!this.elements.menu.find(".active").hasClass("disabled")){var e=this.elements.menu.find(".active").data("value");this.elements.view.data("active",e),this.elements.view.val(this.displayText(e)),this.matchAll=!0,this.nofoundType=!1,this.elements.menuRemove.removeClass("hidden"),this.elements.view.trigger("onSelected",[this.displayText(e),e])}},getApi:function(){var e=this,t={setSource:"setSource",getValue:"getValue"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="combobox",i=s.ui.controls.Combobox;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={minHeight:100,collapsed:!0},n={minHeight:"min-height",collapsed:"collapsed"};this.Cutpannel=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){if(this.element=$(e),this.container=this.element,!this.element.data("initialized")){this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.initElements(),this.bindEvents();this.settings.minHeight;this.reflash()}},initElements:function(){this.elements={original:this.element,content:$(".c-cutpannel-content",this.container),button:$(".c-cutpannel-button",this.container)}},bindEvents:function(){this.elements.button.on("click",$.proxy(this.toggle,this)),this.elements.content.bind("DOMNodeInserted",$.proxy(this.reflash,this))},reflash:function(){parseInt(this.elements.content.css("height"))>=this.settings.minHeight?(this.elements.button.show(),this.settings.collapsed===!0?(this.elements.button.find(".text").text("展开"),this.elements.content.css("height",this.settings.minHeight+"px"),this.elements.button.find(".glyphicon").removeClass("glyphicon-menu-up")):(this.elements.button.find(".text").text("收起"),this.elements.content.css("height","auto"),this.elements.button.find(".glyphicon").addClass("glyphicon-menu-up"))):this.elements.button.hide()},toggle:function(){this.settings.collapsed=!this.settings.collapsed,this.reflash()}})}),function(e){"use strict";var t="cutpannel",i=s.ui.controls.Cutpannel;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t="上一月",i="下一月",n="月",a="年",o="确定",r="今天",l=function(){},h=0,c={enlangflag:!1,minDate:"1900-01-01",maxDate:"2099-12-31",timePicker:!1,defaultTime:null,timePickerIncrement:5,showWeekNumbers:!1,weekLabel:"W",format:"YYYY-MM-DD",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:0,position:"auto",down:"dropdown",up:"dropup",scroller:!1,dateFrom:void 0,change:l,render:void 0,intervalYear:20,calendarMode:!1,ngMinDate:void 0,ngMaxDate:void 0,timeShowPanel:!0},d={enlangflag:"enlangflag",scroller:"scroller",minDate:"min-date",maxDate:"max-date",firstDay:"first-day",timePicker:"time-picker",defaultTime:"default-time",timePickerIncrement:"time-picker-increment",showWeekNumbers:"show-week-numbers",weekLabel:"week-label",daysOfWeek:"days-of-week",format:"format",position:"position",timeShowPanel:"time-show-panel"};this.Datepicker=new e.Class({extend:s.ui.BaseControl},{defaults:c,attributeMap:d,init:function(e,s){this.element=$(e),this.initSettings(s),this.settings.enlangflag&&(t="Prev month",i="Next month",n="",a="",o="GO",r="Today"),this.settings.maxDate=this.settings.ngMaxDate||this.settings.maxDate,this.settings.minDate=this.settings.ngMinDate||this.settings.minDate,h+=1,this.currentCalendar={},"string"==typeof this.settings.daysOfWeek&&(this.settings.daysOfWeek=JSON.parse(this.settings.daysOfWeek)),"object"==typeof this.settings.daysOfWeek&&(this.settings.daysOfWeek=this.settings.daysOfWeek.slice()),
"object"==typeof this.settings.monthNames&&(this.settings.monthNames=this.settings.monthNames.slice()),"string"==typeof this.settings.minDate&&(this.settings.minDate=moment(this.settings.minDate,this.settings.format)),this.settings.minDate&&(this.settings.minYear=moment(this.settings.minDate).year()),this.settings.maxDate&&(this.settings.maxYear=moment(this.settings.maxDate).year()),"string"==typeof this.settings.maxDate&&(this.settings.maxDate=moment(this.settings.maxDate,this.settings.format)),"object"==typeof this.settings.minDate&&(this.settings.minDate=moment(this.settings.minDate)),"object"==typeof this.settings.maxDate&&(this.settings.maxDate=moment(this.settings.maxDate)),this.element.data("plugin-id",h),this.buildHtml(),this.initElements(),this.transferAttributes(),this.bindEvents(),this.setDate(new Date)},buildHtml:function(){var e=this.element.data("plugin-id"),s='<div class="c-datepicker-container" style="display: none">   <span class="glyphicon-calendar" data-s-dropdown-id="#c-datepicker-menu-'+e+'"></span>   <ul id="c-datepicker-menu-'+e+'" class="datepicker dropdown-menu">        <div class="calendar-control">           <div class="icon-prev" title="'+t+'">               <i class="glyphicon glyphicon-menu-left"></i>           </div>           <div class="calendar-year">               <a class="btn-container"><span>2000'+a+'</span><i class="glyphicon glyphicon-menu-down"></i></a>               <div class="dropdown-menu calendar-years">               </div>           </div>           <div class="calendar-month">               <a class="btn-container"><span>1'+n+'</span><i class="glyphicon glyphicon-menu-down"></i></a>               <div class="dropdown-menu calendar-months">               </div>           </div>           <div class="icon-next" title="'+i+'">               <i class="glyphicon glyphicon-menu-right"></i>           </div>       </div>       <div class="calendar-table">           <input class="datepicker"/>       </div>       <div class="calendar-bottom">           <button class="today" value="'+r+'" type="button">'+r+'</button>            <input type="text" class="timepicker t1 form-control"/>           <button class="btn btn-primary confirm" value="'+o+'" type="button">'+o+"</button>       </div>   </ul></div>";this.container=$(s),this.element.before(this.container),this.container.prepend(this.element),this.element.attr("data-s-dropdown-id","#c-datepicker-menu-"+e),this.element.is("input")&&this.element.attr("autocomplete","off")},initElements:function(){this.elements={view:this.element,datepicker:this.container,menu:$(".dropdown-menu",this.container),icon:$(".glyphicon-calendar",this.container),prev:$(".calendar-control .icon-prev",this.container),next:$(".calendar-control .icon-next",this.container),calendarYear:$(".calendar-year",this.container),showYear:$(".calendar-year .btn-container span",this.container),showYearBtn:$(".calendar-year .btn-container",this.container),calendarYears:$(".calendar-year .calendar-years",this.container),calendarMonth:$(".calendar-month",this.container),showMonth:$(".calendar-month .btn-container span",this.container),showMonthBtn:$(".calendar-month .btn-container",this.container),calendarMonths:$(".calendar-month .calendar-months",this.container),table:$(".calendar-table",this.container),td:$("td.available",this.container),timepickerInput1:$("input.timepicker.t1",this.container),calendarBottom:$(".calendar-bottom",this.container),today:$(".calendar-bottom .today",this.container),confirm:$(".calendar-bottom .confirm",this.container)},"auto"===this.settings.position?this.position=this.getPosition():this.position=this.settings.position,this.autoUpPosition(),this.autoRightPosition();var e,t=this.elements.view.data("plugin-id");if(this.settings.dateFrom&&!this.settings.render){var i=new Date(this.settings.dateFrom).getTime();e=function(e){var t,s=e.getTime();return t=s<=i?"<div class='disable'>"+e.getDate()+"</div>":e.getDate()}}var n=$.extend(!0,{render:e},this.settings);if(this.calendar=new s.ui.controls.Calendar(this.container.find("input.datepicker"),n),this.settings.timePicker){this.elements.calendarBottom.addClass("c-time");var a=this.settings.format.split(" "),o={timePickerIncrement:this.settings.timePickerIncrement,defaultTime:this.settings.defaultTime,timeShowPanel:this.settings.timeShowPanel};a.length>=1&&(o.format=a[1],"HH:mm:ss.SSS"!=o.format&&"HH:mm:ss"!=o.format||this.elements.calendarBottom.addClass("reflow")),this.timePicker=new s.ui.controls.Timepicker(this.elements.timepickerInput1,o)}this.settings.calendarMode?(this.elements.view.hide(),this.elements.icon.hide().removeAttr("data-s-dropdown-id"),this.elements.datepicker.addClass("open"),this.renderCalendar(),this.settings.change.bind(this)):(this.dropdown=new s.ui.controls.Dropdown(this.elements.view,{_pluginId:t}),this.dropdown1=new s.ui.controls.Dropdown(this.elements.icon,{_pluginId:t})),this.elements.datepicker.show()},getPosition:function(){var e=this.elements.view.offset(),t=this.elements.view.height(),s=this.elements.menu.width(),i=this.elements.menu.height(),n=$(document).width(),a=$(document).height(),o="down",r="left";return e.top+t+i>a&&(o="up"),e.left+s>n&&(r="right"),o+","+r},autoUpPosition:function(){var e=this.position.split(","),t=e[0],s=e[1],i="up"===t?this.settings.up:"";this.container.addClass(i),this.settings.isRightPosition=!1,"right"===s&&(this.settings.isRightPosition=!0)},autoRightPosition:function(){if(this.settings.isRightPosition){var e=this.elements.view.width();e+=this.elements.icon.width();var t=this.elements.menu.width(),s=e-t;this.elements.menu.css("margin-left",s)}},transferAttributes:function(){this.element.prop("disabled")&&this.disable()},bindEvents:function(){if(this.elements.prev.on("click",$.proxy(this.clickPrev,this)),this.elements.next.on("click",$.proxy(this.clickNext,this)),this.elements.datepicker.on("click",function(e){e.preventDefault(),e.stopPropagation()}),this.elements.showYearBtn.on("click",$.proxy(this.showPanel,this,"year")),this.elements.showMonthBtn.on("click",$.proxy(this.showPanel,this,"month")),this.elements.view.on("focus",$.proxy(this.focusView,this)),this.elements.icon.on("click",$.proxy(function(){this.elements.view.focus()},this)),this.elements.view.on("keyup",$.proxy(this.updateCalendar,this)),this.elements.view.on("blur",$.proxy(this.confirmCalendar,this)),this.container.find(".calendar-year").on("click","li",$.proxy(this.yearChanged,this)),this.container.find(".calendar-month").on("click","li",$.proxy(this.monthChanged,this)),this.elements.view.on("changedate",$.proxy(this.settings.change,this)),this.elements.today.on("click",$.proxy(this.setToday,this)),this.elements.confirm.on("click",$.proxy(this.clickApply,this)),this.settings.scroller){var e,t=this;this.container.find(".calendar-years").scroll(function(s){var i=$(s.target),n=i[0].scrollTop,a=i[0].scrollHeight,o=i[0].clientHeight;if(n/a===0){if(e=i.find("ul"),1*e.find("li:first-child").text()<=t.settings.minYear)return;t.loadYear(e,e.find("li:first-child").text(),"up"),i.scrollTop(260)}else if(n+o===a){if(e=i.find("ul"),1*e.find("li:last-child").text()>=t.settings.maxYear)return;t.loadYear(e,e.find("li:last-child").text(),"down")}})}var s=this;this.calendar.container.on("onSelected",function(e,t){s.currentDate=moment(t,s.settings.format),s.currentCalendar.month=s.currentDate;var i=s.currentCalendar.month.clone();if(s.settings.timePicker){var n=$.extend(!0,{},["0","0","0","0"],s.timePicker.getValue().split(":")),a=n[2].split(".");n[2]=a[0],n[3]=a[1]?a[1]:"0",i.hour(n[0]).minute(n[1]).second(n[2]).millisecond(n[3])}else s.settings.calendarMode||(s.dropdown.toggle(e),s.dropdown1.toggle(e));s.setDate(i),s.setCurrentDate(i),s.showDate(),s.getDate(),s.container.trigger("dateSelected",i)}),this.settings.timePicker&&this.settings.calendarMode&&this.timePicker.elements.view.on("timeChange",function(e,t){var i=s.currentCalendar.month.clone(),n=$.extend(!0,{},["0","0","0","0"],s.timePicker.getValue().split(":")),a=n[2].split(".");n[2]=a[0],n[3]=a[1]?a[1]:"0",i.hour(n[0]).minute(n[1]).second(n[2]).millisecond(n[3]),s.setDate(i),s.setCurrentDate(i),s.showDate(),s.getDate(),s.container.trigger("dateSelected",i)})},setMinDate:function(e){e&&(this.settings.minYear=moment(e).year()),"string"==typeof e&&(this.settings.minDate=moment(e,this.settings.format)),"object"==typeof e&&(this.settings.minDate=moment(e)),this.calendar.setMinDate(e)},setMaxDate:function(e){e&&(this.settings.maxYear=moment(e).year()),"string"==typeof e&&(this.settings.maxDate=moment(e,this.settings.format)),"object"==typeof e&&(this.settings.maxDate=moment(e)),this.calendar.setMaxDate(e)},loadYear:function(e,t,s){for(var i=this.getYearData(t,s),n="",a=0;a<i.length;a++)n+='<li value="'+i[a]+'">'+i[a]+"</li>";"down"===s?e.append(n):e.find("li:first-child").before(n)},getYearData:function(e,t){var s,i,n,a=[];if(s=isNaN(e)?(new Date).getFullYear():e,i=1*s-this.settings.intervalYear,n=1*s+this.settings.intervalYear,i<this.settings.minYear&&(i=this.settings.minYear),n>this.settings.maxYear&&(n=this.settings.maxYear),"down"===t)for(var o=1*s+1;o<=n;o++)a.push(o);else for(var o=i;o<s;o++)a.push(o);return a},setDate:function(e){if("string"==typeof e&&(this.currentDate=moment(e,this.settings.format)),"object"==typeof e&&(this.currentDate=moment(e)),"number"==typeof e&&(this.currentDate=moment(e)),this.settings.timePicker||(this.currentDate=this.currentDate.startOf("day")),this.settings.minDate&&this.currentDate.isBefore(this.settings.minDate)&&(this.currentDate=this.settings.minDate.clone()),this.settings.maxDate&&this.currentDate.isAfter(this.settings.maxDate)&&(this.currentDate=this.settings.maxDate.clone()),this.currentCalendar.month=this.currentDate.clone(),this.settings.timePicker){var t,s,i,n;t=this.currentDate.hour(),s=this.currentDate.minute(),i=this.currentDate.second(),n=this.currentDate.millisecond(),this.currentCalendar.month.hour(t).minute(s).second(i).millisecond(n)}this.calendar.currentCalendar.month=this.currentCalendar.month,this.calendar.currentCalendar.selectedDate=this.currentCalendar.month},setCurrentDate:function(e){if(!e)return void(this.currentDate=null);var t;"string"==typeof e&&(t=moment(e,this.settings.format)),"object"==typeof e&&(t=moment(e)),"number"==typeof e&&(t=moment(e)),this.settings.timePicker||(t=t.startOf("day")),this.settings.minDate&&t.isBefore(this.settings.minDate)&&(t=this.settings.minDate.clone()),this.settings.maxDate&&t.isAfter(this.settings.maxDate)&&(t=this.settings.maxDate.clone()),this.currentDate=t.clone(),this.calendar.currentDate=t.clone()},setCurrentCalendar:function(e){var t=!1;e||(e=new Date,t=!0);var s;if("string"==typeof e&&(s=moment(e,this.settings.format)),"object"==typeof e&&(s=moment(e)),"number"==typeof e&&(s=moment(e)),this.settings.timePicker||(s=s.startOf("day")),this.settings.minDate&&s.isBefore(this.settings.minDate)&&(s=this.settings.minDate.clone()),this.settings.maxDate&&s.isAfter(this.settings.maxDate)&&(s=this.settings.maxDate.clone()),this.currentCalendar.month=s.clone(),this.settings.timePicker&&!t){var i=s.hour()||"00",n=s.minute()||"00",a=s.second()||"00",o=s.millisecond()||"00";this.currentCalendar.month.hour(i).minute(n).second(a).millisecond(o);var r=i+":"+n+":"+a+"."+o;this.timePicker.setValue(r)}this.calendar.currentCalendar.month=this.currentCalendar.month,this.calendar.currentCalendar.selectedDate=this.currentCalendar.month},showDate:function(){var e=null;this.currentDate&&(e=this.currentDate.clone(),e=e.format(this.settings.format)),this.elements.view.val(e),rebuildRepairedPlaceholder(this.elements.view)},setValue:function(e){var t=moment(e).format("YYYY/MM/DD");"Invalid Date"!==t&&"Invalid date"!==t||(e=""),this.setCurrentDate(e),this.setCurrentCalendar(e),this.showDate()},setToday:function(e){var t=new Date;t=moment(t);var s=this.currentCalendar,i=s.month.hour(),n=s.month.minute(),a=s.month.second(),o=s.month.millisecond();t.hour(i).minute(n).second(a).millisecond(o),this.setCurrentCalendar(t),this.settings.timePicker?this.updateView():this.clickApply(e)},confirmCalendar:function(e){var t=this.elements.view.val();if(t.length>0){var s=this.getInputValue();this.setValue(s)}else this.setCurrentDate(null),this.setCurrentCalendar(null);this.getDate()},getNumResult:function(){return this.typeNumResult},setNumResult:function(e){this.typeNumResult=e},updateCalendarForValue:function(e){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var s=t.parseInputDate(e),i=s||t.getMoment();t.setCurrentCalendar(i),t.updateView()},300)},updateCalendar:function(e){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var e=t.getInputValue();t.setCurrentCalendar(e),t.updateView()},300)},getMomentDate:function(e){var t=this.parseInputDate(e),s=t||this.getMoment();return s&&(s=s.format(this.settings.format)),s},getInputValue:function(){var e=this.elements.view.val(),t=this.parseInputDate(e),s=t||this.getMoment();return s},parseInputDate:function(e){return e=moment.isMoment(e)||e instanceof Date?moment(e):this.getMoment(e)},getMoment:function(e){var t;return"undefined"==typeof e||null===e?t=null:(t=moment(e,this.settings.format,!1),moment(t,this.settings.format,!0).isValid()||(t=null)),t},focusView:function(){"auto"===this.settings.position&&(this.position=this.getPosition(),this.autoUpPosition(),this.autoRightPosition());var e=this.getInputValue();this.setCurrentCalendar(e),this.updateView()},updateView:function(e){this.elements.calendarYear.hasClass("active")&&this.elements.calendarYear.removeClass("active"),this.elements.calendarMonth.hasClass("active")&&this.elements.calendarMonth.removeClass("active"),this.elements.calendarYears.hide(),this.elements.calendarMonths.hide(),this.settings.timePicker&&this.timePicker.renderTimePicker(),this.renderCalendar()},renderCalendar:function(){this.calendar.renderCalendar();var e=this.calendar.currentCalendar,t=e.month.month(),s=e.month.year(),i=!1;this.settings.minDate&&(i=this.settings.minDate.clone());var o=!1;this.settings.maxDate&&(o=this.settings.maxDate.clone());var r=e.month.clone(),l=r.month(),h=r.year(),c=o&&o.year()||this.settings.maxYear,d=i&&i.year()||this.settings.minYear,u=h==d,p=h==c,m=moment([s,t]).daysInMonth(),f=moment([s,t,1]),g=moment([s,t,m]),e=[];e.firstDay=f,e.lastDay=g;var v='<ul class="monthselect">';!i||i.isBefore(e.firstDay)?this.elements.prev.show():this.elements.prev.hide(),!o||o.isAfter(e.lastDay)?this.elements.next.show():this.elements.next.hide();for(var b=0;b<12;b++)(!u||b>=i.month())&&(!p||b<=o.month())&&(v+="<li value='"+b+"'"+(b===l?" class='selected'":"")+">"+(b+1)+"</li>");v+="</ul>",this.elements.calendarMonths.html(v),this.settings.scroller&&(d=1*h-this.settings.intervalYear,c=1*h+this.settings.intervalYear,d<this.settings.minYear&&(d=this.settings.minYear),c>this.settings.maxYear&&(c=this.settings.maxYear),this.scrollerMinYear=d);for(var y='<ul class="yearselect">',k=d;k<=c;k++)y+='<li value="'+k+'"'+(k===h?' class="selected"':"")+">"+k+"</li>";y+="</ul>",this.elements.calendarYears.html(y);var w=t+1;this.elements.showYear.html(s+a),this.elements.showMonth.html(w+n)},yearChanged:function(e){var t=parseInt(e.target.innerHTML);this.currentCalendar.month.year(t),this.elements.calendarYear.removeClass("active"),this.elements.calendarYears.hide(),this.monthOrYearChanged()},monthChanged:function(e){var t=parseInt(e.target.innerHTML);t-=1,this.currentCalendar.month.month(t),this.elements.calendarMonth.removeClass("active"),this.elements.calendarMonths.hide(),this.monthOrYearChanged()},showPanel:function(e,t){t.preventDefault(),t.stopPropagation(),this.elements.calendarYears.hide(),this.elements.calendarMonths.hide();var s="";if(this.elements.calendarYear.hasClass("active")&&(this.elements.calendarYear.removeClass("active"),s="year"),this.elements.calendarMonth.hasClass("active")&&(this.elements.calendarMonth.removeClass("active"),s="month"),s!=e){var i=this.currentCalendar,n=i.month.month(),a=i.month.year(),o=this.scrollerMinYear||this.settings.minDate&&this.settings.minDate.year()||this.settings.minYear,r=a-o-4;r<0&&(r=0),r=26*r;var l=n-3;switch(l<0&&(l=0),l=26*l,e){case"year":this.elements.calendarYears.show(),this.elements.calendarYear.addClass("active"),this.elements.calendarYears.scrollTop(r);break;case"month":this.elements.calendarMonths.show(),this.elements.calendarMonth.addClass("active"),this.elements.calendarMonths.scrollTop(l)}}},clickPrev:function(e){this.calendar.currentCalendar.month.subtract(1,"month"),this.renderCalendar()},clickNext:function(e){this.calendar.currentCalendar.month.add(1,"month"),this.renderCalendar()},clickApply:function(e){var t=this.currentCalendar.month.clone();if(this.settings.timePicker){var s=$.extend(!0,{},["0","0","0","0"],this.timePicker.getValue().split(":")),i=s[2].split(".");s[2]=i[0],s[3]=i[1]?i[1]:"0",t=t.clone().hour(s[0]).minute(s[1]).second(s[2]).millisecond(s[3])}this.setCurrentDate(t),this.showDate(),this.getDate(),this.settings.calendarMode||(this.dropdown.toggle(e),this.dropdown1.toggle(e))},getDate:function(){var e;this.currentDate&&(e=this.currentDate.clone(),e=e.format(this.settings.format)),this.elements.view.trigger("changedate",e)},monthOrYearChanged:function(){var e=this.currentCalendar,t=e.month.month(),s=e.month.year();this.settings.minDate&&(s<this.settings.minDate.year()||s==this.settings.minDate.year()&&t<this.settings.minDate.month())&&(t=this.settings.minDate.month(),s=this.settings.minDate.year()),this.settings.maxDate&&(s>this.settings.maxDate.year()||s==this.settings.maxDate.year()&&t>this.settings.maxDate.month())&&(t=this.settings.maxDate.month(),s=this.settings.maxDate.year()),this.calendar.currentCalendar.month.month(t).year(s),this.renderCalendar()},render:function(e){return e.getDate()},refresh:function(){},enable:function(){this.elements.view.prop("disabled",!1),this.container.removeClass("disabled"),this.elements.icon.removeClass("disabled")},disable:function(){this.elements.view.prop("disabled",!0),this.elements.icon.addClass("disabled"),this.container.addClass("disabled")},destroy:function(){},getApi:function(){var e=this,t={getValue:"getInputValue",setValue:"setValue",clickApply:"clickApply",setMinDate:"setMinDate",setMaxDate:"setMaxDate"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="datepicker",i=s.ui.controls.datepicker;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=function(){},i=0,n={confirmhide:!1,minDate:"1900-01-01",maxDate:"2099-12-31",ngMinDate:void 0,ngMaxDate:void 0,showWeekNumbers:!1,weekLabel:"W",format:"YYYY-MM-DD",daysOfWeek:moment.weekdaysMin(),monthNames:moment.monthsShort(),firstDay:0,split:"至",replace:"...",options:[{text:"不限",value:""},{text:"今日",value:"N+0"},{text:"明天",value:"S+1"},{text:"最近1日",value:"N-1"},{text:"最近1月",value:"M-1"},{text:"最近1年",value:"Y-1"}],position:"bottom,left",bottom:"dropdown",up:"dropup",change:t,timePicker:!1,timeShowPanel:!0,mask:!1,defaultTime:null,dateChangedLeft:null,dateChangedRight:null,renderLeft:null,renderRight:null},a={confirmhide:"confirmhide",minDate:"min-date",maxDate:"max-date",showWeekNumbers:"show-week-numbers",weekLabel:"week-label",format:"format",options:"options",position:"position",timePicker:"time-picker",timeShowPanel:"time-show-panel",mask:"mask",defaultTime:"default-time"};this.Daterangepicker=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,t){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),i+=1,this.element.data("plugin-id",i),this.noRestrict=!1,this.initSettings(t),this.settings.maxDate=this.settings.ngMaxDate||this.settings.maxDate,this.settings.minDate=this.settings.ngMinDate||this.settings.minDate,t.options&&(this.settings.options=t.options),this.buildHtml(),this.initElements(),this.bindEvents())},buildHtml:function(){var e=this.element.data("plugin-id");if(this.settings.confirmhide)var t="";else var t=' <button class="btn btn-primary confirm" value="确定" type="button">确定</button>';var s='<div class="c-daterangepicker-container">   <div class="input-group-wrap form-control" data-s-dropdown-id="#c-daterangepicker-menu-'+e+'">        <input value="" class="input-left"  type="text" autocomplete="off" data-s-dropdown-id="#c-daterangepicker-menu-'+e+'" placeholder="'+this.settings.format+'"/>        <span class="split">'+this.settings.split+'</span>       <input value="" class="input-right"  type="text" autocomplete="off" data-s-dropdown-id="#c-daterangepicker-menu-'+e+'" placeholder="'+this.settings.format+'"/>        <i class="glyphicon glyphicon-calendar"></i>   </div>    <ul id="c-daterangepicker-menu-'+e+'" class="daterangepicker dropdown-menu">        <div class="datepicker-each calendar-left">           <div class="calendar-title">开始日期</div>           <input class="dtpicker-left" />       </div>       <div class="datepicker-each calendar-right">          <div class="calendar-title">结束日期</div>           <input class="dtpicker-right" />       </div>       <div class="calendar-bottom">           <div class="calendar-option">           </div>'+t+"       </div>   </ul></div>";this.container=$(s),this.element.before(this.container),this.element.hide()},initElements:function(){this.elements={original:this.element,daterangepicker:this.container,view:$(".input-group-wrap",this.container),inputLeftView:$(".input-left",this.container),inputRightView:$(".input-right",this.container),menu:$(".dropdown-menu",this.container),icon:$(".glyphicon-calendar",this.container),dpkLeftInput:$(".dtpicker-left",this.container),dpkRightInput:$(".dtpicker-right",this.container),options:$(".calendar-option",this.container),confirm:$(".calendar-bottom .confirm",this.container)};var e=this.elements.view.data("plugin-id"),i=this;this.dropdown=new s.ui.controls.Dropdown(this.elements.view,{_pluginId:e}),this.currentDate={};var n=this.settings.defaultTime?this.settings.defaultTime.split(","):[null,null],a=this.elements.inputLeftView.val(),o=this.elements.inputRightView.val(),r=$.extend(!0,{},this.settings,{calendarMode:!0,defaultTime:n[0],render:$.proxy(this.renderDateLeft,this),change:t,dateChanged:i.settings.dateChangedLeft,changedRender:function(e){i.datepickerRight.setMinDate(e),i.datepickerRight.renderCalendar()},clickcallback:function(){i.datepickerLeft.getInputValue()&&(a=i.datepickerLeft.getInputValue().format("YYYY-MM-DD")),i.datepickerRight.getInputValue()&&(o=i.datepickerRight.getInputValue().format("YYYY-MM-DD")),i.settings.confirmhide&&o&&i.clickApply()}}),l=$.extend(!0,{},this.settings,{calendarMode:!0,defaultTime:n[1],render:$.proxy(this.renderDateRight,this),change:t,dateChanged:i.settings.dateChangedRight,changedRender:function(e){i.datepickerLeft.setMaxDate(e),i.datepickerLeft.renderCalendar()},clickcallback:function(){i.datepickerLeft.getInputValue()&&(a=i.datepickerLeft.getInputValue().format("YYYY-MM-DD")),i.datepickerRight.getInputValue()&&(o=i.datepickerRight.getInputValue().format("YYYY-MM-DD")),i.settings.confirmhide&&a&&i.clickApply()}});if(this.datepickerLeft=new s.ui.controls.Datepicker(this.elements.dpkLeftInput,r),this.datepickerRight=new s.ui.controls.Datepicker(this.elements.dpkRightInput,l),this.settings.timePicker){var h='<div class="time-label">开始时间：</div>',c='<div class="time-label">结束时间：</div>';this.datepickerLeft.timePicker.elements.timepicker.prepend(h),this.datepickerRight.timePicker.elements.timepicker.prepend(c)}else this.datepickerLeft.elements.calendarBottom.hide(),this.datepickerRight.elements.calendarBottom.hide();if(this.settings.options)for(var d=0;d<this.settings.options.length;d++){var u=this.settings.options[d],p='<button class="recentdays" value="'+u.text+'" type="button">'+u.text+"</button>";p=$(p),this.elements.options.prepend(p),p.on("click",$.proxy(this.setRecentdays,this,u.value))}this.autoUpPosition(),this.autoRightPosition()},renderDateLeft:function(e){var t=moment(e);if(this.currentDate.left&&this.currentDate.right){if(t.isBefore(moment(this.currentDate.right))&&t.isAfter(moment(this.currentDate.left)))return this.settings.renderLeft?'<div class="selected">'+this.settings.renderLeft(e)+"</div>":'<div class="selected">'+e.getDate()+"</div>";if(t.format("YYYY-MM-DD")==moment(this.currentDate.right).format("YYYY-MM-DD")||t.format("YYYY-MM-DD")==moment(this.currentDate.left).format("YYYY-MM-DD"))return this.settings.renderLeft?'<div class="selected">'+this.settings.renderLeft(e)+"</div>":'<div class="selected">'+e.getDate()+"</div>"}return this.settings.renderLeft?this.settings.renderLeft(e):e.getDate()},renderDateRight:function(e){var t=moment(e);if(this.currentDate.left&&this.currentDate.right){if(t.isBefore(moment(this.currentDate.right))&&t.isAfter(moment(this.currentDate.left)))return this.settings.renderRight?'<div class="selected">'+this.settings.renderRight(e)+"</div>":'<div class="selected">'+e.getDate()+"</div>";if(t.format("YYYY-MM-DD")==moment(this.currentDate.right).format("YYYY-MM-DD")||t.format("YYYY-MM-DD")==moment(this.currentDate.left).format("YYYY-MM-DD"))return this.settings.renderRight?'<div class="selected">'+this.settings.renderRight(e)+"</div>":'<div class="selected">'+e.getDate()+"</div>"}return this.settings.renderRight?this.settings.renderRight(e):e.getDate()},autoUpPosition:function(){var e=this.settings.position.split(","),t=e[0],s=e[1],i="up"===t?this.settings.up:"";this.elements.view.addClass(i),this.settings.isRightPosition=!1,"right"===s&&(this.settings.isRightPosition=!0)},autoRightPosition:function(){if(this.settings.isRightPosition){var e=this.elements.view.width();e+=this.elements.icon.width();var t=this.elements.menu.width(),s=e-t;this.elements.menu.css("margin-left",s)}},transferAttributes:function(){},bindEvents:function(){this.elements.inputRightView.on("keyup",$.proxy(this.setInputValue,this)),this.elements.inputLeftView.on("keyup",$.proxy(this.setInputValue,this)),this.elements.view.on("keyup",$.proxy(this.updateView,this)),this.elements.view.on("changedate2",$.proxy(this.settings.change,this)),this.elements.inputLeftView.on("blur",$.proxy(this.inputBlurLeft,this)),this.elements.inputRightView.on("blur",$.proxy(this.inputBlurright,this)),this.elements.confirm.on("click",$.proxy(this.clickApply,this));var e=this;this.elements.daterangepicker.on("click",function(e){e.preventDefault(),e.stopPropagation()}),this.datepickerLeft.container.on("dateSelected",function(t,s,i){e.currentDate.left=s,""===s||moment(e.settings.minDate).isAfter(moment(s))||moment(e.settings.maxDate).isBefore(moment(s))||e.datepickerRight.setMinDate(s);var n=e.datepickerLeft.getInputValue();e.datepickerLeft.setValue(n),e.renderCalendar()}),this.datepickerRight.container.on("dateSelected",function(t,s,i){e.currentDate.right=s,""===s||moment(e.settings.minDate).isAfter(moment(s))||moment(e.settings.maxDate).isBefore(moment(s))||e.datepickerLeft.setMaxDate(s);var n=e.datepickerRight.getInputValue();e.datepickerRight.setValue(n),e.renderCalendar()})},setMinDate:function(e){this.settings.minDate=e,this.datepickerLeft.setMinDate(e),this.datepickerLeft.renderCalendar()},setMaxDate:function(e){this.settings.maxDate=e,this.datepickerRight.setMaxDate(e),this.datepickerRight.renderCalendar()},restoreDate:function(){this.container.find("td"),this.container.find("td.selected").removeClass("selected"),this.datepickerLeft.setMaxDate(this.settings.maxDate),this.datepickerLeft.setMinDate(this.settings.minDate),this.datepickerRight.setMinDate(this.settings.minDate),this.datepickerRight.setMaxDate(this.settings.maxDate)},renderCalendar:function(){this.datepickerRight.renderCalendar(),this.datepickerLeft.renderCalendar()},setViewValue:function(){this.elements.inputLeftView.val(this.elements.dpkLeftInput.val()),this.elements.inputRightView.val(this.elements.dpkRightInput.val()),rebuildRepairedPlaceholder(this.elements.inputLeftView),rebuildRepairedPlaceholder(this.elements.inputRightView),10!==document.documentMode&&11!==document.documentMode||(repairedPlaceholder(".input-left"),repairedPlaceholder(".input-right"),$(".input-left").removeAttr("placeholder"),$(".input-right").removeAttr("placeholder"))},format:function(e){var t=e.length-1;switch(t){case 4:case 7:e=e.replace(new RegExp("([\\d\\/-\\s\\:]{"+t+"})"),"$1-"),e=e.replace(/[\-\/]{2,}/g,"-");break;case 10:this.settings.timePicker&&(e=e.replace(new RegExp("([\\d\\/-\\s\\:]{"+t+"})"),"$1 "),e=e.replace(/\s{2,}/g," "));break;case 13:case 16:this.settings.timePicker&&(e=e.replace(new RegExp("([\\d\\/-\\s\\:]{"+t+"})"),"$1:"),e=e.replace(/\:{2,}/g,":"));break;case 19:this.settings.timePicker&&(e=e.replace(new RegExp("([\\d\\/-\\s\\:]{"+t+"})"),"$1."),e=e.replace(/\.{2,}/g,"."))}return e},setInputValue:function(e){if(this.settings.mask&&e&&[8,37,38,39,40].indexOf(e.keyCode)===-1){var t=$(e.target);t.val(this.format(t.val()))}var s=this.elements.inputLeftView.val(),i=this.elements.inputRightView.val(),n=this.parseInputDate(s)||this.getMoment(s),a=this.parseInputDate(i)||this.getMoment(i);if(n)if(a){if(n.isAfter(a))return}else this.elements.dpkRightInput.val("");else this.elements.dpkLeftInput.val("");this.elements.dpkLeftInput.val(s),this.elements.dpkRightInput.val(i),this.datepickerLeft.container.trigger("dateSelected",[n,!0]),this.datepickerRight.container.trigger("dateSelected",[a,!0])},setRecentdays:function(e,t){var s=e.charAt(0),i=e.charAt(1),n=e.charAt(2);if(this.restoreDate(),"T"!==s){if(!s)return this.noRestrict=!0,void this.setValue(["",""]);var a=this.getNRecentdays(o,s,i,n),o=a[0],r=a[1];this.elements.dpkRightInput.val(r.format(this.settings.format)),this.elements.dpkLeftInput.val(o.format(this.settings.format)),this.datepickerLeft.container.trigger("dateSelected",[o,!0]),this.datepickerRight.container.trigger("dateSelected",[r,!0])}this.settings.confirmhide&&this.clickApply()},getNRecentdays:function(e,t,s,i){var n;switch(i=parseInt(i),t){case"N":n="+"==s?moment(e).add(i,"day"):moment(e).subtract(i,"day");break;case"M":n="+"==s?moment(e).add(i,"month"):moment(e).subtract(i,"month");break;case"Y":n="+"==s?moment(e).add(i,"year"):moment(e).subtract(i,"year");break;case"S":n="+"==s?moment(e).add(i,"day"):moment(e).subtract(i,"day")}var a=moment();if("S"===t)a=n;else if(n.isBefore(a)){var o=a.clone();a=n.clone(),n=o.clone()}return[a,n]},parseInputDate:function(e){return e=moment.isMoment(e)||e instanceof Date?moment(e):this.getMoment(e)},getMoment:function(e){var t;return"undefined"==typeof e||null===e?t=null:(t=moment(e,this.settings.format,!1),moment(t,this.settings.format,!0).isValid()||(t=null)),t},updateView:function(e){var t=this.getDatepickerValue();this.elements.view.trigger("changedate2",[t]),this.noRestrict=!1},clickApply:function(e){var t=this.getDatepickerValue();this.elements.view.trigger("changedate2",[t]),this.setViewValue(),this.dropdown.toggle(e)},clickApply1:function(e,t,s){this.elements.view.trigger("changedate2",[i]);var i=this.getDatepickerValue();if("left"==s){var n=i[0];if(t!==n)return}if("right"==s){var n=i[1];if(t!==n)return}this.setViewValue(),this.dropdown.toggle(e)},setCalendarValue:function(e){if(this.value=e,e){if(2!=e.length)return;var t=e[0],s=e[1],i=this.getMoment(t);i||(t=this.settings.replace);var n=this.getMoment(s);n||(s=this.settings.replace),i||n||(this.value=[null,null],t=s=""),this.elements.dpkLeftInput.val(t),this.elements.dpkRightInput.val(s),this.datepickerLeft.container.trigger("dateSelected",[t,!0]),this.datepickerRight.container.trigger("dateSelected",[s,!0])}else this.elements.dpkLeftInput.val(""),this.elements.dpkRightInput.val(""),this.datepickerLeft.container.trigger("dateSelected",["",!0]),this.datepickerRight.container.trigger("dateSelected",["",!0]);this.setViewValue()},setValue:function(e){this.restoreDate(),this.setCalendarValue(e)},getCaleandarValue:function(){var e=this.datepickerLeft.getInputValue();e=e?this.datepickerLeft.getInputValue().clone().format(this.settings.format):null;
var t=this.datepickerRight.getInputValue();t=t?this.datepickerRight.getInputValue().clone().format(this.settings.format):null;var s=[e,t];return s},getDatepickerValue:function(){return this.value=this.getCaleandarValue(),this.value},getValue:function(){return[this.elements.inputLeftView.val(),this.elements.inputRightView.val()]},renderCalendarLeft:function(){this.datepickerLeft.renderCalendar()},renderCalendarRight:function(){this.datepickerRight.renderCalendar()},inputBlurLeft:function(){var e=this.elements.inputLeftView.val(),t=this.elements.inputRightView.val(),s=moment(e),i=moment(t);s.isAfter(i)&&(this.elements.inputLeftView.val(""),this.setViewValue())},inputBlurright:function(){var e=this.elements.inputLeftView.val(),t=this.elements.inputRightView.val(),s=moment(e),i=moment(t);i.isBefore(s)&&(this.elements.inputRightView.val(""),this.setViewValue())},enable:function(){this.elements.inputLeftView.prop("disabled",!1),this.elements.inputRightView.prop("disabled",!1),this.elements.view.removeClass("disabled"),this.container.removeClass("disabled")},disable:function(){this.elements.inputLeftView.prop("disabled",!0),this.elements.inputRightView.prop("disabled",!0),this.elements.view.addClass("disabled"),this.container.addClass("disabled")},destroy:function(){},getApi:function(){var e=this,t={setValue:"setValue",getValue:"getValue",renderCalendarLeft:"renderCalendarLeft",renderCalendarRight:"renderCalendarRight"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="daterangepicker",i=s.ui.controls.Daterangepicker;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";function t(e){if(!e||3!==e.which)for(var t=0;t<o.length;t++){var s=o[t],i=$(s),n=i.parent();n.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains(n[0],e.target)||(r[s]&&(e&&$.contains(n[0],e.target)||n[0]==e.target)?n.toggleClass("open"):r[s]||n.removeClass("open")))}}var i=0,n={multiDropdown:!1},a={dropdownId:"dropdown-id",multiDropdown:"multi-dropdown"},o=[],r={};this.Dropdown=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,settings:{},value:"",data:{},templates:{},init:function(e,t){this.element=$(e),this.element.addClass("dropdown-btn");var s=t&&t._pluginId;!s&&this.element.data("initialized")||(s||(this.element.data("initialized",!0),i+=1,this.element.data("plugin-id",i)),this.initSettings(t),this.element.is("a")&&this.element.attr("href")&&(this.settings.dropdownId=this.element.attr("href")),o.push(this.settings.dropdownId),this.settings.multiDropdown&&(r[this.settings.dropdownId]=1),this.buildHtml(),this.initElements(),this.bindEvents())},buildHtml:function(){},initElements:function(){this.elements={original:this.element}},bindEvents:function(){this.element.on("click.bs.dropdown",this.toggle)},bindEventsInterface:function(){this.element},render:function(){},toggle:function(e){var s=$(this);if(!s.is(".disabled, :disabled")){var i=s.parent(),n=i.hasClass("open");return t(e),n||(s.trigger("focus"),i.toggleClass("open")),!1}},refresh:function(){},enable:function(){},disable:function(){},destroy:function(){}}),$(document).on("click.bs.dropdown.data-api",t)}),function(e){"use strict";var t="dropdown",i=s.ui.controls.Dropdown;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=function(){},i={mask:"N",rule:"",maskExtend:t,translation:{},event:{},email:!1},n={mask:"mask",email:"email"};this.Inputmask=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),this.initSettings(s),this.event={},this.globals={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{N:{pattern:/\S/,recursive:!0},0:{pattern:/\d/},1:{pattern:/[1-9]/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/},X:{pattern:/\S/},P:{pattern:/[0-9()+-]/}}},this.rule=this.settings.rule,$.extend(!0,this.globals.translation,this.settings.translation),this.mask={decimal:"",prefix:"",integer:this.settings.mask},this["extends"]=!1,this.settings.email?this.bindEvent():this.settings.maskExtend!==t?(this.setMask(),this.render(!0)):(this.bindEvent(),this.setMask(),this.render())},bindEvent:function(){this.rule&&!this.settings.email&&(this.event={onKeyPress:this.onKeyPress.bind(this)}),this.element.on("blur",this.onBlur.bind(this))},onBlur:function(){this.settings.email?this.setEmail():this.rule.decimal&&this.setDecimal()},onKeyPress:function(e,t,s,i){s.mask(this.getMask.apply(this,arguments),i).val(this.changeVal(s.val(),e))},setEmail:function(){var e=this.element.val().replace(/ /g,""),t=e.lastIndexOf("@"),s=e.lastIndexOf(".");t===-1?e+="@_._":s<t?e+=""===e.substring(t+1,e.length)?"_._":"._":""===e.substring(t+1,s)?e=e.substring(0,t+1)+"_"+e.substring(s,e.length):""===e.substring(s+1,e.length)&&(e+="_"),0===e.lastIndexOf("@")&&(e="_"+e),this.element.val(e)},integerMask:function(e){var t=e.replace(/\D/g,"").length,s="9",i={"false":!1,wan:4,thousand:3,hundred:2};if(0===t)return s;for(var n=0;n<t;n++)if(s=n%i[this.rule.numeralStyle]===0&&0!==n?"0,"+s:"0"+s,n+1===this.rule.maxLength&&this.rule.maxLength)return s.substring(0,s.length-1);return s},decimalMask:function(){for(var e=".",t=0;t<this.rule.decimal;t++)e+="0";return e},prefixMask:function(){for(var e="",t=0;t<this.rule.prefix.length;t++)e+="X";return e},setMask:function(){this.rule.decimal&&(this.mask.decimal=this.decimalMask()),this.rule.prefix&&(this.mask.prefix=this.prefixMask())},getMask:function(e){if(this.rule.decimal&&(e=e.split(".")[0]),this.rule.prefix){var t=this.rule.prefix;e=e.substring(0,t.length)!==t?this.unPrefix(e):e.replace(t,"")}return this.rule&&(this.mask.integer=this.integerMask(e)),this.mask.prefix+this.mask.integer+this.mask.decimal},setDecimal:function(){var e=this.element.val(),t=e.split(".")[1]||"",s=this.rule.prefix||"";if(s&&(e=e.replace(s,"")),e){for(var i=0;i<this.rule.decimal;i++)t.charAt(i)||(t+="0");e=e.split(".")[0]||"0",t=s+e+"."+t}else t=s;this.element.val(t)},changeVal:function(e,t){var s="";if(this.rule.decimal&&e.indexOf(".")!==-1&&(s=e.split(".")[1]?"."+e.split(".")[1]:"."),e=e.split(".")[0],this.rule.prefix){var i=this.rule.prefix;if(!e)return i;e.substring(0,i.length)!==i&&(e=i+this.unPrefix(e))}return e+s},unPrefix:function(e){for(var t,s=this.rule.prefix,i=e.substring(0,s.length),n=0;n<s.length;n++)if(i.charAt(n)!==s.charAt(n)){t=n;break}return e.substring(t,e.length)},setValue:function(e){var s;this.settings.email?s="N":this.settings.maskExtend!==t?s=this.settings.maskExtend.bind(this).apply(this,arguments):(e=this.changeVal(e),s=this.getMask.bind(this).apply(this,arguments)),this.element.val(e).mask(s,$.extend({},this.event,this.globals)).val(this.element.masked(e)),this.settings.email?this.setEmail():this.rule.decimal&&this.settings.maskExtend==t&&this.setDecimal()},getValue:function(){return this.element.val()},render:function(e){var t=this.element.val(),s=e?this.settings.maskExtend.bind(this):this.getMask.bind(this);this.rule.prefix&&!e&&(t=this.rule.prefix+t),$.extend(!0,this.event,this.settings.event),this.element.val(t).mask(s,$.extend({},this.event,this.globals))}})}),function(e){"use strict";var t="inputmask",i=s.ui.controls.Inputmask;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked"},n={},a={check:1,unCheck:-1};this.InputMultiSelect=new e.Class({extend:s.ui.controls.Typeahead},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.map=this.settings.map,"string"==typeof this.settings.map&&""!==this.settings.map&&(this.map=JSON.parse(this.settings.map)),this.matcher=this.settings.matcher||this.matcher,this.sorter=this.settings.sorter||this.sorter,this.template=this.settings.template||this.template,this.mouseover=this.settings.mouseover||this.mouseover,this.mouseout=this.settings.mouseout||this.mouseout,this.select=this.settings.select||this.select,this.autoSelect="boolean"!=typeof this.settings.autoSelect||this.settings.autoSelect,this.highlighter=this.settings.highlighter||this.highlighter,this.render=this.settings.render||this.render,this.updater=this.settings.updater||this.updater,this.displayText=this.settings.displayText||this.displayText,this.nofound=this.settings.nofound&&'<p style="padding:5px 5px;width:'+this.settings.nofoundWidth+'px;" >'+this.settings.nofound+"</p>",this.source=this.settings.data,this.sourceMap={},this.delay=this.settings.delay,this.chooseItems=[],this.selectedItems=[],this.buildHtml(),this.initElements(),this.transferAttributes(),this.bindEvents(),this.bindEventsEx())},buildHtml:function(){this.element.hide();var e=this.element.data("plugin-id"),t='<div class="c-input-multi-select-container">   <div class="c-input-multi-select-panel form-control">       <span class="glyphicon glyphicon-menu-down"></span>       <div class="c-ims-placeholder">请输入..</div>       <div class="c-ims-textlist" title=""></div>       <dl class="c-ims-list">       <input class="c-ims-input" data-s-dropdown-id="#c-input-multi-select-menu-'+e+'"/>       </dl>   </div>   <ul id="c-input-multi-select-menu-'+e+'" class="typeahead dropdown-menu">   </ul></div>';this.container=$(t),this.element.before(this.container),this.element.is("input")&&this.element.attr("autocomplete","off")},initElements:function(){this.elements={view:$(".c-ims-input",this.container),panel:$(".c-input-multi-select-panel",this.container),placeholder:$(".c-ims-placeholder",this.container),menu:$(".dropdown-menu",this.container),dl:$(".c-ims-list",this.container),textlist:$(".c-ims-textlist",this.container)};var e=this.elements.view.data("plugin-id");this.dropdown=new s.ui.controls.Dropdown(this.elements.view,{_pluginId:e})},transferAttributes:function(){this.elements.placeholder.html(this.element.attr("placeholder")),void 0!==this.element.attr("disabled")&&this.disable()},bindEventsEx:function(){this.elements.panel.on("click",$.proxy(this.clickView,this)),this.elements.view.on("blur",$.proxy(this.inputBlur,this))},focusClick:function(e){this.elements.placeholder.hide(),""===$(e.target).val()&&this.settings.showItemList===!1?this.elements.menu.html(""):(this.lookup(),this.setScrollTop())},inputBlur:function(){this.elements.view.val(""),0==this.chooseItems.length&&this.elements.placeholder.show()},clickView:function(){this.elements.view.is(":focus")||this.elements.view.trigger("focus")},setSourceEx:function(e){this.setSource(e),this._sourceMap=$.extend(!0,{},this.sourceMap)},render:function(e){var t=this,s=this,i=!1,n="<li><span></span><a></a></li>";return e=$(e).map(function(e,a){var o=s.displayText(a);e=$(n).data("value",a);var r=e.find("span");return a.unselectable&&e.addClass("disabled"),s._sourceMap[o].checked?(r.addClass(s.settings.checkedIcon),e.find("a").attr("class","checked")):(r.addClass(s.settings.uncheckedIcon),e.find("a").attr("class","")),e.find("a").html(t.highlighter(o,a)),e.attr("data-value",a.value),o===s.elements.view.val()&&(e.addClass("active"),i=!0),e[0]}),this.autoSelect&&!i&&e.first().addClass("active"),this.elements.menu.html(e),this.setScrollTop(),this},keyup:function(e){var t=$.inArray(e.keyCode,[8,13,27,38,40,46]);t!=-1?this.move(e):this.lookup()},move:function(e){if(8===e.keyCode)return void this.batchDelete();if(this.isMenuOpen()){switch(e.keyCode){case 13:var t=this.elements.menu.find("li.active"),s=t.attr("data-value");this._sourceMap[s].checked?this.select(a.unCheck,t):this.select(a.check,t);break;case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next();break;case 46:this.batchDelete()}e.stopPropagation()}},click:function(e){this.toggleClick(e)},toggleClick:function(e){var t=$(e.currentTarget),s=t.closest("li"),i=s.attr("data-value");this._sourceMap[i].checked?this.select(a.unCheck,s):this.select(a.check,s),e.preventDefault(),e.stopPropagation()},select:function(e,t,s){if(!t.hasClass("disabled")){var i=t.data("value")||this.sourceMap[s],n=t.attr("data-value")||s;if(e===a.check&&(t.find("span").attr("class",this.settings.checkedIcon),t.find("a").attr("class","checked"),this._sourceMap[n].checked=!0,this.chooseItems.push(i),this.elements.placeholder.hide()),e===a.unCheck){t.find("span").attr("class",this.settings.uncheckedIcon),t.find("a").attr("class",""),this._sourceMap[n].checked=!1,this._sourceMap[n].selected=!1;var o=this._getIndexInArray(i,this.chooseItems);this.chooseItems.splice(o,1),0===this.chooseItems.length&&this.elements.placeholder.hide()}this.setChooseItems(),this.elements.view.val(""),this.elements.view.trigger("onSelected",[this.chooseItems,i])}},setChooseItems:function(){var e=this.chooseItems,t="";this.elements.dl.find("dd").remove();for(var s=0;s<e.length;s++){t+=this.displayText(e[s])+" ; ";var i={dd:$("<dd/>").attr("class","c-ims-item"),spanName:$("<span/>").attr("class","c-ims-name").text(e[s].value),spanDel:$("<span/>").attr("class","c-ims-delete").text("×")};this._sourceMap[e[s].value].selected===!0&&i.dd.addClass("active"),i.dd.data(e[s]),i.spanName.on("click",$.proxy(this.clickSpanName,this)),i.spanDel.on("click",$.proxy(this.clickSpanDel,this)),i.dd.append(i.spanName),i.dd.append(i.spanDel),this.elements.view.before(i.dd)}t=t.substring(0,t.length-3),""!=t?this.elements.placeholder.hide():this.elements.placeholder.show(),this.elements.textlist.html(t)},batchDelete:function(){if(0!==this.selectedItems.length){for(var e=this.selectedItems,t=0;t<e.length;t++){var s=$("li[data-value='"+e[t].value+"']",this.container);this.select(a.unCheck,s,e[t].value)}this.selectedItems=[]}},clickSpanName:function(e){e.stopPropagation();var t=$(e.currentTarget);if($(t.is("span"))){var s=t.closest("dd"),i=s.data();if(s.hasClass("active")){s.removeClass("active");var n=this._getIndexInArray(i,this.selectedItems);this.selectedItems.splice(n,1),this._sourceMap[i.value].selected=!1}else s.addClass("active"),this.selectedItems.push(i),this._sourceMap[i.value].selected=!0}},clickSpanDel:function(e){e.stopPropagation();var t=$(e.currentTarget);if($(t.is("span"))){var s=t.closest("dd").data().value,i=$("li[data-value='"+s+"']",this.container);if(0===i.length){var n=t.closest("dd").data();this._sourceMap[s].checked=!1,this._sourceMap[s].selected=!1;var o=this._getIndexInArray(n,this.chooseItems);this.chooseItems.splice(o,1),this.setChooseItems(),this.elements.view.val(""),this.elements.view.trigger("onSelected",[this.chooseItems,n])}else this.select(a.unCheck,i)}},setValue:function(e){var t=e;if(t&&0!=t.length||(this.chooseItems=[],this._sourceMap=$.extend(!0,{},this.sourceMap),this.elements.textlist.html(""),this.elements.dl.find("dd").remove(),this.elements.placeholder.show()),t&&t.length>0){for(var s=this,i=this.chooseItems,n=0;n<i.length;n++)this._sourceMap[i[n].value].checked=!1,this._sourceMap[i[n].value].selected=!1;if(this.chooseItems=[],0===this.elements.menu.children().length){this.chooseItems=t;for(var n=0;n<t.length;n++)this._sourceMap[t[n].value].checked=!0;this.setChooseItems()}else for(var n=0;n<t.length;n++){var o=$("li[data-value='"+t[n].value+"']",s.container);s.select(a.check,o)}}},_getIndexInArray:function(e,t){for(var s=0;s<t.length;s++)if(JSON.stringify(e)==JSON.stringify(t[s]))return s;return-1},getApi:function(){var e=this,t={setSource:"setSourceEx",setValue:"setValue",getValue:"getValue"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="InputMultiSelect",i=s.ui.controls.InputMultiSelect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={liked:!1,dataUrl:"",value:""},n={liked:"liked",dataUrl:"data-url",value:"value"};this.LikeIt=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.value=parseInt(this.settings.value?this.settings.value:this.element.text()),this.initElements(),this.bindEvents(),this.reflash())},initElements:function(){this.elements={original:this.element}},bindEvents:function(){this.element.on("click",$.proxy(this.toggle,this))},toggle:function(){this.value=this.settings.liked?this.value-1:this.value+1,this.settings.liked=!this.settings.liked,this.postback()},postback:function(){var e=this;e.reflash(),this.settings.dataUrl&&0!==this.settings.dataUrl.length&&$.ajax({dataType:"json",url:this.settings.dataUrl,data:{},success:function(e){},error:function(){alert("控件id: "+e.element.attr("id")+" , ajax发送数据失败！")}})},reflash:function(){this.element.text(this.value),this.settings.liked?this.element.addClass("liked"):this.element.removeClass("liked")}})}),function(e){"use strict";var t="likeit",i=s.ui.controls.LikeIt;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={loadingText:"loading",maskedTarget:""},n={loadingText:"loading-text",maskedTarget:"masked-target"};this.Loading=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.buildHtml(),this.initElements())},buildHtml:function(){var e='<div class="c-loading-overlay"><p class="c-loading-spinner"><span class="c-loading-icon"></span><span class="c-loading-text">'+this.settings.loadingText+"</span></p></div>";this.overlay=$(e)},initElements:function(){this.elements={target:$(this.settings.maskedTarget)}},start:function(){this.elements.target.addClass("c-loading"),this.elements.target.data("loading-overlay")||this.elements.target.prepend(this.overlay).data("loading-overlay",!0)},stop:function(){this.elements.target.data("loading-overlay",!1),this.elements.target.find(".c-loading-overlay").detach(),this.elements.target.hasClass("c-loading")?this.elements.target.removeClass("c-loading"):this.elements.target.find(".c-loading").removeClass("c-loading")}})}),function(e){"use strict";var t="loading",i=s.ui.controls.Loading;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=300,n=150,a={modalId:"",modalClass:"",valign:"top",height:"",show:!1,bindTarget:!0,remote:"",content:"",parseData:void 0,backdrop:"static",keyboard:!0,modalContainer:"#c-modal-base",isdrag:"true",buttons:{close:{selector:".close",eventName:"click",handler:function(e){this.hide()}},cancel:{selector:".cancel",eventName:"click",handler:function(e){this.hide()}}},onInitialized:function(){}},o={modalId:"modal-id",show:"show",remote:"remote",backdrop:"backdrop",keyboard:"keyboard",modalClass:"modal-class",valign:"valign",height:"height"};this.Modal=new e.Class({extend:s.ui.BaseControl},{defaults:a,attributeMap:o,init:function(e,s){if(this.element=$(e),t+=1,this.element&&this.element.length>0&&(this._currentPluginId=this.element.data("plugin-id"),this._currentPluginId||(this._currentPluginId=t,this.element.data("plugin-id",t))),this.isShown=!1,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.initSettings(s),!this.settings.remote){var i=this.element.attr("href");this.settings.remote=!/#/.test(i)&&i}this.modalContainer=$(this.settings.modalContainer),this.settings.modalId=this.settings.modalId||this.settings.modalContainer+"-m"+this._currentPluginId,"function"==typeof this.settings.parseData&&(this.parseData=this.settings.parseData,delete this.settings.parseData),this.getData()},getData:function(){var e=this;this.settings.remote?$.ajax({url:this.settings.remote,type:"GET",dataType:"html"}).done(function(t){var s=e.parseData(t);e.render(s)}):this.render(this.settings.content)},parseData:function(e){return e},buildHtml:function(){},render:function(e){var t=this.modalContainer.find(this.settings.modalId);parseInt(this.settings.height)+2;if(0===t.length){var s=this.settings.modalClass?" "+this.settings.modalClass:"",i="middle"==this.settings.valign?" valign-middle":"",n='<div    class="modal c-modal fade'+s+i+'"    id="'+this.settings.modalId.substring(1)+'"    tabindex="-1">    <div class="modal-dialog">    </div></div>';this.modalContainer.append(n),t=this.modalContainer.find(this.settings.modalId)}var a=t.find(".modal-dialog:first");e&&(a.empty(),a.append(e)),"true"===this.settings.isdrag&&$(a).draggable({handle:".modal-header",containment:".modal-open .modal.in"}),this.initElements(),this.bindEvents(),this.elements.modal.trigger("modal.on.initialized"),this.settings.show&&this.show(this.element)},refresh:function(){},initElements:function(){var e=this.modalContainer.find(this.settings.modalId);this.elements={original:this.element,body:$(document.body),modal:e,dialog:e.find(".modal-dialog:first"),backdrop:null}},bindEvents:function(){if(this.unbindEvents(),this.settings.bindTarget){var e=this;this.elements.original.on("click",function(t){$(this).is("a")&&t.preventDefault(),$(this).prop("disabled")||e.show(e.elements.original)})}this.elements.modal.on("modal.on.initialized",$.proxy(this.settings.onInitialized,this));for(var t in this.settings.buttons){var s=this.settings.buttons[t];this.elements.modal.off(s.eventName,s.selector),this.elements.modal.on(s.eventName,s.selector,$.proxy(s.handler,this))}},unbindEvents:function(){this.elements.modal.off("modal.on.initialized"),this.settings.bindTarget&&this.elements.modal.off("click")},show:function(e){var t=this,s=$.Event("modal.on.show",{relatedTarget:e});this.elements.modal.trigger(s);var i=1060+10*$(".modal:visible").length;if(this.elements.modal.css("z-index",i),!this.isShown&&!s.isDefaultPrevented()){this.isShown=!0;var n=window.innerWidth;if(!n){var a=document.documentElement.getBoundingClientRect();n=a.right-Math.abs(a.left)}this.bodyIsOverflowing=document.body.clientWidth<n;var o=document.createElement("div");o.className="modal-scrollbar-measure",this.elements.body.append(o),this.scrollbarWidth=o.offsetWidth-o.clientWidth,this.elements.body[0].removeChild(o);parseInt(this.elements.body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.elements.body.addClass("modal-open"),$(window).on("resize.modal",$.proxy(this.adjustDialog,this)),this.elements.dialog.on("mousedown.modal.on.dismiss",function(){t.elements.modal.one("mouseup.modal.on.dismiss",function(e){$(e.target).is(t.elements.modal)&&(t.ignoreBackdropClick=!0)})});var s=$.Event("modal.on.shown",{relatedTarget:e});this.backdrop($.proxy(this.backdropCallback,this,s))}},hide:function(e){e&&e.preventDefault(),e=$.Event("modal.on.hide"),this.elements.modal.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,$(window).off("resize.modal"),$(document).off("modal.on.focusin"),this.elements.modal.removeClass("in").off("click.modal.on.dismiss").off("mouseup.modal.on.dismiss"),this.elements.dialog.off("mousedown.modal.on.dismiss"),$.support.transition&&this.elements.modal.hasClass("fade")?this.elements.modal.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(i):this.hideModal())},hideModal:function(){var e=this;this.elements.modal.hide(),this.backdrop(function(){e.elements.body.removeClass("modal-open"),e.elements.body.css("padding-right",e.originalBodyPad),e.elements.modal.trigger("modal.on.hidden")})},backdrop:function(e){var t=this,s=this.elements.modal.hasClass("fade")?"fade":"";if(this.isShown&&this.settings.backdrop){var i=$.support.transition&&s;if(this.elements.backdrop=$(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.elements.body),this.elements.modal.on("click.modal.on.dismiss",$.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.settings.backdrop?this.elements.modal[0].focus():this.hide()))},this)),i&&this.elements.backdrop[0].offsetWidth,this.elements.backdrop.addClass("in"),!e)return;i?this.elements.backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n):e()}else if(!this.isShown&&this.elements.backdrop){this.elements.backdrop.removeClass("in");var a=function(){t.elements.backdrop&&t.elements.backdrop.remove(),t.elements.backdrop=null,e&&e()};$.support.transition&&this.elements.modal.hasClass("fade")?this.elements.backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n):a()}else e&&e()},backdropCallback:function(e){this.elements.modal.parent().length||this.elements.modal.appendTo(this.elements.body),this.elements.modal.show(),this.elements.modal.scrollTop(0);var t=this.elements.modal.find(".modal-dialog:first"),s=document.documentElement.clientHeight,n=document.documentElement.clientWidth,a=t.height(),o=t.width();s>a&&t.css({position:"absolute",left:n/2-o/2,top:s/2-a/2,margin:0});var r=$.support.transition&&this.elements.modal.hasClass("fade");if(r&&this.elements.modal[0].offsetWidth,this.elements.modal.addClass("in"),$(document).off("modal.onfocusin"),$(document).on("modal.onfocusin",$.proxy(function(e){this.elements.modal[0]===e.target||this.elements.modal.has(e.target).length||this.elements.modal.trigger("focus")},this)),r){var l=this;this.elements.dialog.one("bsTransitionEnd",function(){l.elements.modal.trigger("focus").trigger(e)}),this.elements.dialog.emulateTransitionEnd(i)}else this.elements.modal.trigger("focus").trigger(e)},adjustDialog:function(){var e=this.elements.modal[0].scrollHeight>document.documentElement.clientHeight;this.elements.modal.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})}})}),function(e){"use strict";var t="modal",i=s.ui.controls.Modal;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i="上一年",n="下一年",a="年",o=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],r=function(){},l={enlangflag:!1,minYear:"1900",maxYear:"2099",position:"auto",monthsArr:o,split:"-",change:r},h={enlangflag:"enlangflag",minYear:"min-year",maxYear:"max-year",position:"position",split:"split"};this.Monthpicker=new e.Class({extend:s.ui.BaseControl},{defaults:l,attributeMap:h,settings:{},value:"",data:{},templates:{},init:function(e,s){if(this.element=$(e),!this.element.data("initialized")){this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.settings.enlangflag&&(i="Prev year",n="Next year",a="",o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.settings.monthsArr=o),this.year=(new Date).getFullYear(),this.buildHtml(),this.initElements(),this.render(),this.transferAttributes();this.bindEvents()}},buildHtml:function(){var e=this.element.data("plugin-id"),t='<div class="c-monthpicker-container"><span class="glyphicon-calendar" data-s-dropdown-id="#c-monthpicker-menu-'+e+'"></span><ul id="c-monthpicker-menu-'+e+'" class="monthpicker dropdown-menu"> <div class="monthpicker-control"><div class="icon-prev" title='+i+'><i class="glyphicon glyphicon-menu-left"></i></div><div class="calendar-year"><a class="btn-container"><span></span>'+a+'<i class="glyphicon glyphicon-menu-down"></i></a><div class="dropdown-menu calendar-years"></div></div><div class="icon-next" title="'+n+'"><i class="glyphicon glyphicon-menu-right"></i></div></div><div class="calendar-months"></div></ul></div>';this.container=$(t),this.element.before(this.container),this.container.prepend(this.element),this.element.attr("data-s-dropdown-id","#c-monthpicker-menu-"+e),this.element.is("input")&&this.element.attr("autocomplete","off")},initElements:function(){this.elements={view:this.element,monthpicker:this.container,menu:$(".monthpicker",this.container),icon:$(".glyphicon-calendar",this.container),prev:$(".monthpicker-control .icon-prev",this.container),next:$(".monthpicker-control .icon-next",this.container),calendarYear:$(".calendar-year",this.container),showYear:$(".calendar-year .btn-container span",this.container),showYearBtn:$(".calendar-year .btn-container",this.container),calendarYears:$(".calendar-year .calendar-years",this.container),calendarMonths:$(".calendar-months",this.container)},this.initMonthPicker();var e=this.elements.view.data("plugin-id");this.dropdown=new s.ui.controls.Dropdown(this.elements.view,{_pluginId:e}),this.dropdown1=new s.ui.controls.Dropdown(this.elements.icon,{_pluginId:e});var t=this;this.elements.menu.on("click",function(e){e.preventDefault(),e.stopPropagation(),t.elements.calendarYears.hide()})},bindEvents:function(){var e=this;this.elements.view.on("focus",$.proxy(function(t){e.elements.calendarYears.hide(),e.render()},this)),this.elements.icon.on("click",$.proxy(function(){this.elements.view.focus()},this)),this.elements.showYearBtn.on("click",$.proxy(this.showYearPanel,this)),this.elements.calendarYear.on("click","li",$.proxy(this.yearChanged,this)),this.elements.calendarMonths.on("click","li",$.proxy(this.monthChanged,this)),this.elements.view.on("blur",$.proxy(this.confirm,this)),this.elements.view.on("keydown",$.proxy(this.keyevent,this)),this.elements.view.on("onChange",$.proxy(this.settings.change,this)),this.elements.prev.on("click",$.proxy(this.clickPrev,this)),this.elements.next.on("click",$.proxy(this.clickNext,this))},initMonthPicker:function(){for(var e=this.settings.maxYear,t=this.settings.minYear,s='<ul class="monthselect">',i=0;i<12;i++)s+="<li data-value="+(i+1)+">"+o[i]+"</li>";s+="</ul>",this.elements.calendarMonths.html(s);for(var n='<ul class="yearselect">',a=t;a<=e;a++)n+="<li data-value="+a+">"+a+"</li>";n+="</ul>",this.elements.calendarYears.html(n)},transferAttributes:function(){this.element.prop("disabled")&&this.disable()},keyevent:function(e){switch(e.keyCode){case 13:this.confirm()}},render:function(){this.year||(this.year=(new Date).getFullYear()),this.elements.showYear.text(this.year);var e=this.elements.calendarYears.find("li[data-value="+this.year+"]");e.addClass("active").siblings().removeClass("active");var t=this.elements.calendarMonths.find("li[data-value="+this.month+"]");t.addClass("active").siblings().removeClass("active")},showYearPanel:function(e){e.preventDefault(),e.stopPropagation(),this.elements.calendarYears.show();var t=this.settings.minYear,s=this.year,i=s-t-3;i<0&&(i=0),i=26*i,this.elements.calendarYears.scrollTop(i)},yearChanged:function(e){var t=$(e.target),s=t.attr("data-value");this.year=s,this.elements.showYear.text(s),t.addClass("active").siblings().removeClass("active"),this.elements.calendarYears.hide(),this.elements.view.trigger("onChange",this.getValue())},monthChanged:function(e){var t=$(e.target),s=t.attr("data-value");this.month=s,t.addClass("active").siblings().removeClass("active"),this.elements.view.trigger("onChange",this.getValue()),
"function"==typeof this.settings.onMonthSelected&&this.settings.onMonthSelected()},confirm:function(e){var t=this.elements.view.val();""!==t&&0!==t.length||(t=null),this.setBindValue(t),this.render(),this.elements.view.trigger("onChange",this.getValue())},setBindValue:function(e){if(e){var t=moment(e,"YYYY-MM-DD");this.year=t.toObject().years,this.month=t.toObject().months+1,1*this.settings.minYear>1*this.year?this.year=this.settings.minYear:1*this.settings.maxYear<1*this.year&&(this.year=this.settings.maxYear)}else this.year=null,this.month=null},setValue:function(e){this.setBindValue(e),this.elements.view.val(e)},getValue:function(){if(this.year&&this.month){var e=parseInt(this.month);return e<10&&(e="0"+e),this.year+this.settings.split+e}return null},clickPrev:function(e){this.year>this.settings.minYear&&(this.year=parseInt(this.year)-1),this.elements.view.trigger("onChange",this.getValue()),this.render()},clickNext:function(e){this.year<this.settings.maxYear&&(this.year=parseInt(this.year)+1),this.elements.view.trigger("onChange",this.getValue()),this.render()},refresh:function(){},enable:function(){this.elements.view.prop("disabled",!1),this.container.removeClass("disabled"),this.elements.icon.removeClass("disabled")},disable:function(){this.elements.view.prop("disabled",!0),this.elements.icon.addClass("disabled"),this.container.addClass("disabled")},destroy:function(){},getApi:function(){var e=this,t={setValue:"setValue",getValue:"getValue"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="monthpicker",i=s.ui.controls.Monthpicker;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={group:!0,checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",change:void 0,placeholderValue:"",splitFormat:",",showCheckall:!1,groupCheck:!1,sorter:void 0},n={group:"group",placeholderValue:"placeholder-value",splitFormat:"split-format",showCheckall:"show-checkall",groupCheck:"group-check",name:"name"};this.Multiselect=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,settings:{},value:"",data:{},selects:{},init:function(e,s){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.chooseValue=[],this.buildHtml(),this.initElements(),this.transferAttributes(),this.bindEvents())},buildHtml:function(){var e=this.element.data("plugin-id"),t='<div class="c-multiselect-container">    <div class="dropdown">        <a class="btn btn-default c-selectex-btn c-multiselect-btn" data-s-dropdown-id="#c-multiselect-menu-'+e+'">           <span class="c-selectex-btn-text placeholder">'+this.settings.placeholderValue+'</span>           <span class="glyphicon glyphicon-menu-down"></span>       </a>       <ul id="c-multiselect-menu-'+e+'" class="dropdown-menu">        </ul>   </div> </div>';this.container=$(t),this.element.before(this.container),this.element.hide()},initElements:function(){this.elements={original:this.element,viewContainer:$(".c-multiselect-btn",this.container),view:$(".c-selectex-btn-text",this.container),menu:$(".dropdown-menu",this.container)},this.dropdown=new s.ui.controls.Dropdown(this.elements.viewContainer,{}),this.elements.menu.on("click",function(e){e.preventDefault(),e.stopPropagation()})},transferAttributes:function(){this.elements.view.attr("style",this.element.attr("style")),this.elements.view.show(),this.elements.view.attr("title",this.element.attr("title")),this.elements.view.attr("class",this.elements.view.attr("class")+" "+this.element.attr("class")),this.element.prop("disabled")&&this.disable()},bindEvents:function(){this.elements.menu.on("click","a",$.proxy(this.clickItem,this)),"function"==typeof this.settings.change&&this.elements.original.on("change",$.proxy(this.settings.change,this))},bindEventsInterface:function(){this.element},updateData:function(e){var t=[],s={},i={},n={};if(e){var a=e;this.settings.group||(a=[{options:e}]);for(var o=0;o<a.length;o++){var r=a[o];t.push(r);for(var l=0;l<r.options.length;l++){var h=r.options[l];h.value+""&&(i[h.value]=h.value),this.settings.group&&(n[h.value]||(n[h.value]=[]),n[h.value].push(o)),s[h.value]=h}}this.groupSource=t,this.map=s,this.showMap=i,this.lists=e,this.groupMap=n}},render:function(){if(this.sourceMap={},this.groupSource){var e=this.groupSource,t="";this.settings.showCheckall&&(t+='<li><dl><dd><a data-id="-1" data-value="-1"> <span data-s-checkall class="'+this.settings.uncheckedIcon+'"></span><label>全部</label></a></dd></dl></li>');for(var s=0,i=0;i<e.length;i++){var n=e[i];t+="<li><dl>",this.settings.group&&(t+=this.settings.groupCheck?'<dt><a data-id="-1" data-value="-1" data-group-id="'+i+'"><span class="'+this.settings.uncheckedIcon+'"></span><label>'+n.text+"</label></a></dt>":"<dt><label>"+n.text+"</label></dt>"),t+="<dd>";for(var a=0;a<n.options.length;a++)t+="<a data-id="+n.options[a].value+" data-value="+n.options[a].value+" title="+n.options[a].text+'><span class="'+this.settings.uncheckedIcon+'"></span><label>'+n.options[a].text+"</label></a>",s++,this.sourceMap[n.options[a].value]=n.options[a];t+="</dd></dl></li>"}this.elements.menu.html(t)}},setValue:function(e){if(e||0===e){this.elements.menu.find("span").attr("class",this.settings.uncheckedIcon);var t=e;"number"==typeof e&&(t=e+"");for(var s=t.split(this.settings.splitFormat),i=[],n=0;n<s.length;n++){var a=this.showMap[s[n]];this.map[a]&&(i.push(this.map[a]),this.checkOption(a))}this.chooseValue=i,this.relateCheck();var o=this.elements.menu.find("a>span").length,r=this.elements.menu.find("a>span.glyphicon.glyphicon-check").length;o-1===r&&this.elements.menu.find("span[data-s-checkall]").attr("class",this.settings.checkedIcon),this.elements.view.text(this.getShowValue()),this.container.attr("title",this.getShowValue()),this.refreshPlaceholder()}else this.chooseValue=[],this.elements.view.text(e),this.elements.view.text(e),this.container.attr("title",e),this.refreshPlaceholder()},sorterChooseValue:function(e){return this.chooseValue=this.settings.sorter?this.settings.sorter(e):e},relateCheck:function(){var e=this.chooseValue,t=this.groupSource,s=this.groupMap;if(this.settings.group)for(var i=[],n=this,a=0;a<e.length;a++)i=s[e[a].value],i.forEach(function(e){var s=t[e].options,i=!0;s.forEach(function(e){$('a[data-id="'+e.value+'"]',n.container).find("span").hasClass(n.settings.uncheckedIcon)&&(i=!1)}),i&&$('a[data-group-id="'+e+'"]',n.container).find("span").attr("class",n.settings.checkedIcon)})},getValue:function(){return this.chooseValue},getOnlyValue:function(){for(var e=[],t=0;t<this.chooseValue.length;t++)e.push(this.chooseValue[t].value);return e.join(this.settings.splitFormat)},getShowValue:function(){for(var e=[],t=0;t<this.chooseValue.length;t++)e.push(this.chooseValue[t].text);return e.join(this.settings.splitFormat)},checkOption:function(e){var t=$('a[data-id="'+e+'"]',this.container),s=t.find("span");s.attr("class",this.settings.checkedIcon)},clickItem:function(e){if(!$(e.target).closest("a").hasClass("disabled")){var t=$(e.target).closest("a"),s=t.attr("data-id"),i=t.find("span"),n=i.hasClass("glyphicon glyphicon-unchecked"),a=this.map[s],o=!1;if(t.attr("data-group-id")){var r=t.attr("data-group-id"),l=this.lists[r],h=$(e.target).closest("dl").find("dd");if(i.hasClass(this.settings.uncheckedIcon)){for(var c=0;c<l.options.length;c++){var d=$('a[data-id="'+l.options[c].value+'"]',this.container).find("span");d.hasClass(this.settings.uncheckedIcon)&&(d.attr("class",this.settings.checkedIcon),this.chooseValue.push(l.options[c]))}i.attr("class",this.settings.checkedIcon)}else{for(var c=0;c<l.options.length;c++){var d=$(h[c]).find("a > span");d.attr("class",this.settings.uncheckedIcon),this.chooseValue.splice(this.contains(this.chooseValue,l.options[c],{value:"value"}),1)}i.attr("class",this.settings.uncheckedIcon)}return this.settings.click&&this.settings.click(e,{text:t.find("label").text(),value:-1},n),this.elements.view.text(this.getShowValue()),this.refreshPlaceholder(),void this.elements.original.trigger("change",JSON.stringify(this.sorterChooseValue(this.chooseValue)))}if("-1"===s)return i.hasClass(this.settings.uncheckedIcon)?this.checkAll():this.unCheckAll(),void(this.settings.click&&this.settings.click(e,{text:t.find("label").text(),value:-1},n));if(i.hasClass(this.settings.uncheckedIcon))i.attr("class",this.settings.checkedIcon),this.chooseValue.push(a),o=!0;else{i.attr("class",this.settings.uncheckedIcon);for(var c=0;c<this.chooseValue.length;c++)if(this.chooseValue[c].value===a.value){this.chooseValue.splice(c,1);break}o=!1}this.elements.view.text(this.getShowValue()),this.refreshPlaceholder(),this.elements.original.trigger("change",JSON.stringify(this.sorterChooseValue(this.chooseValue))),this.sourceMap&&this.settings.click&&this.settings.click(e,this.sourceMap[t.attr("data-value")],n)}},duplicate:function(e,t,s){for(var i=0;i<e.length;i++)if(e[i][s]===t[s])return!0;return!1},contains:function(e,t,s){var i=!0;if(Array.isArray(e)||(e=[e]),"object"!=typeof t)return e.indexOf(t);for(var n=0;n<e.length;n++){i=!0;for(var a in s)t[s[a]]!=e[n][s[a]]&&(i=!1);if(i)return n}return-1},checkAll:function(){var e=[];if(this.settings.groupCheck){this.chooseValue.splice(0,this.chooseValue.length);for(var t=0;t<this.lists.length;t++)for(var s=this.lists[t].options,i=0;i<s.length;i++)this.duplicate(e,s[i],"value")||(e.push(s[i]),this.chooseValue.push(s[i]));this.elements.menu.find("dd>a>span").attr("class",this.settings.checkedIcon),this.elements.view.text(this.getShowValue()),this.refreshPlaceholder(),this.elements.original.trigger("change",JSON.stringify(this.sorterChooseValue(this.chooseValue)))}else{this.chooseValue.splice(0,this.chooseValue.length);for(var t=0;t<this.lists.length;t++)this.chooseValue.push(this.lists[t]);this.elements.menu.find("dd>a>span").attr("class",this.settings.checkedIcon),this.elements.view.text(this.getShowValue()),this.refreshPlaceholder(),this.elements.original.trigger("change",JSON.stringify(this.sorterChooseValue(this.chooseValue)))}},unCheckAll:function(){this.chooseValue.splice(0,this.chooseValue.length),this.elements.menu.find("dd>a>span").attr("class",this.settings.uncheckedIcon),this.elements.view.text(this.getShowValue()),this.refreshPlaceholder(),this.elements.original.trigger("change",JSON.stringify(this.chooseValue))},refreshPlaceholder:function(){this.elements.view.text()===this.settings.placeholderValue||""===this.elements.view.text()?(this.elements.view.addClass("placeholder"),this.elements.view.text(this.settings.placeholderValue)):this.elements.view.removeClass("placeholder")},refresh:function(){},enable:function(){this.elements.viewContainer.removeClass("disabled")},disable:function(){this.elements.viewContainer.addClass("disabled")},destroy:function(){}})}),function(e){"use strict";var t="multiselect",i=s.ui.controls.Multiselect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={},n={};this.Radio=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,settings:{},value:"",data:{},templates:{},init:function(e,s){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.buildHtml(),this.buildEvent())},buildHtml:function(){this.element.find("input").attr("type");this.element.find("li").each(function(){$(this).find("input").attr({"class":"labelauty",style:"display: none"});var e=$(this).find("input").attr("data-labelauty"),t="<label><span class='labelauty-unchecked-image'></span><span class='labelauty-unchecked'>"+e+"</span><span class='labelauty-checked-image'></span><span class='labelauty-checked'>"+e+"</span></label>";$(this).append(t)})},buildEvent:function(){this.element;this.element.find("label").click(function(){"disabled"!=$(this.previousElementSibling).attr("disabled")&&("checkbox"==$(this.previousElementSibling).attr("type")&&(this.previousElementSibling.checked===!0?this.previousElementSibling.checked=!1:this.previousElementSibling.checked=!0),"radio"==$(this.previousElementSibling).attr("type")&&(this.previousElementSibling.checked=!0))})}})}),function(e){"use strict";var t="Radio",i=s.ui.controls.Radio;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={left:"",leftAll:"",leftSelected:"",right:"",rightAll:"",rightSelected:"",undo:"",redo:"",submitAllLeft:!1,submitAllRight:!1,startUp:function(e,t){t.find("option").each(function(t,s){e.find('option[value="'+s.value+'"]').remove()})},beforeMoveToRight:function(e,t,s){return!0},afterMoveToRight:function(e,t,s){},beforeMoveToLeft:function(e,t,s){return!0},afterMoveToLeft:function(e,t,s){},sort:function(e,t){return"NA"==e.innerHTML?1:"NA"==t.innerHTML?-1:e.innerHTML>t.innerHTML?1:-1}},n={left:"left",leftAll:"left-all",leftSelected:"left-selected",right:"right",rightSelected:"right-selected",rightAll:"right-all"};this.RightSelect=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,undoStack:[],redoStack:[],init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s);var i=this.element.prop("id")||"rightselect";this.settings.left=this.settings.left.length?this.settings.left:"#"+i+"_leftSelect",this.settings.leftSelected=this.settings.leftSelected.length?this.settings.leftSelected:"#"+i+"_leftSelected",this.settings.leftAll=this.settings.leftAll.length?this.settings.leftAll:"#"+i+"_leftAll",this.settings.right=this.settings.right.length?this.settings.right:"#"+i+"_rightSelect",this.settings.rightSelected=this.settings.rightSelected.length?this.settings.rightSelected:"#"+i+"_rightSelected",this.settings.rightAll=this.settings.rightAll.length?this.settings.rightAll:"#"+i+"_rightAll",this.settings.undo=this.settings.undo.length?this.settings.undo:"#"+i+"_undo",this.settings.redo=this.settings.redo.length?this.settings.redo:"#"+i+"_redo",this.buildHtml(),this.initElements(),this.bindEvents(),this.settings.keepRenderingSort&&(this.settings.sort=function(e,t){return $(e).data("position")>$(t).data("position")?1:-1},this.elements.left.find("option").each(function(e,t){$(t).data("position",e)}),this.elements.right.find("option").each(function(e,t){$(t).data("position",e)}))},buildHtml:function(){var e='<input type="text" name="q" class="form-control" placeholder="Search..." />';this.settings.search_left&&$(this.settings.left).before($(e)),this.settings.search_right&&$(this.settings.right).before($(e))},initElements:function(){this.elements={original:this.element,left:$(this.settings.left),leftSelected:$(this.settings.leftSelected),rightSelected:$(this.settings.rightSelected),right:$(this.settings.right),leftAll:$(this.settings.leftAll),rightAll:$(this.settings.rightAll),undo:$(this.settings.undo),redo:$(this.settings.redo)},this.settings.search_left&&(this.elements.search_left=this.elements.left.prev()),this.settings.search_right&&(this.elements.search_right=this.elements.right.prev()),"function"==typeof this.settings.startUp&&this.settings.startUp(this.elements.left,this.elements.right),this.settings.keepRenderingSort&&"function"==typeof this.settings.sort&&(this.elements.left.find("option").sort(this.settings.sort).appendTo(this.elements.left),this.elements.right.each(function(e,t){0!==$(t).find("option").length&&$(t).find("option").sort(this.settings.sort).appendTo(t)}))},bindEvents:function(){var e=this;this.elements.left.on("dblclick","option",function(t){t.preventDefault(),e.moveToRight(this,t)}),this.elements.right.on("dblclick","option",function(t){t.preventDefault(),e.moveToLeft(this,t)}),this.elements.search_left&&this.elements.search_left.on("keyup",$.proxy(this._filteOptions,this,this.elements.left)),this.elements.search_right&&this.elements.search_right.on("keyup",$.proxy(this._filteOptions,this,this.elements.right)),this.elements.right.closest("form").on("submit",function(t){e.elements.left.children().prop("selected",e.settings.submitAllLeft),e.elements.right.children().prop("selected",e.settings.submitAllRight)}),(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.indexOf("Trident/")>0||navigator.userAgent.indexOf("Edge/")>0)&&(this.elements.left.dblclick(function(t){e.elements.rightSelected.trigger("click")}),this.elements.right.dblclick(function(t){e.elements.leftSelected.trigger("click")})),this.elements.rightSelected.on("click",function(t){t.preventDefault();var s=e.elements.left.find("option:selected");s&&e.moveToRight(s,t),$(this).blur()}),this.elements.leftSelected.on("click",function(t){t.preventDefault();var s=e.elements.right.find("option:selected");s&&e.moveToLeft(s,t),$(this).blur()}),this.elements.rightAll.on("click",function(t){t.preventDefault();var s=e.elements.left.find("option");s&&e.moveToRight(s,t),$(this).blur()}),this.elements.leftAll.on("click",function(t){t.preventDefault();var s=e.elements.right.find("option");s&&e.moveToLeft(s,t),$(this).blur()}),this.elements.undo.on("click",function(t){t.preventDefault(),e.undo(t)}),this.elements.redo.on("click",function(t){t.preventDefault(),e.redo(t)})},_filteOptions:function(e,t){var s=new RegExp($(t.target).val(),"ig");return navigator.userAgent.match(/MSIE/i)||navigator.userAgent.indexOf("Trident/")>0||navigator.userAgent.indexOf("Edge/")>0?void e.find("option, span").each(function(e,t){var i=$(t);if(i.text().search(s)>=0){if(i.is("option"))return;i.data("ref")&&i.replaceWith(i.data("ref"))}else{if(i.is("span"))return;var n=i.text(),a=i.val(),o=$("<span/>").text(n).val(a).hide(),r=i.clone();i.replaceWith(o),o.data("ref",r)}}):void e.find("option").each(function(e,t){t.text.search(s)>=0?$(t).show():$(t).hide()})},moveToRight:function(e,t,s,i){if("function"==typeof this.settings.moveToRight)this.settings.moveToRight(this,e,t,s,i);else{if("function"==typeof this.settings.beforeMoveToRight&&!s&&!this.settings.beforeMoveToRight(this.elements.left,this.elements.right,e))return!1;this.elements.right.append(e),i||(this.undoStack.push(["right",e]),this.redoStack=[]),"function"!=typeof this.settings.sort||s||this.elements.right.find("option").sort(this.settings.sort).appendTo(this.elements.right),"function"!=typeof this.settings.afterMoveToRight||s||this.settings.afterMoveToRight(this.elements.left,this.elements.right,e)}},moveToLeft:function(e,t,s,i){if("function"==typeof this.settings.moveToLeft)this.settings.moveToLeft(this,e,t,s,i);else{if("function"==typeof this.settings.beforeMoveToLeft&&!s&&!this.settings.beforeMoveToLeft(this.elements.left,this.elements.right,e))return!1;this.elements.left.append(e),i||(this.undoStack.push(["left",e]),this.redoStack=[]),"function"!=typeof this.settings.sort||s||this.elements.left.find("option").sort(this.settings.sort).appendTo(this.elements.left),"function"!=typeof this.settings.afterMoveToLeft||s||this.settings.afterMoveToLeft(this.elements.left,this.elements.right,e)}},undo:function(e){var t=this.undoStack.pop();if(t)switch(this.redoStack.push(t),t[0]){case"left":this.moveToRight(t[1],e,!1,!0);break;case"right":this.moveToLeft(t[1],e,!1,!0)}},redo:function(e){var t=this.redoStack.pop();if(t)switch(this.undoStack.push(t),t[0]){case"left":this.moveToLeft(t[1],e,!1,!0);break;case"right":this.moveToRight(t[1],e,!1,!0)}}})}),function(e){"use strict";var t="rightselect",i=s.ui.controls.RightSelect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={onSelected:void 0,placeholderValue:"",position:"down,left",down:"dropdown",up:"dropup",selectFirst:!1},n={placeholderValue:"placeholder-value",position:"position",selectFirst:"select-first"};this.Selectex=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,settings:{},value:"",data:{},selects:{},init:function(e,s){if(this.element=$(e),!this.element.data("initialized")){this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.buildHtml(),this.initElements(),this.transferAttributes(),this.bindEvents(),this.parse();var i=this;$.when(this.getData()).done(function(){i.render()})}},getData:function(){var e=$.Deferred();if(this.settings.data){var t=$.extend(!0,[],this.settings.data);return this.updateData(t),delete this.settings.data,e.resolve(),e.promise()}return e.resolve(),e.promise()},buildHtml:function(){var e=this.element.data("plugin-id"),t='<div tabindex="0" class="c-selectex-container">    <div>        <a class="btn btn-default c-selectex-btn" data-s-dropdown-id="#c-selectex-menu-'+e+'">           <span tabindex="0" class="c-selectex-btn-text"></span>           <span class="glyphicon glyphicon-menu-down"></span>       </a>       <ul id="c-selectex-menu-'+e+'" class="dropdown-menu">        </ul>   </div> </div>';this.container=$(t),this.element.before(this.container),this.element.hide(),this.autoUpPosition()},initElements:function(){this.elements={original:this.element,viewContainer:$(".c-selectex-btn",this.container),view:$(".c-selectex-btn-text",this.container),menu:$(".dropdown-menu",this.container)},this.dropdown=new s.ui.controls.Dropdown(this.elements.viewContainer,{})},autoUpPosition:function(){var e=this.settings.position.split(","),t=e[0],s=e[1],i="up"===t?this.settings.up:this.settings.down;$("div",this.container).addClass(i),this.settings.isRightPosition=!1,"right"===s&&(this.settings.isRightPosition=!0)},autoRightPosition:function(){if(this.settings.isRightPosition){var e=this.elements.viewContainer.width(),t=this.elements.menu.width(),s=e-t;this.elements.menu.css("margin-left",s)}},transferAttributes:function(){this.elements.view.attr("style",this.element.attr("style")),this.elements.view.css("display","block"),this.elements.view.attr("title",this.element.attr("title")),this.elements.view.attr("class",this.elements.view.attr("class")+" "+this.element.attr("class")),this.element.prop("disabled")&&this.disable()},bindEvents:function(){this.elements.viewContainer.on("click",$.proxy(this.setScrollTop,this)),this.elements.menu.on("click","li",$.proxy(this.clickItem,this)),"function"==typeof this.settings.onSelected&&this.elements.view.on("onSelected",$.proxy(this.settings.onSelected,this)),this.container.on("keydown",$.proxy(this.keyevent,this))},keyevent:function(e){switch(e.keyCode){case 9:case 13:this.select();break;case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next()}e.stopPropagation()},next:function(e){var t=this.elements.menu.find(".active").removeClass("active"),s=t.next();s.length||(s=$(this.elements.menu.find("li")[0])),s.addClass("active"),this.setScrollTop()},prev:function(e){var t=this.elements.menu.find(".active").removeClass("active"),s=t.prev();s.length||(s=this.elements.menu.find("li").last()),s.addClass("active"),this.setScrollTop()},select:function(){if(!this.elements.menu.find(".active").hasClass("disabled")){var e=this.elements.menu.find(".active a").data("value");this.selectId=e;var t=this.map[e];this.elements.view.text(t.text),this.elements.view.attr("title",this.elements.view.text()),this.elements.view.trigger("onSelected",t),this.dropdown.toggle()}},bindEventsInterface:function(){this.element},parse:function(){var e,t=[],s=0,i={},n={};this.element.find("option").each(function(){var a=$(this),o={text:a.text(),value:a.val(),disabled:a.prop("disabled")};t.push(o),e=a.val()||a.text(),i[e]=o,a.val()&&(n[e]=a.val()),s++}),this.source=t,this.map=i,this.showMap=n},updateData:function(e){var t,s=[],i={},n={};if(e){for(var a=0;a<e.length;a++){var o=e[a];s.push(o),t=o.value+""||o.text,i[t]=o,o.value+""&&(n[t]=o.value)}this.source=s,this.map=i,this.showMap=n}},setModelValue:function(e){this.selectId=e},setValue:function(e){this.setModelValue(e),this.render()},getValue:function(e){var t;return t="undefined"==typeof e||e===!1?this.selectId:this.map[this.selectId]},getIndex:function(e){if(!this.source)return 0;for(var t=0;t<this.source.length;t++)if(this.source[t].value===e)return t;return 0},setScrollTop:function(e){var t=this.elements.menu.find("li.active").eq(0);if(t.length>0){var s=t.position().top-this.elements.menu.find("li:first").position().top;s=s<150?0:s-150,this.elements.menu.scrollTop(s)}},render:function(){if(this.source){this.elements.view.text("");var e=this.source,t=$.extend(!0,[],e);e=this.replaceParseData(t),this.elements.menu.html("");for(var s=0;s<e.length;s++){var i=e[s],n=$("<li/>"),a=$("<a/>");(i.unselectable||i.disabled)&&n.attr("class","disabled"),a.attr("title",i.text).attr("data-id",""+s).attr("data-value",i.value).html(i.text),n.html(a),this.elements.menu.append(n)}var o=this.elements.menu.find('li a[data-value="'+this.selectId+'"]').parent();if(o.length)o.addClass("active"),this.elements.view.text(o.text()),this.elements.view.attr("title",this.elements.view.text());else if(this.elements.menu.find("li").length&&this.settings.selectFirst){var r=this.elements.menu.find("li").eq(0),l=r.find("a").attr("data-value"),i=this.map[l]||this.map[r.find("a").text()];this.elements.view.trigger("onSelected",i)}this.autoRightPosition()}},clickItem:function(e){var t=$(e.target);if(t.is("li")&&(t=t.find("a")),!t.parent("li").hasClass("disabled")){var s=t.attr("data-value")||t.text();this.selectId=s,t.parent("li").addClass("active").siblings().removeClass("active");var i=this.map[s];this.elements.view.text(i.text),this.elements.view.attr("title",this.elements.view.text()),this.elements.view.trigger("onSelected",i),this.dropdown.toggle(e)}},refresh:function(){},enable:function(){this.elements.viewContainer.removeClass("disabled"),this.elements.viewContainer.prop("disabled",!1)},disable:function(){this.elements.viewContainer.addClass("disabled"),this.elements.viewContainer.prop("disabled",!0)},destroy:function(){},getApi:function(){var e=this,t={setValue:"setValue",getValue:"getValue",updateData:"updateData"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="selectex",i=s.ui.controls.Selectex;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={map:{text:"text",value:"value"},multiple:!0,itemsType:void 0,selectedItems:[],returnValue:[],click:function(){},dblclick:function(){},mouseover:function(){},mouseout:function(){}},n={};this.Selectlist=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,settings:{},init:function(e,s){this.$element=this.element=$(e);this.events={click:function(e){var t=$(e.target).is("li")?$(e.target):$(e.target).parent("li");t.is("li")&&!t.hasClass("c-selectlist-disabled")&&(this.settings.multiple?$(t).toggleClass("c-selectlist-active"):($(t).siblings("li.c-selectlist-active").removeClass("c-selectlist-active"),$(t).addClass("c-selectlist-active")),this.selectedItem(),this.settings.click.apply($(e.target),[e,t.data("s-value")]))},dblclick:function(e){var t=$(e.target);t.is("li")&&!t.hasClass("c-selectlist-disabled")&&this.settings.dblclick.apply($(e.target),[e,t.data("s-value")])},mouseover:function(e){var t=$(e.target);t.is("li")&&!t.hasClass("c-selectlist-disabled")&&this.settings.mouseover.apply($(e.target),[e,t.data("s-value")])},mouseout:function(e){var t=$(e.target);t.is("li")&&!t.hasClass("c-selectlist-disabled")&&this.settings.mouseout.apply($(e.target),[e,t.data("s-value")])}},this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.chooseValue=[],this.settings.dataSource=this.settings.dataSource||[],this.buildHtml(),this.initElements(),this.bindEvents())},buildHtml:function(){for(var e,t=$('<div class="c-selectlist-container"><ul></ul></div>'),s=this.settings.dataSource,i=this.settings.map.text,n=0;n<s.length;n++)e="object"==typeof s[n]?$('<li onselectstart="return false">'+s[n][i]+"</li>"):$('<li onselectstart="return false">'+s[n]+"</li>"),e.data("s-value",s[n]),t.find("ul").append(e);this.settings.itemsType=typeof s[0],this.$element.html(t)},initElements:function(){this.elements={}},transferAttributes:function(){},bindEvents:function(){for(var e in this.events)this.$element.on(e,$.proxy(this.events[e],this))},bindEventsInterface:function(){this.element},setData:function(e){this.destroy(),this.settings.selectedItems=[],this.settings.dataSource=e,this.buildHtml(),this.bindEvents()},addItem:function(e){var t,s,i=this.settings.map.text;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)t=e[n],s="object"==typeof t?$('<li onselectstart="return false">'+t[i]+"</li>"):$('<li onselectstart="return false">'+t+"</li>"),s.data("s-value",t),this.$element.find("ul").append(s)},coverItem:function(e){var t,s,i=this.settings.map.text;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)t=e[n],s="object"==typeof t?$('<li onselectstart="return false">'+t[i]+"</li>"):$('<li onselectstart="return false">'+t+"</li>"),s.data("s-value",t),this.$element.find("ul").html(s)},getItems:function(){var e=[];return this.$element.find("li").each(function(t,s){e.push($(s).data("s-value"))}),e},getCheckedItems:function(){var e=[];return this.$element.find("li.c-selectlist-checked").each(function(t,s){e.push($(s).data("s-value"))}),e},selectedItem:function(){var e=[];this.settings.selectedItems=[],this.$element.find("li.c-selectlist-active").each(function(t,s){e.push($(s).data("s-value"))}),this.settings.selectedItems=e},getSelectedItems:function(){var e=[],t=this.settings.returnValue,s=this.settings.itemsType,i=this.settings.selectedItems;if("object"==s&&t.length>0){for(var n=0;n<i.length;n++){for(var a=new Object({}),o=0;o<t.length;o++)a[t[o]]=i[n][t[o]];e.push(a)}return e}return this.settings.selectedItems},clearCheckedItems:function(){this.$element.find("li").removeClass("c-selectlist-checked")},clearSelectedItems:function(){this.$element.find("li").removeClass("c-selectlist-active")},deleteItem:function(e){this.actionType(e,"deleteItem",!0)},setSelectedItem:function(e){this.actionType(e,"setSelectedItem",!0)},setCheckedItems:function(e){this.actionType(e,"setCheckedItems")},unCheckedItems:function(e){this.actionType(e,"unCheckedItems")},setItemDisabled:function(e){this.actionType(e,"setItemDisabled",!0)},actionType:function(e,t,s){Array.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)"object"==this.settings.itemsType?this.isObject(e[i],t):this.isString(e[i],t);s&&this.selectedItem()},isObject:function(e,t){var s=this.settings.map.value;this.$element.find("li").each(function(i,n){if($(n).data("s-value")[s]===e[s])if("setItemDisabled"===t)$(n).addClass("c-selectlist-disabled").removeClass("c-selectlist-active");else if("setSelectedItem"===t){if($(n).hasClass("c-selectlist-disabled"))return;$(n).addClass("c-selectlist-active")}else"deleteItem"===t?$(n).remove():"setCheckedItems"===t?$(n).addClass("c-selectlist-checked"):"unCheckedItems"===t&&$(n).removeClass("c-selectlist-checked")})},isString:function(e,t){this.$element.find("li").each(function(s,i){if($(i).data("s-value")===e)if("setItemDisabled"===t)$(i).addClass("c-selectlist-disabled").removeClass("c-selectlist-active");else if("setSelectedItem"===t){if($(i).hasClass("c-selectlist-disabled"))return;$(i).addClass("c-selectlist-active")}else"deleteItem"===t?$(i).remove():"setCheckedItems"===t?$(i).addClass("c-selectlist-checked"):"unCheckedItems"===t&&$(i).removeClass("c-selectlist-checked");
})},getApi:function(){var e=this,t={setData:"setData",setSelectedItem:"setSelectedItem",getSelectedItems:"getSelectedItems",setItemDisabled:"setItemDisabled",addItem:"addItem",coverItem:"coverItem",getItems:"getItems",deleteItem:"deleteItem",setCheckedItems:"setCheckedItems",unCheckedItems:"unCheckedItems",getCheckedItems:"getCheckedItems"},i=s.utilities.buildApi(e,t);return i},destroy:function(){for(var e in this.events)this.$element.off(e)},refresh:function(){},enable:function(){},disable:function(){}})}),function(e){"use strict";var t="selectlist",i=s.ui.controls.Selectlist;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),function(e,t,s,i){"use strict";function n(t,s){this.element=e(t),this.settings=e.extend({},o,s),this._defaults=o,this._name=a,this.init()}var a="sidebar",o={toggle:!0,doubleTapToGo:!1};n.prototype={init:function(){var t=this.element,i=this.settings.toggle,n=this;this.isIE()<=9?(t.find("li.active").has("ul").children("ul").collapse("show"),t.find("li").not(".active").has("ul").children("ul").collapse("hide")):(t.find("li.active").has("ul").children("ul").addClass("collapse in"),t.find("li").not(".active").has("ul").children("ul").addClass("collapse")),n.settings.doubleTapToGo&&t.find("li.active").has("ul").children("a").addClass("doubleTapToGo");var o=this;t.find("li").has("ul").children("a").on("click."+a,function(t){if(t.preventDefault(),n.settings.doubleTapToGo&&n.doubleTapToGo(e(this))&&"#"!==e(this).attr("href")&&""!==e(this).attr("href"))return t.stopPropagation(),void(s.location=e(this).attr("href"));var a=e(this).parent("li").toggleClass("active").children("ul");a.hasClass("in")?(o.isIE()<=9&&a.hide(),a.removeClass("in")):(o.isIE()<=9&&a.show(),a.addClass("in")),i&&e(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide")})},isIE:function(){for(var e,t=3,i=s.createElement("div"),n=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",n[0];)return t>4?t:e},doubleTapToGo:function(e){var t=this.element;return e.hasClass("doubleTapToGo")?(e.removeClass("doubleTapToGo"),!0):e.parent().children("ul").length?(t.find(".doubleTapToGo").removeClass("doubleTapToGo"),e.addClass("doubleTapToGo"),!1):void 0},destroy:function(){this.element.off("."+a),this.element.removeData(a)}},e.fn[a]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new n(this,t))}),this}}(jQuery,window,document),Jx()["package"]("s.ui.controls",function(e){"use strict";function t(e,t){return e+".touchspin_"+t}function i(e,s){return $.map(e,function(e){return t(e,s)})}var n=0,a={min:0,max:100,defaultValue:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalButtons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default"},o={min:"min",max:"max",defaultValue:"default-value",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalButtons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class"};this.Spinner=new e.Class({extend:s.ui.BaseControl},{defaults:a,attributeMap:o,init:function(e,t){return"destroy"===t?void this.each(function(){var e=$(e),t=e.data();$(document).off(i(["mouseup","touchend","touchcancel","mousemove","touchmove","scroll","scrollstart"],t.spinnerid).join(" "))}):(n+=1,this.element=$(e),this.element_data=this.element.data(),this.elements,this.settings,this.container,this.value,this.downSpinTimer,this.upSpinTimer,this.downDelayTimeout,this.upDelayTimeout,this.spincount=0,this.spinning=!1,this.element.is("input")?void(this.element.data("alreadyinitialized")||(this.element.data("alreadyinitialized",!0),this.element.data("spinnerid",n),this.initSettings(),this._setInitval(),this._checkValue(),this._buildHtml(),this._initElements(),this._hideEmptyPrefixPostfix(),this._bindEvents(),this._bindEventsInterface(),this.elements.input.css("display","block"))):void console.log("Must be an input."))},_setInitval:function(){""!==this.settings.defaultValue&&""===this.element.val()&&this.element.val(this.settings.defaultValue)},changeSettings:function(e){this._updateSettings(e),this._checkValue();var t=this.elements.input.val();""!==t&&(t=Number(this.elements.input.val()),this.elements.input.val(t.toFixed(this.settings.decimals)))},_updateSettings:function(e){this.settings=$.extend({},this.settings,e)},_buildHtml:function(){var e=this.element.val(),t=this.element.parent();""!==e&&(e=Number(e).toFixed(this.settings.decimals)),this.element.data("initvalue",e).val(e),this.element.addClass("form-control"),t.hasClass("input-group")?this._advanceInputGroup(t):this._buildInputGroup()},_advanceInputGroup:function(e){e.addClass("bootstrap-spinner");var t,s,i=this.element.prev(),n=this.element.next(),a='<span class="input-group-addon bootstrap-spinner-prefix">'+this.settings.prefix+"</span>",o='<span class="input-group-addon bootstrap-spinner-postfix">'+this.settings.postfix+"</span>";i.hasClass("input-group-btn")?(t='<button class="'+this.settings.buttondown_class+' bootstrap-spinner-down" type="button">-</button>',i.append(t)):(t='<span class="input-group-btn"><button class="'+this.settings.buttondown_class+' bootstrap-spinner-down" type="button">-</button></span>',$(t).insertBefore(this.element)),n.hasClass("input-group-btn")?(s='<button class="'+this.settings.buttonup_class+' bootstrap-spinner-up" type="button">+</button>',n.prepend(s)):(s='<span class="input-group-btn"><button class="'+this.settings.buttonup_class+' bootstrap-spinner-up" type="button">+</button></span>',$(s).insertAfter(this.element)),$(a).insertBefore(this.element),$(o).insertAfter(this.element),this.container=e},_buildInputGroup:function(){var e;e=this.settings.verticalButtons?'<div class="input-group bootstrap-spinner"><span class="input-group-addon bootstrap-spinner-prefix">'+this.settings.prefix+'</span><span class="input-group-addon bootstrap-spinner-postfix">'+this.settings.postfix+'</span><span class="input-group-btn-vertical"><button class="'+this.settings.buttondown_class+' bootstrap-spinner-up" type="button"><i class="'+this.settings.verticalupclass+'"></i></button><button class="'+this.settings.buttonup_class+' bootstrap-spinner-down" type="button"><i class="'+this.settings.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-spinner"><span class="input-group-btn"><button class="'+this.settings.buttondown_class+' bootstrap-spinner-down" type="button">-</button></span><span class="input-group-addon bootstrap-spinner-prefix">'+this.settings.prefix+'</span><span class="input-group-addon bootstrap-spinner-postfix">'+this.settings.postfix+'</span><span class="input-group-btn"><button class="'+this.settings.buttonup_class+' bootstrap-spinner-up" type="button">+</button></span></div>',this.container=$(e).insertBefore(this.element),$(".bootstrap-spinner-prefix",this.container).after(this.element),this.element.hasClass("input-sm")?this.container.addClass("input-group-sm"):this.element.hasClass("input-lg")&&this.container.addClass("input-group-lg")},_initElements:function(){this.elements={down:$(".bootstrap-spinner-down",this.container),up:$(".bootstrap-spinner-up",this.container),input:$("input",this.container),prefix:$(".bootstrap-spinner-prefix",this.container).addClass(this.settings.prefix_extraclass),postfix:$(".bootstrap-spinner-postfix",this.container).addClass(this.settings.postfix_extraclass)}},_hideEmptyPrefixPostfix:function(){""===this.settings.prefix&&this.elements.prefix.hide(),""===this.settings.postfix&&this.elements.postfix.hide()},_bindEvents:function(){var e=this;this.element.on("keydown",function(t){var s=t.keyCode||t.which;38===s?("up"!==e.spinning&&(e.upOnce(),e.startUpSpin()),t.preventDefault()):40===s&&("down"!==e.spinning&&(e.downOnce(),e.startDownSpin()),t.preventDefault())}),this.element.on("keyup",function(t){var s=t.keyCode||t.which;38===s?e.stopSpin():40===s&&e.stopSpin()}),this.element.on("blur",function(){e._checkValue()}),this.elements.down.on("keydown",function(t){var s=t.keyCode||t.which;32!==s&&13!==s||("down"!==e.spinning&&(e.downOnce(),e.startDownSpin()),t.preventDefault())}),this.elements.down.on("keyup",function(t){var s=t.keyCode||t.which;32!==s&&13!==s||e.stopSpin()}),this.elements.up.on("keydown",function(t){var s=t.keyCode||t.which;32!==s&&13!==s||("up"!==e.spinning&&(e.upOnce(),e.startUpSpin()),t.preventDefault())}),this.elements.up.on("keyup",function(t){var s=t.keyCode||t.which;32!==s&&13!==s||e.stopSpin()}),this.elements.down.on("mousedown.spinner",function(t){e.elements.down.off("touchstart.spinner"),e.element.is(":disabled")||(e.downOnce(),e.startDownSpin(),t.preventDefault(),t.stopPropagation())}),this.elements.down.on("touchstart.spinner",function(t){e.elements.down.off("mousedown.spinner"),this.element.is(":disabled")||(e._budownOnce(),e.startDownSpin(),t.preventDefault(),t.stopPropagation())}),this.elements.up.on("mousedown.spinner",function(t){e.elements.up.off("touchstart.spinner"),e.element.is(":disabled")||(e.upOnce(),e.startUpSpin(),t.preventDefault(),t.stopPropagation())}),this.elements.up.on("touchstart.spinner",function(t){e.elements.up.off("mousedown.spinner"),e.element.is(":disabled")||(e.upOnce(),e.startUpSpin(),t.preventDefault(),t.stopPropagation())}),this.elements.up.on("mouseout touchleave touchend touchcancel",function(t){e.spinning&&(t.stopPropagation(),e.stopSpin())}),this.elements.down.on("mouseout touchleave touchend touchcancel",function(t){e.spinning&&(t.stopPropagation(),e.stopSpin())}),this.elements.down.on("mousemove touchmove",function(t){e.spinning&&(t.stopPropagation(),t.preventDefault())}),this.elements.up.on("mousemove touchmove",function(t){e.spinning&&(t.stopPropagation(),t.preventDefault())}),$(document).on(i(["mouseup","touchend","touchcancel"],n).join(" "),function(t){e.spinning&&(t.preventDefault(),e.stopSpin())}),$(document).on(i(["mousemove","touchmove","scroll","scrollstart"],n).join(" "),function(t){e.spinning&&(t.preventDefault(),e.stopSpin())}),this.element.on("mousewheel DOMMouseScroll",function(t){if(e.settings.mousewheel&&e.element.is(":focus")){var s=t.originalEvent.wheelDelta||-t.originalEvent.deltaY||-t.originalEvent.detail;t.stopPropagation(),t.preventDefault(),s<0?e.downOnce():e.upOnce()}})},_bindEventsInterface:function(){var e=this;this.element.on("spinner.uponce",function(){e.stopSpin(),e.upOnce()}),this.element.on("spinner.downonce",function(){e.stopSpin(),e.downOnce()}),this.element.on("spinner.startupspin",function(){e.startUpSpin()}),this.element.on("spinner.startdownspin",function(){e.startDownSpin()}),this.element.on("spinner.stopspin",function(){e.stopSpin()}),this.element.on("spinner.updatesettings",function(t,s){e.changeSettings(s)})},_forcestepdivisibility:function(e){switch(this.settings.forcestepdivisibility){case"round":return(Math.round(e/this.settings.step)*this.settings.step).toFixed(this.settings.decimals);case"floor":return(Math.floor(e/this.settings.step)*this.settings.step).toFixed(this.settings.decimals);case"ceil":return(Math.ceil(e/this.settings.step)*this.settings.step).toFixed(this.settings.decimals);default:return e}},_checkValue:function(){var e,t,s;e=this.element.val(),""!==e&&(this.settings.decimals>0&&"."===e||(t=parseFloat(e),isNaN(t)&&(t=0),s=t,t.toString()!==e&&(s=t),t<this.settings.min&&(s=this.settings.min),t>this.settings.max&&(s=this.settings.max),s=this._forcestepdivisibility(s),Number(e).toString()!==s.toString()&&(this.element.val(s),this.element.trigger("change"))))},_getBoostedStep:function(){if(this.settings.booster){var e=Math.pow(2,Math.floor(this.spincount/this.settings.boostat))*this.settings.step;return this.settings.maxboostedstep&&e>this.settings.maxboostedstep&&(e=this.settings.maxboostedstep,this.value=Math.round(this.value/e)*e),Math.max(this.settings.step,e)}return this.settings.step},upOnce:function(){this._checkValue(),this.value=parseFloat(this.elements.input.val()),isNaN(this.value)&&(this.value=0);var e=this.value,t=this._getBoostedStep();this.value=this.value+t,this.value>this.settings.max&&(this.value=this.settings.max,this.element.trigger("spinner.on.max"),this.stopSpin()),this.elements.input.val(Number(this.value).toFixed(this.settings.decimals)),e!==this.value&&this.element.trigger("change")},downOnce:function(){this._checkValue(),this.value=parseFloat(this.elements.input.val()),isNaN(this.value)&&(this.value=0);var e=this.value,t=this._getBoostedStep();this.value=this.value-t,this.value<this.settings.min&&(this.value=this.settings.min,this.element.trigger("spinner.on.min"),this.stopSpin()),this.elements.input.val(this.value.toFixed(this.settings.decimals)),e!==this.value&&this.element.trigger("change")},startDownSpin:function(){var e=this;this.stopSpin(),this.spincount=0,this.spinning="down",this.element.trigger("spinner.on.startspin"),this.element.trigger("spinner.on.startdownspin"),this.downDelayTimeout=setTimeout(function(){e.downSpinTimer=setInterval(function(){e.spincount++,e.downOnce()},e.settings.stepinterval)},this.settings.stepintervaldelay)},startUpSpin:function(){var e=this;this.stopSpin(),this.spincount=0,this.spinning="up",this.element.trigger("spinner.on.startspin"),this.element.trigger("spinner.on.startupspin"),this.upDelayTimeout=setTimeout(function(){e.upSpinTimer=setInterval(function(){e.spincount++,e.upOnce()},e.settings.stepinterval)},this.settings.stepintervaldelay)},stopSpin:function(){switch(clearTimeout(this.downDelayTimeout),clearTimeout(this.upDelayTimeout),clearInterval(this.downSpinTimer),clearInterval(this.upSpinTimer),this.spinning){case"up":this.element.trigger("spinner.on.stopupspin"),this.element.trigger("spinner.on.stopspin");break;case"down":this.element.trigger("spinner.on.stopdownspin"),this.element.trigger("spinner.on.stopspin")}this.spincount=0,this.spinning=!1}})}),function(e){"use strict";var t="spinner",i=s.ui.controls.Spinner;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={text:"切换至简版,切换至祥版"},n={text:"text"};this.Switchex=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){if(this.element=$(e),!this.element.data("initialized")){this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s);var i=this.settings.text.split(",");this.leftText=i[0],this.rightText=i[1],this.buildHtml(),this.initElements(),this.bindEvents()}},buildHtml:function(){var e='<div class="c-switchex-container" id="'+t+'"><div class="c-switchex-content c-switchex-left">'+this.leftText+'</div><div class="c-switchex-circle c-switchex-right"></div></div>';this.container=$(e),this.element.before(this.container),this.element.hide()},initElements:function(){this.elements={view:this.container,left:$(".c-switchex-left",this.container),right:$(".c-switchex-right",this.container)}},bindEvents:function(){this.elements.view.on("click",$.proxy(this.click,this))},click:function(e){var t=$(e.target);t.hasClass("c-switchex-circle")&&(t.hasClass("c-switchex-left")?(this.elements.right.addClass("c-switchex-circle").removeClass("c-switchex-content").html(""),this.elements.left.removeClass("c-switchex-circle").addClass("c-switchex-content").html(this.leftText)):(this.elements.left.addClass("c-switchex-circle").removeClass("c-switchex-content").html(""),this.elements.right.removeClass("c-switchex-circle").addClass("c-switchex-content").html(this.rightText)))},render:function(){},refresh:function(){},enable:function(){},disable:function(){},destroy:function(){}})}),function(e){"use strict";var t="switchex",i=s.ui.controls.Switchex;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=150,n=function(){},a={onSelected:n},o={};this.Tabs=new e.Class({extend:s.ui.BaseControl},{defaults:a,attributeMap:o,init:function(e,s){this.element=$(e),this.container=this.element,this.element.data("initialized")||(this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.initElements(),this.bindEvents())},initElements:function(){this.elements={original:this.element,tabsContainer:$("ul.nav-tabs",this.container),tabs:$("ul.nav-tabs .tab",this.container)}},bindEvents:function(){this.elements.tabs.on("click",$.proxy(this.show,this)),this.elements.tabsContainer.on("onselected",$.proxy(this.settings.onSelected,this))},bindEventsInterface:function(){this.element},setActive:function(e){var t=this.elements.tabsContainer.find("li").eq(e).find("a.tab"),s={preventDefault:n,target:t};this.show(s)},getActiveIndex:function(){var e=this.elements.tabsContainer.find("li.active"),t=e.index();return t},show:function(e){e.preventDefault();var t=$(e.target),s=t.data("s-target");if(s||(s=t.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=this.elements.tabsContainer.find(".active:last .tab"),n=$.Event("hide.bs.tab",{relatedTarget:t[0]}),a=$.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(n),t.trigger(a),!a.isDefaultPrevented()&&!n.isDefaultPrevented()){var o=$(s);this.activate(t.closest("li"),this.elements.tabsContainer),this.activate(o,o.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})}),this.elements.tabsContainer.trigger("onselected",t.closest("li").index())}}},activate:function(e,t,s){function n(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var a=t.find("> .active"),o=s&&$.support.transition&&(a.length&&a.hasClass("fade")||!!t.find("> .fade").length);a.length&&o?a.one("bsTransitionEnd",n).emulateTransitionEnd(i):n(),a.removeClass("in")},reflash:function(){},enable:function(){},disable:function(){},destroy:function(){},getApi:function(){var e=this,t={setActive:"setActive",getActiveIndex:"getActiveIndex"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="tabs",i=s.ui.controls.Tabs;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=function(){},n={maxLength:100,update:i,tip:"还可以输入"},a={maxLength:"max-length"};this.Textlimit=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,s){t+=1,this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),this.element.data("plugin-id",t),this.initSettings(s),this.placeholder=this.element.attr("placeholder"),this.wordslength=this.settings.maxLength,this.buildHtml(),this.initElements(),this.bindEvents())},buildHtml:function(){var e='<div class="c-textlimit-wrap">    <div class="tip text-right">        <span class="word">'+this.settings.tip+'</span>        <span class="remain"></span>字    </div></div>';this.container=$(e),this.element.before(this.container),this.container.prepend(this.element)},initElements:function(){this.elements={original:this.element,viewTextarea:$("textarea",this.container),remain:$("span.remain",this.container),word:$(".word",this.container)},this.elements.viewTextarea.attr("title","最多为"+this.settings.maxLength+"个字"),this.elements.remain.text(this.settings.maxLength)},bindEvents:function(){this.elements.viewTextarea.on("paste",$.proxy(this.paste,this)).on("keyup",$.proxy(this.keyup,this))},getValue:function(){return this.trimStr(this.elements.viewTextarea.val())},setValue:function(e){this.elements.viewTextarea.val(e)},trimStr:function(e){return e.replace(/(^\s*) | (\s*$)/g,"")},refresh:function(){var e=this.elements.viewTextarea.val();e=this.trimStr(e);var t=this.settings.maxLength-e.length;t<0?(this.elements.word.text("已经超出"),this.elements.remain.text(Math.abs(t)),this.elements.remain.addClass("warning")):(this.elements.word.text("还可以输入"),this.elements.remain.text(t),this.elements.remain.removeClass("warning"))},paste:function(){var e=this;setTimeout(function(){e.refresh()},50)},keyup:function(){this.refresh()}})}),function(e){"use strict";var t="textlimit",i=s.ui.controls.Textlimit;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=function(){},i=0,n={timePickerIncrement:5,format:"HH:mm",change:t,defaultTime:null,minDate:void 0,maxDate:void 0,timeShowPanel:!0},a={timePickerIncrement:"time-picker-increment",format:"format",defaultTime:"default-time",timeShowPanel:"time-show-panel"};this.Timepicker=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,t){this.element=$(e),this.element.data("initialized")||(this.element.data("initialized",!0),i+=1,this.element.data("plugin-id",i),this.initSettings(t),this.currentTime={},this.buildHtml(),this.initElements(),this.transferAttributes(),this.bindEvents(),this.setValue(this.settings.defaultTime),null!=this.settings.defaultTime&&this.elements.view.trigger("changedate",this.settings.defaultTime),"string"==typeof this.settings.minDate&&(this.settings.minDate=moment(this.settings.minDate,this.settings.format)),"object"==typeof this.settings.minDate&&(this.settings.minDate=moment(this.settings.minDate)),"string"==typeof this.settings.maxDate&&(this.settings.maxDate=moment(this.settings.maxDate,this.settings.format)),"object"==typeof this.settings.maxDate&&(this.settings.maxDate=moment(this.settings.maxDate)))},buildHtml:function(){var e=this.element.data("plugin-id"),t='       <span class="pull-left sepline">:</span>       <div class="second-control dropup">           <input class="timepicker-second" type="text" maxlength="2" data-s-dropdown-id="#c-showsecond-menu-'+e+'">           <div id="c-showsecond-menu-'+e+'" class="dropdown-menu timepicker-seconds">               <p>请选择秒钟</p>               <div class="calendar-seconds">               </div>           </div>       </div>',s='       <span class="pull-left sepline">.</span>       <div class="millisecond-control">           <input class="timepicker-millisecond" type="text" maxlength="3">       </div>';s="HH:mm:ss.SSS"==this.settings.format&&t+s||"",t="HH:mm:ss"==this.settings.format&&t||"";var i='<div class="calendar-time">   <div class="calendar-time-control">       <div class="hour-control dropup">           <input class="timepicker-hour" type="text" maxlength="2" data-s-dropdown-id="#c-showhour-menu-'+e+'">           <div id="c-showhour-menu-'+e+'" class="dropdown-menu timepicker-hours">               <p>请选择小时</p>               <div class="calendar-hours">               </div>           </div>       </div>       <span class="pull-left sepline">:</span>       <div class="minute-control dropup">           <input class="timepicker-minute" type="text" maxlength="2" data-s-dropdown-id="#c-showminute-menu-'+e+'">           <div id="c-showminute-menu-'+e+'" class="dropdown-menu timepicker-minutes">               <p>请选择分钟</p>               <div class="calendar-minutes">               </div>           </div>       </div>'+t+s+'       <i class="fa fa-clock-o glyphicon glyphicon-time"></i>   </div></div>';this.container=$(i),this.element.before(this.container),this.element.hide()},initElements:function(){this.elements={view:this.element,timepicker:this.container,timeControlContainer:$(".calendar-time-control",this.container),showHourContainer:$(".hour-control",this.container),showMinuteContainer:$(".minute-control",this.container),showSecondContainer:$(".second-control",this.container),showHour:$(".timepicker-hour",this.container),showMinute:$(".timepicker-minute",this.container),showSecond:$(".timepicker-second",this.container),showMillisecond:$(".timepicker-millisecond",this.container),calendarHours:$(".timepicker-hours",this.container),calendarMinutes:$(".timepicker-minutes",this.container),calendarSeconds:$(".timepicker-seconds",this.container),calendarMilliseconds:$(".timepicker-milliseconds",this.container),showHours:$(".calendar-hours",this.container),showMinutes:$(".calendar-minutes",this.container),showSeconds:$(".calendar-seconds",this.container),showTimeIcon:$(".glyphicon-time",this.container)},this.byPassKeys=[96,97,98,99,100,101,102,103,104,105,37,39,8,48,49,50,51,52,53,54],this.settings.timeShowPanel&&(this.dropdown=new s.ui.controls.Dropdown(this.elements.showHour,{}),this.dropdown1=new s.ui.controls.Dropdown(this.elements.showMinute,{}),this.dropdown2=new s.ui.controls.Dropdown(this.elements.showSecond,{}))},transferAttributes:function(){this.element.prop("disabled")&&this.disable()},bindEvents:function(){this.elements.showTimeIcon.on("click",$.proxy(this.showHourPanel,this)),this.elements.showHour.on("click",$.proxy(this.showPanel,this)),this.elements.showHour.on("blur",$.proxy(this.confirmHour,this)),this.elements.showHour.on("keydown",$.proxy(this.inputKeyDown,this)),this.elements.showHour.on("keyup",$.proxy(this.inputKeyUp,this)),this.elements.showMinute.on("click",$.proxy(this.showPanel,this)),this.elements.showMinute.on("blur",$.proxy(this.confirmMinute,this)),this.elements.showMinute.on("keydown",$.proxy(this.inputKeyDown,this)),this.elements.showMinute.on("keyup",$.proxy(this.inputKeyUp,this)),this.elements.showSecond.on("click",$.proxy(this.showPanel,this)),this.elements.showSecond.on("blur",$.proxy(this.confirmSecond,this)),this.elements.showSecond.on("keydown",$.proxy(this.inputKeyDown,this)),this.elements.showSecond.on("keyup",$.proxy(this.inputKeyUp,this)),this.elements.showMillisecond.on("click",$.proxy(this.showPanel,this)),this.elements.showMillisecond.on("blur",$.proxy(this.confirmMillisecond,this)),this.elements.showMillisecond.on("keydown",$.proxy(this.inputKeyDown,this)),this.elements.showMillisecond.on("keyup",$.proxy(this.inputKeyUp,this)),this.elements.view.on("changedate",$.proxy(this.settings.change,this)),this.elements.showHours.on("click","span",$.proxy(this.hourChanged,this)),this.elements.showMinutes.on("click","span",$.proxy(this.minuteChanged,this)),this.elements.showSeconds.on("click","span",$.proxy(this.secondChanged,this))},setMinDate:function(e){"string"==typeof e&&(this.settings.minDate=moment(e,this.settings.format)),"object"==typeof e&&(this.settings.minDate=moment(e))},setMaxDate:function(e){"string"==typeof e&&(this.settings.maxDate=moment(e,this.settings.format)),"object"==typeof e&&(this.settings.maxDate=moment(e))},inputKeyDown:function(e){this.keyUpFlag=!0;var t=e.keyCode||e.which,s=$(e.target).val();$.inArray(t,this.byPassKeys)===-1&&$(e.target).val(s.replace(/[^\d]/g,""))},inputKeyUp:function(e){if(this.keyUpFlag){var t=$(e.target),s=$(e.target).parent().prev().prev().find("input"),i=$(e.target).parent().next().next().find("input"),n=e.keyCode||e.which,a=t.val();if($.inArray(n,this.byPassKeys)===-1)return void t.val(a.replace(/[^\d]/g,""));if(0!==s.length&&(8===n&&0===a.length||37===n))return void s.trigger("click");0!==i.length&&(39===n||37!==n&&2==a.length)&&i.trigger("click"),this.keyUpFlag=!1}},showHourPanel:function(e){this.elements.showHour.click()},confirmHour:function(e){var t=this.elements.showHour.val();if(t.length>0){var s;try{s=t,s>=0&&s<=23?this.currentTime.hour(s):(this.elements.showHour.val("00"),this.currentTime.hour(0))}catch(i){this.elements.showHour.val("00"),this.currentTime.hour(0)}var n=this.getValue();this.setValue(n),this.elements.view.trigger("changedate",n),this.elements.view.trigger("timeChange",n)}else this.elements.view.trigger("changedate",null),this.elements.view.trigger("timeChange",null)},confirmMinute:function(e){var t=this.elements.showMinute.val();if(t.length>0){var s;try{s=t,s>=0&&s<=59?this.currentTime.minute(s):(this.elements.showMinute.val("00"),this.currentTime.minute(0))}catch(i){this.elements.showMinute.val("00"),this.currentTime.minute(0)}var n=this.getValue();this.setValue(n),this.elements.view.trigger("changedate",n),this.elements.view.trigger("timeChange",n)}else this.elements.view.trigger("changedate",null),this.elements.view.trigger("timeChange",null)},confirmSecond:function(e){var t=this.elements.showSecond.val();if(t.length>0){var s;try{s=t,s>=0&&s<=59?this.currentTime.second(s):(this.elements.showSecond.val("00"),this.currentTime.second(0))}catch(i){this.elements.showSecond.val("00"),this.currentTime.second(0)}var n=this.getValue();this.setValue(n),this.elements.view.trigger("changedate",n),this.elements.view.trigger("timeChange",n)}else this.elements.view.trigger("changedate",null),this.elements.view.trigger("timeChange",null)},confirmMillisecond:function(e){var t=this.elements.showMillisecond.val();if(t.length>0){var s;try{s=t,s>=0&&s<=999?this.currentTime.millisecond(s):(this.elements.showMillisecond.val("000"),this.currentTime.millisecond(0))}catch(i){this.elements.showMillisecond.val("000"),this.currentTime.millisecond(0)}var n=this.getValue();this.setValue(n),this.elements.view.trigger("changedate",n),this.elements.view.trigger("timeChange",n)}else this.elements.view.trigger("changedate",null),this.elements.view.trigger("timeChange",null)},focusView:function(){this.updateView()},compareTime:function(){this.settings.minDate&&this.currentTime.isBefore(this.settings.minDate)&&(this.currentTime=this.settings.minDate.clone()),this.settings.maxDate&&this.currentTime.isAfter(this.settings.maxDate)&&(this.currentTime=this.settings.maxDate.clone())},getValue:function(){this.compareTime();var e=this.currentTime.clone();return e.format(this.settings.format)},setValue:function(e){if(this.currentTime=moment(),!e)return void(this.elements&&(this.elements.showHour.val(""),this.elements.showMinute.val(""),this.elements.showSecond.val(""),this.elements.showMillisecond.val("")));var t;if("string"==typeof e&&(t=moment(e,this.settings.format)),"object"==typeof e&&(t=moment(e)),this.currentTime=t.clone(),this.elements){var s=this.currentTime.hour(),i=this.currentTime.minute(),n=this.currentTime.second(),a=this.currentTime.millisecond();s=s<10?"0"+s:s,i=i<10?"0"+i:i,n=n<10?"0"+n:n,a=a<10&&"00"+a||a<100&&"0"+a||a,this.elements.showHour.val(s),this.elements.showMinute.val(i),this.elements.showSecond.val(n),this.elements.showMillisecond.val(a)}},updateView:function(e){this.renderTimePicker()},renderTimePicker:function(){var e,t=this.currentTime,s=t.hour(),i=t.minute(),n=t.second(),a=!1;this.settings.minDate&&(a=this.settings.minDate.clone());var o=!1;this.settings.maxDate&&(o=this.settings.maxDate.clone()),e="";for(var r=0,l=23,h=r;h<=l;h++){var c=h<10?"0"+h:h,d="";a&&h<a.hour()&&(d="disable"),o&&h>o.hour()&&(d="disable"),e+='<span value="'+h+'" class="'+d+(h===s?" selected":"")+'">'+c+"</span>"}this.elements.showHours.html(e),
e="";for(var h=0;h<60;h+=this.settings.timePickerIncrement){var c=h<10?"0"+h:h,d="";a&&s==a.hour()&&h<a.minute()&&(d="disable"),o&&s==o.hour()&&h>o.minute()&&(d="disable"),e+='<span value="'+h+'" class="'+d+(h===i?" selected":"")+'">'+c+"</span>"}this.elements.showMinutes.html(e),e="";for(var h=0;h<60;h+=this.settings.timePickerIncrement){var c=h<10?"0"+h:h,d="";a&&s==a.hour()&&i==a.minute()&&h<a.second()&&(d="disable"),o&&s==o.hour()&&i==o.minute()&&h>o.second()&&(d="disable"),e+='<span value="'+h+'" class="'+d+(h===n?" selected":"")+'">'+c+"</span>"}this.elements.showSeconds.html(e)},showPanel:function(e){$(e.target).select(),this.updateView(),$(e.target).hasClass("timepicker-millisecond")&&this.elements.showSecondContainer.removeClass("open")},hourChanged:function(e){if($(e.target).hasClass("disable"))return void e.stopPropagation();var t=parseInt(e.target.innerHTML);this.currentTime.hour(t),this.elements.showHour.val(t);var s=this.getValue();this.setValue(s),this.elements.view.trigger("changedate",s),this.elements.view.trigger("timeChange",s),this.elements.showHourContainer.removeClass("open")},minuteChanged:function(e){if($(e.target).hasClass("disable"))return void e.stopPropagation();var t=parseInt(e.target.innerHTML);this.currentTime.minute(t),this.elements.showMinute.val(t);var s=this.getValue();this.setValue(s),this.elements.view.trigger("changedate",s),this.elements.view.trigger("timeChange",s),this.elements.showMinuteContainer.removeClass("open")},secondChanged:function(e){if($(e.target).hasClass("disable"))return void e.stopPropagation();var t=parseInt(e.target.innerHTML);this.currentTime.second(t),this.elements.showSecond.val(t);var s=this.getValue();this.setValue(s),this.elements.view.trigger("changedate",s),this.elements.view.trigger("timeChange",s),this.elements.showSecondContainer.removeClass("open")},timeChanged:function(e){this.renderTimePicker()},render:function(){},refresh:function(){},enable:function(){this.elements.timeControlContainer.removeClass("disabled"),this.container.removeClass("disabled"),this.elements.showHour.removeClass("disabled"),this.elements.showHour.prop("disabled",!1),this.elements.showMinute.removeClass("disabled"),this.elements.showMinute.prop("disabled",!1),this.elements.showSecond.removeClass("disabled"),this.elements.showSecond.prop("disabled",!1),this.elements.showMillisecond.removeClass("disabled"),this.elements.showMillisecond.prop("disabled",!1)},disable:function(){this.elements.timeControlContainer.addClass("disabled"),this.container.addClass("disabled"),this.elements.showHour.addClass("disabled"),this.elements.showHour.prop("disabled",!0),this.elements.showMinute.addClass("disabled"),this.elements.showMinute.prop("disabled",!0),this.elements.showSecond.addClass("disabled"),this.elements.showSecond.prop("disabled",!0),this.elements.showMillisecond.addClass("disabled"),this.elements.showMillisecond.prop("disabled",!0)},destroy:function(){},getApi:function(){var e=this,t={setValue:"setValue",getValue:"getValue",updateView:"updateView",render:"renderTimePicker",setMinDate:"setMinDate",setMaxDate:"setMaxDate"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="timepicker",i=s.ui.controls.Timepicker;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i={show:!0,inputWidth:0,width:248,mateKey:{id:"id"},map:'{"text":"text","returnValue":"json"}',onblured:void 0,typeaheadTemplate:void 0,nofound:'<span style="font-size:13px">无法匹配到适合的选项！</span>　<a class="c-userselect-modal" href="#" style="font-size:13px">调出选人控件查询</a>',showItemList:!1,ishide:!1,showIcon:!0,items:8,typeaheadMethod:{},multiSelect:!0},n={map:"map",showIcon:"show-icon",showItemList:"show-item-list",items:"items",multiSelect:"multi-select"};this.UserSelect=new e.Class({extend:s.ui.BaseControl},{defaults:i,attributeMap:n,init:function(e,s){if(this.element=$(e),this.textlists=[],!this.element.data("initialized")){this.element.data("initialized",!0),t+=1,this.element.data("plugin-id",t),this.initSettings(s),"string"==typeof this.settings.map&&""!==this.settings.map&&(this.settings.map=JSON.parse(this.settings.map)),this.settings.showIcon||(this.settings.nofound='<span style="font-size:13px">无法匹配到适合的选项！</span>'),this.settings.width=this.element.width()&&this.element.width()>=248?this.element.width():this.settings.width,this.settings.map="string"==typeof this.settings.map&&this.settings.map?JSON.parse(this.settings.map):this.settings.map,this.buildHtml(),this.initElements(),this.transferAttributes(),this.settings.inputWidth=this.elements.input.width();var i=this;i.render(),this.bindEvents()}},buildHtml:function(){var e="";e=this.settings.showIcon?'<div  id="userSelect" class="c-userselect-container"><div class="c-userselect-view"><div style="max-width:'+(this.settings.width-90)+'px" class="c-userselect-textlist" ></div><input style="width:'+(this.settings.width-28)+'px;border:none;outline:medium;" type="text" class="c-typeahead form-control"><div class="c-userselect-fr"><span class="glyphicon glyphicon-user"></span></div></div><div  class="c-userselect-tips dropdown-menu"><dl class="c-userselect-list" style=""></dl><div style="clear:both"></div></div>':'<div  id="userSelect" class="c-userselect-container"><div class="c-userselect-view"><div style="max-width:'+(this.settings.width-100)+'px" class="c-userselect-textlist" ></div><input style="min-width:100px;width:'+(this.settings.width-10)+'px;border:none;outline:medium;" type="text" class="c-typeahead form-control"></div><div  class="c-userselect-tips dropdown-menu"><dl class="c-userselect-list" style=""></dl><div style="clear:both"></div></div>',this.container=$(e),this.element.before(this.container),this.element.hide(),this.settings.ishide?this.container.hide():this.container.show()},initElements:function(){var e=this;this.elements={container:e.container,view:$(".c-userselect-view",e.container),tips:$(".c-userselect-tips",e.container),dl:$(".c-userselect-list",e.container),input:$(".c-typeahead.form-control",e.container),textlist:$(".c-userselect-textlist",e.container),list:$(".c-userselect-list",e.container),button:$(".c-userselect-fr",e.container)};var t={data:e.settings.data,map:e.settings.map,showItemList:e.settings.showItemList,items:e.settings.items,template:this.settings.typeaheadMethod.template,onSelected:this.settings.typeaheadMethod.onSelected||function(t,s){e.selected.apply(e,arguments)},matcher:this.settings.typeaheadMethod.matcher||function(e){var t=this.matcherReg||new RegExp(this.query,"i"),s=t.test(e.name)||t.test(e.loginName)||t.test(e.spell)||t.test(e.spellFirst);return s===!0?1:-1},nofound:e.settings.nofound,nofoundWidth:this.settings.width-10};e.typeahead=new s.ui.controls.Typeahead(e.elements.input,t)},updateData:function(e){this.typeahead.setSource(e)},transferAttributes:function(){this.elements.input.attr("placeholder",this.element.attr("placeholder"))},bindEvents:function(){this.elements.input.bind("keydown",$.proxy(this.keydown,this)),this.elements.input.bind("blur",$.proxy(this.blur,this)),this.elements.input.bind("focus",$.proxy(this.click,this)),this.elements.dl.bind("click",$.proxy(this.click,this)),this.elements.tips.bind("click",$.proxy(this.click,this)),this.elements.container.bind("mouseleave",$.proxy(this.mouseleave,this)),this.elements.container.bind("mouseenter",$.proxy(this.mouseenter,this)),this.elements.list.bind("click",$.proxy(this.clickSpan,this)),this.elements.button.bind("click",$.proxy(this.clickButton,this)),this.elements.container.delegate(".c-userselect-modal","click",$.proxy(this.modal,this))},bindEventsInterface:function(){this.container},render:function(){},selected:function(e,t){var s=this.typeahead.getValue(t);this.elements.tips.show(),s&&(this.elements.input.val(""),void 0===this.contains(this.textlists,s,this.settings.mateKey)&&(this.settings.multiSelect?this.textlists.push(s):(this.textlists=[s],this.elements.list.html("")),this.addEl(this.elements.list,s),this.automove(this.textlists,this.elements.textlist))),this.elements.input.focus()},disable:function(){this.elements.button.prop("disabled",!0),this.elements.input.prop("disabled",!0),this.elements.view.addClass("disabled")},enable:function(){this.elements.button.prop("disabled",!1),this.elements.input.prop("disabled",!1),this.elements.view.removeClass("disabled")},changed:function(e,t){},addEl:function(e,t){var s=this.displayText(t),i=$('<dd class="c-userselect-item"></dd>');i.data("value",t),i.append('<span class="c-userselect-nametext">'+s+'</span><span class="c-userselect-delete">x</span></span>'),e.append(i)},removeEl:function(e,t){var s=!0,i=this.settings.mateKey;e.find("dd").each(function(e,n){for(var a in i)$(n).data("value")[a]!=t[a]&&(s=!1);return s?$(n).remove():void(s=!0)})},modal:function(e){e.preventDefault(),e.stopPropagation(),this.elements.button.click()},click:function(e){this.textlists.length>0&&this.elements.input.removeAttr("placeholder"),this.elements.tips.show(),$(e.target).is("input")||this.elements.input.focus()},clickButton:function(e){this.elements.tips.hide(),this.settings.show=!1,"function"==typeof this.settings.clickButton&&this.settings.clickButton.apply(this,[e])},clickSpan:function(e){var t=$(e.target);if(t.hasClass("c-userselect-delete")){var s=t.parent("dd").data("value");this.remove(this.textlists,s,this.settings.mateKey),this.automove(this.textlists,this.elements.textlist),t.parent("dd").remove(),this.elements.input.focus()}},keydown:function(e){$(e.target);if(8==e.which){if(this.elements.input.val().length<=0){var t=this.textlists.splice(this.textlists.length-1,1);this.automove(this.textlists,this.elements.textlist),this.removeEl(this.elements.list,t[0])}this.textlists.length<=0&&this.elements.input.attr("placeholder",this.element.attr("placeholder"))}},mouseleave:function(){this.settings.show=!1},mouseenter:function(){this.settings.show=!0},blur:function(){this.settings.show||(this.elements.tips.hide(),"function"==typeof this.settings.onblured&&this.settings.onblured.apply(this,[this.textlists]))},focus:function(e){},getValue:function(){return this.textlists},setData:function(e){if(e){this.textlists=e,this.elements.list.html("");for(var t=0;t<e.length;t++)this.addEl(this.elements.list,e[t]);this.automove(this.textlists,this.elements.textlist)}},getButton:function(){return this.elements.button},automove:function(e,t){for(var s=e.length,i="",n=0;n<s;n++){var a=this.displayText(e[n]);i+=a+" ; "}i=i.substring(0,i.length-3),t.text(i),t.attr("title",i);var o=this.elements.textlist.width();this.elements.input.width(this.settings.inputWidth-o)},displayText:function(e){return"string"==typeof e?e:e[this.settings.map.text]},contains:function(e,t,s){var i=!0;if(Array.isArray(e)||(e=[e]),"object"!=typeof t)return e.indexOf(t);for(var n=0;n<e.length;n++){i=!0;for(var a in s)t[s[a]]!=e[n][s[a]]&&(i=!1);if(i)return n}},remove:function(e,t,s){var i=this.contains(e,t,s);return i>=0&&e.splice(i,1),e},getApi:function(){var e=this,t={setData:"setData",getValue:"getValue",getButton:"getButton",updateData:"updateData"},i=s.utilities.buildApi(e,t);return i},refresh:function(){},destroy:function(){}})}),function(e){"use strict";var t="userselect",i=s.ui.controls.UserSelect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=600,n={interval:5e3,pause:"hover",wrap:!0,keyboard:!0,map:'{"url":"url","src":"src","alt":"alt","title":"title","content":"content"}'},a={interval:"interval",pause:"pause",wrap:"wrap",keyboard:"keyboard",map:"map"};this.Carousel=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.map=this.settings.map,"string"==typeof this.settings.map&&""!==this.settings.map&&(this.map=JSON.parse(this.settings.map)),this.paused=null,this.sliding=null,this.interval=null,this.active=null,this.items=null,this.settings.interval&&this.pause().cycle(),this.buildHtml(),this.initElements(),this.bindEvents()},buildHtml:function(){var e=this.element.data("plugin-id");this.id=this.element.attr("id")||"carousel"+e;var t='<ol class="carousel-indicators"></ol><div class="carousel-inner" role="listbox"></div><a class="left carousel-control" href="'+this.id+'" role="button" data-s-slide="prev">    <span class="glyphicon glyphicon-menu-left icon-prev" aria-hidden="true"></span>    <span class="sr-only">Previous</span></a><a class="right carousel-control" href="'+this.id+'" role="button" data-s-slide="next">    <span class="glyphicon glyphicon-menu-right icon-next" aria-hidden="true"></span>    <span class="sr-only">Next</span></a>';this.container=$(t),this.element.append(this.container)},updateData:function(e){if(!e||0===e.length)return void this.elements.slide.hide();this.elements.slide.show(),this.elements.indicators.html(""),this.elements.inner.html("");for(var t=0;t<e.length;t++){var s=e[t],i='<li data-s-target="'+this.id+'" data-s-slide-to="'+t+'"></li>';i=$(i),0===t&&i.addClass("active"),this.elements.indicators.append(i);var n='    <div class="item">';s[this.map.url]&&(n+='        <a href="'+s[this.map.url]+'" target="_blank">'),n+='<img src="'+s[this.map.src]+'" alt="'+s[this.map.src]+'">';var a="";s[this.map.title]&&s[this.map.content]?a='        <div class="carousel-caption">            <h3 class="title">'+s[this.map.title]+'</h3>            <p class="content">'+s[this.map.content]+"</p>        </div>":s[this.map.title]&&(a='        <div class="carousel-caption">            <h3 class="title-only">'+s[this.map.title]+"</h3>        </div>"),n+=a,s[this.map.url]&&(n+="</a>"),n+="</div>",n=$(n),0===t&&n.addClass("active"),this.elements.inner.append(n)}this.settings.slide=this.element.find("li[data-s-slide-to]");var o=this;this.settings.slide.on("click",function(e){var t=$(this).attr("data-s-slide-to");t&&(o.settings.interval=!1,o.to(t))})},initElements:function(){this.elements={indicators:this.element.find(".carousel-indicators"),inner:this.element.find(".carousel-inner"),slide:this.element.find("a[data-s-slide]")}},bindEvents:function(){var e=this;this.settings.keyboard&&this.element.on("keydown.bs.carousel",$.proxy(this.keydown,this)),this.elements.slide.on("click",function(t){var s=$(this).attr("data-s-slide");e[s](),t.preventDefault()})},keydown:function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.settings.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.settings.interval)),this},getItemIndex:function(e){return this.items=e.parent().children(".item"),this.items.index(e||this.active)},getItemForDirection:function(e,t){var s=this.getItemIndex(t),i="prev"==e&&0===s||"next"==e&&s==this.items.length-1;if(i&&!this.settings.wrap)return t;var n="prev"==e?-1:1,a=(s+n)%this.items.length;return this.items.eq(a)},to:function(e){var t=this,s=this.getItemIndex(this.active=this.element.find(".item.active"));if(!(e>this.items.length-1||e<0))return this.sliding?this.element.one("slid.bs.carousel",function(){t.to(e)}):s==e?this.pause().cycle():this.slide(e>s?"next":"prev",this.items.eq(e))},pause:function(e){return e||(this.paused=!0),this.element.find(".next, .prev").length&&$.support.transition&&(this.element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(e,t){var s=this.element.find(".item.active"),n=t||this.getItemForDirection(e,s),a=this.interval,o="next"==e?"left":"right",r=this;if(n.hasClass("active"))return this.sliding=!1;var l=n[0],h=$.Event("slide.bs.carousel",{relatedTarget:l,direction:o});if(this.element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.elements.indicators.length){this.elements.indicators.find(".active").removeClass("active");var c=$(this.elements.indicators.children()[this.getItemIndex(n)]);c&&c.addClass("active")}var d=$.Event("slid.bs.carousel",{relatedTarget:l,direction:o});return $.support.transition&&this.element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,s.hasClass("direction")&&s.removeClass(o),n.hasClass("direction")&&n.removeClass(o),s.addClass(o),n.addClass(o),r.sliding=!1,s.one("bsTransitionEnd",function(){n.removeClass([e,o].join(" ")).addClass("active"),s.removeClass(["active",o].join(" ")),setTimeout(function(){r.element.trigger(d)},0)}).emulateTransitionEnd(i)):(s.removeClass("active"),n.addClass("active"),this.sliding=!1,this.element.trigger(d)),a&&this.cycle(),this}}})}),function(e){"use strict";var t="carousel";e.fn[t]=function(t){return this.each(function(){var i=e(this);i.data("plugin-ref")&&(i.data("plugin-ref").destroy(),i.removeData("plugin-ref")),i.data("plugin-ref",new s.ui.controls.Carousel(this,t))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";function t(e,t){for(var s=t.split(" "),i=!0,n=0;n<s.length;n++)if(!e.hasClass(s[n])){i=!1;break}return i}var i={all:"all",none:"none",leaf:"leaf"},n={checked:"checked",unchecked:"unchecked",partOf:"partOf"},a={all:"all",leaf:"leaf"},o=function(){},r=0,l={levels:1,dataUrl:"",expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",checkedPartOfIcon:"glyphicon glyphicon-check partOfchecked",uncheckedIcon:"glyphicon glyphicon-unchecked",enableLinks:!1,enableTitle:!1,showIcon:!0,showTags:!1,multiSelect:!1,silent:!1,ignoreChildren:!1,expandOne:!0,showCheckbox:i.none,checkRecursive:!1,selectMode:a.all,appendHtml:"",parseAppendHtml:void 0,selectedNodeIds:"",checkedNodeIds:"",onNodeDbclick:o,onNodeChecked:o,onNodeCollapsed:o,onNodeDisabled:o,onNodeEnabled:o,onNodeExpanded:o,onNodeSelected:o,onNodeUnchecked:o,onNodeUnselected:o,onSearchComplete:o,onSearchCleared:o},h={expandOne:"expand-one",ignoreChildren:"ignore-children",expandIcon:"expand-icon",collapseIcon:"collapse-icon",showTags:"show-tags",levels:"levels",dataUrl:"data-url",showCheckbox:"show-checkbox",checkRecursive:"check-recursive",selectMode:"select-mode",appendHtml:"append-html",multiSelect:"multi-select",selectedNodeIds:"selected-node-ids",checkedNodeIds:"checked-node-ids"};this.Slowtree=new e.Class({extend:s.ui.BaseControl},{defaults:l,attributeMap:h,init:function(e,t){this.element=$(e),r+=1,this.element.data("plugin-id",r),this.initSettings(t),"function"==typeof this.settings.parseData&&(this.parseData=this.settings.parseData,delete this.settings.parseData),this.data=[],this.idIndexMap={},this.container=$('<ul class="list-group"></ul>');var s=this;$.when(this.getData()).done(function(){s.buildHtml(),s.initElements(),s.refresh(),s.bindEvents()})},getData:function(){var e=$.Deferred();if(this.settings.data){var t=$.extend(!0,[],this.settings.data);return this.data=this.parseData(t),delete this.settings.data,e.resolve(),e.promise()}return e.promise()},parseData:function(e){function t(e,a){if(e.nodes){a++;for(var o=0;o<e.nodes.length;o++){var r=e.nodes[o];r.id=r.id||i,r._innerParentId=e.id,r._innerPath=(e._innerPath||"r")+"|"+r.id,r._innerLevel=a,s.push(r),n.idIndexMap["id_"+r.id]=i,i++,r.nodes&&t(r,a)}}}var s=[],i=0,n=this;return t({nodes:e},0),s},updateData:function(e){var t=$.extend(!0,[],e);this.data=this.parseData(t)},buildHtml:function(){this.element.addClass("c-slowtree"),this.element.empty().append(this.container)},initElements:function(){var e=this;this.elements={original:e.element,getAllNodes:function(){var t=$("li",e.container);return t},getNode:function(t){var s=$('li[data-id="'+t+'"]',e.container);return s},getChildNodes:function(t){var s=this.getNode(t),i=s.data("path"),n=$('li[data-path^="'+i+'|"]',e.container);return n},getChildNodesChecked:function(t){var s=this.getNode(t),i=s.data("path"),n=$('li.node-checked[data-path^="'+i+'|"]',e.container);return n},getChildNodesCheckedPartOf:function(t){var s=this.getNode(t),i=s.data("path"),n=$('li.node-checked-partof[data-path^="'+i+'|"]',e.container);return n},getLevelNodes:function(t){var s=$('li[data-level="'+t+'"]',e.container);return s},getSelectedNodes:function(t){var s=t?"li:not(.node-selected)":"li.node-selected",i=$(s,e.container);return i},getCheckedNodes:function(t,s){var i;i=s?t?"li:not(.node-checked):not(.node-checked-partof)":"li.node-checked,li.node-checked-partof":t?"li:not(.node-checked):not(.node-checked-partof)":"li.node-checked";var n=$(i,e.container);return n},getDisabledNodes:function(t){var s=t?"li:not(.node-disabled)":"li.node-disabled",i=$(s,e.container);return i},getSearchResultNodes:function(t){var s=t?"li:not(.search-result)":"li.search-result",i=$(s,e.container);return i}}},buildTree:function(){for(var e=0;e<this.data.length;e++){var t=this.data[e],s=this.buildItem(t);s=$(s),this.container.append(s);var i="";if(this.settings.appendHtml){if(this.settings.parseAppendHtml){var n=this.settings.parseAppendHtml(this.settings.appendHtml);i=n}else i=this.settings.appendHtml;s.find(".appendHtml").append(i)}}},buildItem:function(e){var t=!1;e.nodes&&e.nodes.length>0&&(t=!0);for(var s="",n=0;n<e._innerLevel-1;n++)s+='<span class="indent"></span>';var o="icon";o+=t?e._innerLevel<this.settings.levels?" expand-icon "+this.settings.collapseIcon:" expand-icon "+this.settings.expandIcon:" "+this.settings.emptyIcon;var r='<span class="'+o+'"></span>',l="";if(this.settings.showIcon){var h="icon node-icon ";h+=e.icon||this.settings.nodeIcon,l='<span class="'+h+'"></span>'}var c="";if(this.settings.showCheckbox===i.all||!t&&this.settings.showCheckbox===i.leaf){var d="icon check-icon ";d+=this.settings.uncheckedIcon,c='<span class="'+d+'"></span>'}var u="";if(this.settings.showTags&&e.tags)for(var p=0;p<e.tags.length;p++){var m=e.tags[p];u+='<span class="badge">'+m+"</span>"}var f="list-group-item";t&&this.settings.selectMode===a.leaf&&(f+=" node-unselectable");var g='<li    class="'+f+'" '+(this.settings.levels&&e._innerLevel>this.settings.levels?'   style="display: none;"':"")+(this.settings.enableTitle?'   title="'+e.text+'"':"")+'   onselectstart = "return false;"   data-id="'+e.id+'"   data-hasChildren="'+t+'"   data-level="'+e._innerLevel+'"   data-path="'+e._innerPath+'"><div class = "item-content">'+s+r+l+c+(this.settings.enableLinks?'   <a class="nodevalue" href="'+e.href+'" style="color:inherit;">'+e.text+"</a>":'<span class="nodevalue">'+e.text+"</span>")+(this.settings.appendHtml?'   <span class="appendHtml"></span>':"")+u+"</div></li>";return g},refresh:function(){this.container.empty(),this.buildTree(),this.initStates()},initStates:function(){if(this.settings.selectedNodeIds){var e=this.settings.selectedNodeIds;"number"==typeof e&&(e+=""),this.selectNodeByIds(e)}if(this.settings.checkedNodeIds){var e=this.settings.checkedNodeIds;"number"==typeof e&&(e+=""),this.checkNodeByIds(e)}},clickHandler:function(e){this.settings.enableLinks||e.preventDefault();var t=$(e.target),s=t.closest("li.list-group-item");if(!s.hasClass("node-disabled")){var i=s.data("id"),n=this.getNode(i);if(n){var a=t.attr("class")?t.attr("class").split(" "):[];return a.indexOf("expand-icon")!==-1?void this.toggleExpandedState(n,this.settings.silent,this.settings.ignoreChildren):a.indexOf("check-icon")!==-1?void this.toggleCheckedState(n,this.settings.silent):void(s.hasClass("node-unselectable")||this.toggleSelectedState(n,this.settings.silent))}}},dblclickHandler:function(e){this.settings.enableLinks||e.preventDefault();var t=$(e.target),s=t.closest("li.list-group-item");if(!s.hasClass("node-disabled")&&!s.hasClass("node-unselectable")){s.addClass("node-selected").siblings().removeClass("node-selected");var i=s.data("id"),n=this.getNode(i);this.settings.silent||this.elements.original.trigger("nodedbclick",n)}},setOneLevelExpandedState:function(e,t,s,i){var n=this.elements.getNode(e.id),a=this.elements.getChildNodes(e.id);if(t?(n.find(".expand-icon").removeClass(this.settings.expandIcon).addClass(this.settings.collapseIcon),a.show(),s||this.elements.original.trigger("nodeExpanded",e)):(n.find(".expand-icon").removeClass(this.settings.collapseIcon).addClass(this.settings.expandIcon),a.hide(),s||this.elements.original.trigger("nodeCollapsed",e)),a.length>0){var o=this;a.each(function(){var e=$(this).data("id"),t=o.getNode(e);o.setOneLevelExpandedState(t,!1,s,i)})}},setExpandedState:function(e,t,s,i){if(this.settings.expandOne)return void this.setOneLevelExpandedState(e,t,s,i);var n=this.elements.getNode(e.id),a=this.elements.getChildNodes(e.id);if(a.length>0&&!i){var o=this;a.each(function(){var e=$(this).data("id"),n=o.getNode(e);o.setExpandedState(n,t,s,i)})}t?(n.find(".expand-icon").removeClass(this.settings.expandIcon).addClass(this.settings.collapseIcon),a.show(),s||this.elements.original.trigger("nodeExpanded",e)):(n.find(".expand-icon").removeClass(this.settings.collapseIcon).addClass(this.settings.expandIcon),a.hide(),s||this.elements.original.trigger("nodeCollapsed",e))},collapseNode:function(e,t,s){for(var i=0;i<e.length;i++)this.setExpandedState(e[i],!1,t,s)},expandNode:function(e,t,s,i){for(var n=this,a=0;a<e.length;a++){var o=e[a];this.setExpandedState(o,!0,s,i);var r=this.elements.getChildNodes(o.id);if(r.length>0&&this.settings.levels){var l=[];r.each(function(){var e=$(this).data("id"),t=n.getNode(e);l.push(t)}),this.expandLevels(l,t-1,s,i)}}},toggleExpandedState:function(e,s,i){var n=this.elements.getNode(e.id),a=n.find(".expand-icon"),o=t(a,this.settings.collapseIcon);this.setExpandedState(e,!o,s,i)},toggleNodeExpanded:function(e,t,s){for(var i=0;i<e.length;i++)this.toggleExpandedState(e[i],t,s)},expandLevels:function(e,t,s,i){for(var n=this,a=0;a<e.length;a++){var o=e[a];this.setExpandedState(o,t>0,s,i);var r=this.elements.getChildNodes(o.id);if(r.length>0){var l=[];r.each(function(){var e=$(this).data("id"),t=n.getNode(e);l.push(t)}),this.expandLevels(l,t-1,s,i)}}},expandAll1:function(e,t,s){var e=e||this.settings.levels;if(e){for(var i=[],n=0;n<this.data.length;n++)i.push(this.data[n]);this.expandLevels(i,this.settings.levels,t,s)}else{var i=this.elements.getLevelNodes(1),a=this;i.each(function(){var e=$(this).data("id"),i=a.getNode(e);a.setExpandedState(i,!0,t,s)})}},collapseAll2:function(e,t){var s=this.elements.getLevelNodes(1),i=this;s.each(function(){var s=$(this).data("id"),n=i.getNode(s);i.setExpandedState(n,!1,e,t)})},expandAll:function(e,t,s){$(this.element).find("li[data-level!=1]").show(),$(this.element).find(".expand-icon").removeClass(this.settings.expandIcon).addClass(this.settings.collapseIcon)},collapseAll:function(e,t){$(this.element).find("li[data-level!=1]").hide(),$(this.element).find(".expand-icon").removeClass(this.settings.collapseIcon).addClass(this.settings.expandIcon)},setSelectedState:function(e,t,s){var i=this.elements.getNode(e.id);i.hasClass("node-unselectable")||(t?(this.settings.multiSelect||this.elements.getSelectedNodes(!1).removeClass("node-selected"),i.addClass("node-selected"),s||this.elements.original.trigger("nodeSelected",e)):(i.removeClass("node-selected"),s||this.elements.original.trigger("nodeUnselected",e)))},selectNode:function(e,t){for(var s=0;s<e.length;s++)this.setSelectedState(e[s],!0,t)},unselectNode:function(e,t){for(var s=0;s<e.length;s++)this.setSelectedState(e[s],!1,t)},toggleSelectedState:function(e,t){var s=this.elements.getNode(e.id),i=s.hasClass("node-selected");this.setSelectedState(e,!i,t)},toggleNodeSelected:function(e,t){for(var s=0;s<e.length;s++)this.toggleSelectedState(e[s],t)},setCheckedState1:function(e,t,s){var i=this.elements.getNode(e.id),a=i.find(".check-icon");switch(t){case n.checked:i.removeClass("node-checked-partof"),i.addClass("node-checked"),a.removeClass(this.settings.uncheckedIcon).removeClass(this.settings.checkedPartOfIcon).addClass(this.settings.checkedIcon),s||this.elements.original.trigger("nodeChecked",e);break;case n.unchecked:i.removeClass("node-checked-partof"),i.removeClass("node-checked"),a.removeClass(this.settings.checkedIcon).removeClass(this.settings.checkedPartOfIcon).addClass(this.settings.uncheckedIcon),s||this.elements.original.trigger("nodeUnchecked",e);break;case n.partOf:i.removeClass("node-checked"),i.addClass("node-checked-partof"),a.removeClass(this.settings.checkedIcon).removeClass(this.settings.uncheckedIcon).addClass(this.settings.checkedPartOfIcon),s||this.elements.original.trigger("nodecheckedpartof",e)}if(this.settings.checkRecursive){if(e._innerParentId)for(var o=this.getNode(e._innerParentId);o;){var r;switch(t){case n.checked:case n.unchecked:var l=this.elements.getChildNodesCheckedPartOf(o.id).length;if(l>0)r=n.partOf;else{var h=this.elements.getChildNodesChecked(o.id).length;r=0===h?n.unchecked:n.checked}break;case n.partOf:r=t}this.setNodeCheckedSate(o,r,s),o=this.getNode(o._innerParentId)}if(e.nodes&&e.nodes.length>0)for(var c=0;c<e.nodes.length;c++){var d=e.nodes[c];this.setNodeCheckedSate(d,t,s)}}},setCheckedState:function(e,t,s){this._innerSetNodeCheckedSate(e,t,s),this.settings.checkRecursive&&(this.setChildrenCheckedState(e,t,s),this.setParentCheckedState(e,t,s))},_innerSetNodeCheckedSate:function(e,t,s){var i=this.elements.getNode(e.id),a=i.find(".check-icon");switch(t){case n.checked:i.removeClass("node-checked-partof"),i.addClass("node-checked"),a.removeClass(this.settings.uncheckedIcon).removeClass(this.settings.checkedPartOfIcon).addClass(this.settings.checkedIcon),s||this.elements.original.trigger("nodeChecked",e);break;case n.unchecked:i.removeClass("node-checked-partof"),i.removeClass("node-checked"),a.removeClass(this.settings.checkedIcon).removeClass(this.settings.checkedPartOfIcon).addClass(this.settings.uncheckedIcon),s||this.elements.original.trigger("nodeUnchecked",e);break;case n.partOf:i.removeClass("node-checked"),i.addClass("node-checked-partof"),a.removeClass(this.settings.checkedIcon).removeClass(this.settings.uncheckedIcon).addClass(this.settings.checkedPartOfIcon),s||this.elements.original.trigger("nodecheckedpartof",e)}},setChildrenCheckedState:function(e,t,s){if(e&&e.nodes&&e.nodes.length>0)for(var i=0;i<e.nodes.length;i++){var n=e.nodes[i];this._innerSetNodeCheckedSate(n,t,s),this.setChildrenCheckedState(n,t,s)}},setParentCheckedState:function(e,t,s){if(e._innerParentId)for(var i=this.getNode(e._innerParentId);i;){var a;switch(t){case n.checked:case n.unchecked:var o=this.elements.getChildNodesCheckedPartOf(i.id).length;if(o>0)a=n.partOf;else{var r=this.elements.getChildNodesChecked(i.id).length,l=this.elements.getChildNodes(i.id).length;a=0===r?n.unchecked:r<l?n.partOf:n.checked}break;case n.partOf:a=t}this._innerSetNodeCheckedSate(i,a,s),i=this.getNode(i._innerParentId)}},checkNode:function(e,t){for(var s=0;s<e.length;s++)this.setCheckedState(e[s],n.checked,t)},uncheckNode:function(e,t){for(var s=0;s<e.length;s++)this.setCheckedState(e[s],n.unchecked,t)},toggleCheckedState:function(e,s){var i,a=this.elements.getNode(e.id),o=a.find(".check-icon"),r=t(o,this.settings.checkedIcon);i=r?n.unchecked:n.checked,this.setCheckedState(e,i,s)},toggleNodeChecked:function(e,t){for(var s=0;s<e.length;s++)this.toggleCheckedState(e[s],t)},checkAll:function(e){var t=this.elements.getCheckedNodes(!0),s=t.find(".check-icon");if(t.addClass("node-checked"),s.removeClass(this.settings.uncheckedIcon).addClass(this.settings.checkedIcon),!e){var i=this;t.each(function(){var e=$(this).data("id"),t=i.getNode(e);i.elements.original.trigger("nodeChecked",t)})}},uncheckAll:function(e){var t=this.elements.getCheckedNodes(!1),s=t.find(".check-icon");if(t.removeClass("node-checked"),s.removeClass(this.settings.checkedIcon).addClass(this.settings.uncheckedIcon),
!e){var i=this;t.each(function(){var e=$(this).data("id"),t=i.getNode(e);i.elements.original.trigger("nodeUnchecked",t)})}},setDisabledState:function(e,t,s,i){var n=this.elements.getNode(e.id);t?(n.addClass("node-disabled"),this.setExpandedState(e,!1,s,i),this.setSelectedState(e,!1,s),this.setCheckedState(e,!1,s),s||this.elements.original.trigger("nodeDisabled",e)):(n.removeClass("node-disabled"),s||this.elements.original.trigger("nodeEnabled",e))},enableNode:function(e,t){for(var s=0;s<e.length;s++)this.setDisabledState(e[s],!1,t)},disableNode:function(e,t){for(var s=0;s<e.length;s++)this.setDisabledState(e[s],!0,t)},toggleDisabledState:function(e,t){var s=this.elements.getNode(e.id),i=s.hasClass("node-disabled");this.setDisabledState(e,!i,t)},toggleNodeDisabled:function(e,t){for(var s=0;s<e.length;s++)this.toggleDisabledState(e[s],t)},disableAll:function(e,t){var s=this.elements.getDisabledNodes(!0);s.addClass("node-disabled");var i=this;s.each(function(){var s=$(this).data("id"),n=i.getNode(s);i.setExpandedState(n,!1,e,t),i.setSelectedState(n,!1,e),i.setCheckedState(n,!1,e),e||i.elements.original.trigger("nodeDisabled",n)})},enableAll:function(e,t){var s=this.elements.getDisabledNodes(!1);s.removeClass("node-disabled");var i=this;s.each(function(){var t=$(this).data("id"),s=i.getNode(t);e||i.elements.original.trigger("nodeEnabled",s)})},selectNodeByIds:function(e,t){for(var s=e.split(","),i=[],n=0;n<s.length;n++){var a=this.getNode(s[n]);i.push(a)}this.selectNode(i,t)},unselectNodeByIds:function(e,t){for(var s=e.split(","),i=[],n=0;n<s.length;n++){var a=this.getNode(s[n]);i.push(a)}this.unselectNode(i,t)},checkNodeByIds:function(e,t){for(var s=e.split(","),i=[],n=0;n<s.length;n++){var a=this.getNode(s[n]);i.push(a)}this.checkNode(i,t)},uncheckNodeByIds:function(e,t){for(var s=e.split(","),i=[],n=0;n<s.length;n++){var a=this.getNode(s[n]);i.push(a)}this.uncheckNode(i,t)},getSelectNodes:function(){var e=this.elements.getSelectedNodes(!1),t=[],s=this;return e.each(function(){var e=$(this).data("id"),i=s.getNode(e);t.push(i)}),t},getCheckedNodes:function(e){var t=this.elements.getCheckedNodes(!1,e),s=[],i=this;return t.each(function(){var e=$(this).data("id"),t=i.getNode(e);s.push(t)}),s},getNode:function(e){var t=this.idIndexMap["id_"+e];return this.data[t]},revealNode:function(e,t){for(var s=0;s<e.length;s++)for(var i=e[s]._innerPath,n=i.split("|"),a=1;a<n.length-1;a++){var o=this.getNode(n[a]);this.setExpandedState(o,!0,t)}},search:function(e,t){var s={ignoreCase:!0,exactMatch:!1,revealResults:!0};t=$.extend({},s,t),this.clearSearch();var i=[];if(e&&e.length>0){t.exactMatch&&(e="^"+e+"$");var n="g";t.ignoreCase&&(n+="i"),i=this.findNodes(e,n)}return t.revealResults&&this.revealNode(i),this.elements.original.trigger("searchComplete",$.extend(!0,{},i)),i},clearSearch:function(){var e=this.elements.getSearchResultNodes();e.removeClass("search-result"),this.elements.original.trigger("searchCleared")},findNodes:function(e,t,s){t=t||"g",s=s||"text";for(var i=this.elements.getAllNodes(),n=[],a=0;a<i.length;a++){var o=$(i[a]),r=o.text(),l=r.match(new RegExp(e,t));if(l){o.addClass("search-result");var h=o.data("id"),c=this.getNode(h);n.push(c)}}return n},destroy:function(){this.container.empty(),this.container=null,this.unbindEvents()},unbindEvents:function(){this.elements.original.off("click"),this.elements.original.off("dblclick"),this.elements.original.off("nodedbclicked"),this.elements.original.off("nodeChecked"),this.elements.original.off("nodeCollapsed"),this.elements.original.off("nodeDisabled"),this.elements.original.off("nodeEnabled"),this.elements.original.off("nodeExpanded"),this.elements.original.off("nodeSelected"),this.elements.original.off("nodeUnchecked"),this.elements.original.off("nodeUnselected"),this.elements.original.off("searchComplete"),this.elements.original.off("searchCleared")},bindEvents:function(){this.unbindEvents();var e=null,t=this;this.elements.original.on("click",$.proxy(function(s){clearTimeout(e),e=setTimeout(function(){t.clickHandler(s)},300)},t)),this.elements.original.on("dblclick",$.proxy(function(s){clearTimeout(e),t.dblclickHandler(s)},t)),this.elements.original.on("nodedbclick",$.proxy(this.settings.onNodeDbclick,this)),this.elements.original.on("nodeChecked",$.proxy(this.settings.onNodeChecked,this)),this.elements.original.on("nodeCollapsed",$.proxy(this.settings.onNodeCollapsed,this)),this.elements.original.on("nodeDisabled",$.proxy(this.settings.onNodeDisabled,this)),this.elements.original.on("nodeEnabled",$.proxy(this.settings.onNodeEnabled,this)),this.elements.original.on("nodeExpanded",$.proxy(this.settings.onNodeExpanded,this)),this.elements.original.on("nodeSelected",$.proxy(this.settings.onNodeSelected,this)),this.elements.original.on("nodeUnchecked",$.proxy(this.settings.onNodeUnchecked,this)),this.elements.original.on("nodeUnselected",$.proxy(this.settings.onNodeUnselected,this)),this.elements.original.on("searchComplete",$.proxy(this.settings.onSearchComplete,this)),this.elements.original.on("searchCleared",$.proxy(this.settings.onSearchCleared,this))},getApi:function(){var e=this,t={collapseAll:"collapseAll",expandAll:"expandAll",checkAll:"checkAll",uncheckAll:"uncheckAll",disableAll:"disableAll",enableAll:"enableAll",checkNodeByIds:"checkNodeByIds",uncheckNodeByIds:"uncheckNodeByIds",selectNodeByIds:"selectNodeByIds",unselectNodeByIds:"unselectNodeByIds",getCheckedNodes:"getCheckedNodes",getSelectNodes:"getSelectNodes",getNode:"getNode"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="tree",i=s.ui.controls.Slowtree;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=function(){},n={onConfirm:i,multiSelect:!0,map:{id:"Id",text:"CNFullName"},titleName:"部门",inputHide:!1,renderTreeNode:void 0},a={multiSelect:"multi-select",titleName:"title-name"};this.Departselect=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.settings._currentPluginId=t,this.initElements()},parseTypeaheadData:function(e,t){t=t.split(","),this.Treeselect.modal.parseDataTrees(e);for(var s=0;s<t.length;s++)this.Treeselect.modal.states.orgsMap[t[s]].unselectable=!0},updateDataOrgs:function(e,t){t&&""!==t&&this.parseTypeaheadData(e,t),this.Treeselect.modal.updateDataOrgs(e),this.Treeselect.userselect.updateData(e)},initElements:function(){this.elements={original:this.element},this.Treeselect=new s.ui.controls.Treeselect(this.elements.original,{onConfirm:this.settings.onConfirm,multiSelect:this.settings.multiSelect,titleName:this.settings.titleName,map:this.settings.map,inputHide:this.settings.inputHide,renderTreeNode:this.settings.renderTreeNode})},setValue:function(e){this.Treeselect.userselect.setData(e)},refresh:function(){},enable:function(){this.Treeselect.element.prop("disabled",!1),this.Treeselect.userselect.enable(),this.disabled=!1},disable:function(){this.Treeselect.element.prop("disabled",!0),this.Treeselect.userselect.disable(),this.disabled=!0},onOpen:function(e){this.Treeselect.userselect.getButton().click()},disableNodeByIds:function(e){this.Treeselect.modal.controls.orgTree.disableNodeByIds(e)},getApi:function(){var e=this,t={onOpen:"onOpen",disableNodeByIds:"disableNodeByIds"},i=s.utilities.buildApi(e,t);return i},destory:function(){}})}),function(e){"use strict";var t="departselect",i=s.ui.controls.Departselect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destory(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=function(){},n={levels:2,dataUrl:"",showCheckbox:"none",selectMode:"none",checkRecursive:!0,multiSelect:!1,appendHtml:"",selectedNodeIds:"",checkedNodeIds:"",onNodeDbclick:i,onNodeChecked:i,onNodeCollapsed:i,onNodeDisabled:i,onNodeEnabled:i,onNodeExpanded:i,onNodeSelected:i,onNodeUnchecked:i,onNodeUnselected:i,unselect:!1},a={dataUrl:"data-url",levels:"levels",showCheckbox:"show-checkbox",selectMode:"select-mode",checkRecursive:"check-recursive",multiSelect:"multi-select",selectedNodeIds:"selected-node-ids",checkedNodeIds:"checked-node-ids",unselect:"unselect"};this.Combotree=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,s){if(t+=1,this.element=$(e),this.container,this.elements,this.value=this.element.val(),!this.element.data("initialized")){this.element.data("initialized",!0),this.element.data("plugin-id",t),this.initSettings(s),this.buildHtml(),this.initElements(),this.transferAttributes();var i=this;this.d=$.Deferred(),$.when(this.getData(this.d)).done(function(){i.render()}),this.bindEvents(),this.bindEventsInterface()}},buildHtml:function(){var e=this.element.data("plugin-id"),t='<div class="c-combotree-container">       <a class="btn btn-default c-combotree-btn" data-s-dropdown-id="#c-combotree-menu-'+e+'">           <span class="c-combotree-btn-text"></span>           <span class="glyphicon glyphicon-menu-down"></span>       </a>       <div id="c-combotree-menu-'+e+'" class="dropdown-menu">           <div class="tree-menu">            </div>       </div> </div>';this.container=$(t),this.element.before(this.container),this.element.hide()},initElements:function(){this.elements={orginal:this.element,viewContainer:$(".c-combotree-btn",this.container),view:$(".c-combotree-btn-text",this.container),menu:$(".dropdown-menu",this.container),tree:$(".tree-menu",this.container)},this.elements.orginal.hide(),this.dropdown=new s.ui.controls.Dropdown(this.elements.viewContainer,{}),this.elements.menu.on("click",function(e){e.preventDefault(),e.stopPropagation()})},getData:function(e){return this.settings.data?(this.data=$.extend(!0,[],this.settings.data),delete this.settings.data,e.resolve(),e.promise()):e.promise()},updateData:function(e){this.tree.getApi().setValue(e)},getCheckedNodes:function(){return this.tree.getApi().getCheckedNodes()},getSelectNodes:function(){return this.tree.getApi().getSelectNodes()},selectNodeByIds:function(e){e?this.tree.getApi().selectNodeByIds(e):this._getValues([])},unselectNodeByIds:function(e){return this.tree.getApi().unselectNodeByIds(e)},checkNodeByIds:function(e){e?this.tree.getApi().checkNodeByIds(e):this._getValues([])},disableNodeByIds:function(e){e&&this.tree.getApi().disableNodeByIds(e)},uncheckNodeByIds:function(e){return this.tree.getApi().uncheckNodeByIds(e)},closeTree:function(){this.dropdown.toggle()},render:function(){var e=this;this.tree=new s.ui.controls.Tree(this.elements.tree,{levels:e.settings.levels,showCheckbox:e.settings.showCheckbox,selectMode:e.settings.selectMode,checkRecursive:e.settings.checkRecursive,multiSelect:e.settings.multiSelect,selectedNodeIds:e.settings.selectedNodeIds,checkedNodeIds:e.settings.checkedNodeIds,data:[],onNodeChecked:function(t,s){var i=this,n=i.getCheckedNodes(!1);e._getValues(n),e.elements.view.trigger("nodeChecked",s)},onNodeUnchecked:function(t,s){var i=this,n=i.getCheckedNodes(!1);e._getValues(n),e.elements.view.trigger("nodeUnchecked",s)},onNodeSelected:function(t,s){var i=this.getSelectNodes();e.settings.unselect||e._getValues(i),e.elements.view.trigger("nodeSelected",s)},onNodeUnselected:function(t,s){var i=this.getSelectNodes();e.settings.unselect||e._getValues(i),e.elements.view.trigger("nodeUnselected",s)}})},_getValues:function(e){var t="";this.values="";for(var s=0;s<e.length;s++)t+=e[s].text+",",this.values+=e[s].id+",";t=t.substr(0,t.length-1),this.elements.view.text(t)},unbindEvents:function(){this.elements.view.off("nodedbclick"),this.elements.view.off("nodeChecked"),this.elements.view.off("nodeCollapsed"),this.elements.view.off("nodeDisabled"),this.elements.view.off("nodeEnabled"),this.elements.view.off("nodeExpanded"),this.elements.view.off("nodeSelected"),this.elements.view.off("nodeUnchecked"),this.elements.view.off("nodeUnselected")},bindEvents:function(){this.unbindEvents(),this.elements.view.on("nodedbclick",$.proxy(this.settings.onNodeDbclick,this)),this.elements.view.on("nodeChecked",$.proxy(this.settings.onNodeChecked,this)),this.elements.view.on("nodeCollapsed",$.proxy(this.settings.onNodeCollapsed,this)),this.elements.view.on("nodeDisabled",$.proxy(this.settings.onNodeDisabled,this)),this.elements.view.on("nodeEnabled",$.proxy(this.settings.onNodeEnabled,this)),this.elements.view.on("nodeExpanded",$.proxy(this.settings.onNodeExpanded,this)),this.elements.view.on("nodeSelected",$.proxy(this.settings.onNodeSelected,this)),this.elements.view.on("nodeUnchecked",$.proxy(this.settings.onNodeUnchecked,this)),this.elements.view.on("nodeUnselected",$.proxy(this.settings.onNodeUnselected,this))},destroy:function(){this.container.empty(),this.container=null,this.unbindEvents()},bindEventsInterface:function(){},transferAttributes:function(){this.element.prop("disabled")&&this.disable()},disable:function(){this.element.prop("disabled",!0),this.elements.viewContainer.addClass("disabled")},enable:function(){this.element.prop("disabled",!1),this.elements.viewContainer.removeClass("disabled")},getApi:function(){var e=this,t={getCheckedNodes:"getCheckedNodes",getSelectNodes:"getSelectNodes",disableNodeByIds:"disableNodeByIds",selectNodeByIds:"selectNodeByIds",unselectNodeByIds:"unselectNodeByIds",checkNodeByIds:"checkNodeByIds",uncheckNodeByIds:"uncheckNodeByIds",closeTree:"closeTree"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="combotree",i=s.ui.controls.Combotree;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=function(){},n={hasContact:!0,hasAddContact:!1,urlContacts:"",urlContactUsers:"",urlAddContacts:"",hasJobFilter:!1,hasOuterFilter:!1,urlOrgs:"",urlUsers:"",multiSelect:!0,inputHide:!1,onConfirm:i,confirmHide:!0,renderTreeNode:void 0,titleName:"选择人员",typeaheadMethod:{}},a={hasContact:"has-contact",hasAddContact:"has-add-contact",hasJobFilter:"has-job-filter",hasOuterFilter:"has-outer-filter",urlContacts:"url-contacts",urlContactUsers:"url-contact-users",urlAddContacts:"url-add-contacts",multiSelect:"multi-select",inputHide:"input-hide",urlJobs:"url-jobs",urlUsers:"url-users",urlOrgs:"url-orgs",confirmHide:"confirm-hide",titleName:"title-name"},o=new e.Class({data:{},init:function(e,t){this.userselect=e,this.settings=t,this.orgCount=0,this.contactCount=0,this.states={leftUsers:[],rightUsers:[],rightUserMap:{},filterLeftUsers:[],filterStates:"-100"},this.buildHtml(),this.initElements(),this.bindEvents(),this.bindEventsInterface()},getDataUsers:function(e){if(void 0!==this.settings.data&&void 0!==this.settings.data.users&&this.settings.data.users){var t=$.extend(!0,[],this.settings.data.users);return this.data.users=this.parseDataUsers(t),delete this.settings.data.users,e.resolve(),e.promise()}var s=this;return $.ajax({dataType:"json",url:s.settings.dataUrlUsers,data:{},success:function(t){s.data.users=s.parseDataUsers(t),e.resolve()},error:function(t,s,i){e.resolve()}}),e.promise()},getDataOrgs:function(e){if(void 0!==this.settings.data&&void 0!==this.settings.data.orgs&&this.settings.data.orgs){var t=$.extend(!0,[],this.settings.data.orgs);return this.data.orgs=this.parseDataOrgs(t),delete this.settings.data.orgs,e.resolve(),e.promise()}var s=this;return $.support.cors=!0,$.ajax({url:s.settings.dataUrlOrgs,dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){s.data.orgs=s.parseDataOrgs(t),e.resolve()},error:function(t,s,i){e.resolve()}}),e.promise()},parseDataUsers:function(e){var t=[];this.userMap={},this.parseUserMap={},this.orgUsersMap={};for(var s=0;s<e.length;s++){var i=e[s],n=this.tranferOriginalUser(i);t[t.length]=n,this.userMap[i.Id]=i,this.parseUserMap[i.Id]=n;var a=n.orgPath;if(a)for(var o=a.split(">"),r=0;r<o.length;r++){var l=o[r];this.orgUsersMap[l]||(this.orgUsersMap[l]=[]),this.orgUsersMap[l].push(n)}}for(var h in this.orgMap){var c=h;this.orgUsersMap[c]||(this.orgUsersMap[c]=[]),this.orgMap[h].text+="("+this.orgUsersMap[c].length+")"}return t},parseDataOrgs:function(e){this.orgIdPathMap={},this.orgMap={};var t=e[0],s={id:t.Id,parentId:t.ParentID,text:t.CNFullName,path:""+t.Id,orgPath:""+t.Id},i=[s];this.orgIdPathMap[t.Id]=i[0].orgPath,this.orgMap[t.Id]=s;for(var n=1;n<e.length;n++){t=e[n];for(var s,a=i[i.length-1];t.ParentID!==a.id&&a.nodes;)a=a.nodes[a.nodes.length-1];if(t.ParentID===a.id){a.nodes=a.nodes||[];var o=a.orgPath+">"+t.Id,s={id:t.Id,parentId:t.ParentID,text:t.CNFullName,path:a.path+">"+t.Id,orgPath:o};a.nodes[a.nodes.length]=s,this.orgIdPathMap[t.Id]=o,this.orgMap[t.Id]=s}}return this.orgCount=e.length,this.elements.colOrgNumber.text(this.orgCount+this.contactCount),i},parseDataContacts:function(e){this.contactUsersMap={};var t=e[0],s=this.getUsersByContanct(t);this.contactUsersMap[t.GroupID]=s;for(var i=[{id:t.GroupID,parentId:t.ParentID,text:t.GroupName+"("+s.length+")",path:""+t.GroupID}],n=0,a=1;a<e.length;a++){t=e[a];for(var o=i[i.length-1];t.ParentID!==o.id&&o.nodes;)o=o.nodes[o.nodes.length-1];t.ParentID===o.id&&(o.nodes=o.nodes||[],s=this.getUsersByContanct(t),this.contactUsersMap[t.GroupID]=s,o.nodes[o.nodes.length]={id:t.GroupID,parentId:t.ParentID,text:t.GroupName+"("+s.length+")",path:""+t.GroupID},n+=s.length)}return i[0].text=e[0].GroupName+"("+n+")",this.contactCount=n,this.elements.colOrgNumber.text(this.orgCount+this.contactCount),i},parseDataSetValueUsers:function(e){for(var t=[],s=0;s<e.length;s++){var i=e[s],n={id:i.Id,realName:i.RealName,name:i.HasSameName?i.RealName+"("+i.LoginName+")":i.RealName,hasSameName:i.HasSameName,loginName:i.LoginName,spell:i.Spell,spellFirst:i.SpellFirst,title:i.Title||"",orgId:i.OrgID,titleSortNo:i.TitleSortNo,innerOuter:i.CoreNonCore,orgPath:null,oriData:i};t.push(n)}return t},tranferOriginalUser:function(e){var t=e,s=this.orgIdPathMap[t.OrgID],i={id:t.Id,realName:t.RealName,name:t.HasSameName?t.RealName+"("+t.LoginName+")":t.RealName,hasSameName:t.HasSameName,loginName:t.LoginName,spell:t.Spell,spellFirst:t.SpellFirst,title:t.Title||"",orgId:t.OrgID,titleSortNo:t.TitleSortNo,innerOuter:t.CoreNonCore,orgPath:s,oriData:e.oriData||e};return i},tranferOriginalUsers:function(e){for(var t=[],s=0;s<e.length;s++)t.push(this.tranferOriginalUsers(e[s]));return t},tranferInnerUser:function(e){var t=e,s={Id:t.id,RealName:t.realName,LoginName:t.loginName,HasSameName:t.hasSameName,Spell:t.spell,SpellFirst:t.spellFirst,Title:t.title||"",OrgID:t.orgId,TitleSortNo:t.titleSortNo,CoreNonCore:t.innerOuter,oriData:t.oriData||t};return s},tranferInnerUsers:function(e){for(var t=[],s=0;s<e.length;s++)t.push(this.tranferInnerUser(e[s]));return t},getUsersByOrgId:function(e){var t=$.grep(this.data.users,function(t){var s=e+">";return t.orgPath.indexOf(s)>-1});return t||[]},getUsersByContanct:function(e){if(this.parseUserMap){var t=e.userIDs,s=[];if(!t||0===t.length)return s;for(var i=0;i<t.length;i++){var n=this.parseUserMap[t[i]];s.push(n)}return s}},updateDataUsers:function(e){this.data.users=e,this.render()},updateDataContacts:function(e){this.data.contacts=this.parseDataContacts(e),this._renderContactTree()},updateDataOrgs:function(e){this.data.orgs=this.parseDataOrgs(e)},updateDataJobFilter:function(e){this.data.jobfilter=e,this.renderJobFilter()},buildHtml:function(){var e='                        <select class="joblist">                            <option selected="selected" value="-100">请选择职务</option>                            <option value="1">理事长</option>                            <option value="2">总经理</option>                            <option value="3">监事长</option>                            <option value="4">副总经理</option>                            <option value="5">总经理助理</option>                            <option value="6">总监</option>                            <option value="7">副总监</option>                            <option value="10">首席研究员</option>                            <option value="11">主任研究员</option>                            <option value="12">高级执行经理</option>                            <option value="13">副主任研究员</option>                            <option value="14">执行经理</option>                            <option value="15">区域首席代表</option>                            <option value="16">研究员</option>                            <option value="17">高级经理</option>                            <option value="18">副研究员</option>                            <option value="19">经理</option>                            <option value="20">助理经理</option>                            <option value="-6">总监以上</option>                            <option value="-7">副总监以上</option>                            <option value="-17">高级经理以上</option>                            <option value="-19">经理以上</option>                        </select>',t=this.settings.multiSelect?'<a class="btn btn-default check-all">全选 <span>&gt;&gt;</span></a>':"",s='<div class="c-orgselect-container">    <div class="col-org">        <div class="row-query">            <input class="query-typeahead form-control"  placeholder="请输入关键字" />        </div>        <div class="row-header">            <span class="title">部门</span>            <span class="number-container">(<span class="number">0</span>)</span>        </div>        <div class="row-tree">            <div class="contact-tree"></div>            <div class="org-tree"></div>        </div>    </div>    <div class="col-leftselect">        <div class="row-header">            <span class="title">待选</span>            <span class="number-container">(<span class="number">0</span>)</span>        </div>        <div class="row-filter">            <div class="joblist-container pull-left">'+e+'</div>           <div class="clklist pull-left">               <input type="checkbox" class="c-inner" checked="checked" /><label>所内</label>               <input type="checkbox" class="c-outer" checked="checked" /><label>所外</label>           </div>        </div>        <div class="row-list">            <div class="person-list"></div>        </div>    </div>    <div class="col-buttons">'+t+'        <a class="btn btn-default check-in">添加<span>&gt;</span></a>        <a class="btn btn-default check-out"><span>&lt;</span>移除</a>        <a class="btn btn-default check-clear"><span>&lt;&lt;</span>清除</a>    </div>    <div class="col-rightselect">        <div class="row-header">            <span class="title">已选</span>            <span class="number-container">(<span class="number">0</span>)</span>        </div>        <div class="row-contact">            <div class="btn-control">                <a class="btn btn-default set-contact">设为常用联系组</a>            </div>           <div class="content-control">                <input type="text" class="contact-name" />                <button type="button" class="btn btn-default save-btn">保存</button>            </div>        </div>        <div class="row-list">            <div class="person-list"></div>        </div>    </div>    <div class="clearfix"></div></div>',i='<div class="modal-content c-orgselect-modal">    <div class="modal-header">        <button type="button" class="close"><span aria-hidden="true">&times;</span></button>        <h4 class="modal-title">'+this.settings.titleName+'</h4>    </div>    <div class="modal-body">'+s+'    </div>    <div class="modal-footer">         <button type="button" class="btn btn-default cancel">取消</button>        <button type="button" class="btn btn-primary confirm">确定</button>    </div></div>';this.container=$(i)},initElements:function(){var e=this,t="#c-orgselect-dialog-"+this.settings._currentPluginId,i=new s.ui.controls.Modal(this.userselect.getButton(),{modalId:t,modalClass:"c-orgselect-modal",content:this.container,backdrop:"static"});this.elements={colOrgQueryTypeahead:$(".col-org .query-typeahead",this.container),colOrgNumber:$(".col-org .number",this.container),colOrgContactTree:$(".col-org .contact-tree",this.container),colOrgOrgTree:$(".col-org .org-tree",this.container),colLeftSelectNumber:$(".col-leftselect .number",this.container),colLeftSelectJoblist:$(".col-leftselect .joblist",this.container),colLeftSelectInner:$(".col-leftselect .c-inner",this.container),colLeftSelectOuter:$(".col-leftselect .c-outer",this.container),colLeftSelectLabel:$(".col-leftselect label",this.container),colLeftClklist:$(".col-leftselect .clklist",this.container),colLeftSelectPersonList:$(".col-leftselect .person-list",this.container),colLeftSelectRowFilter:$(".col-leftselect .row-filter",this.container),colButtonsCheckAll:$(".col-buttons .check-all",this.container),colButtonsCheckIn:$(".col-buttons .check-in",this.container),colButtonsCheckOut:$(".col-buttons .check-out",this.container),colButtonsCheckClear:$(".col-buttons .check-clear",this.container),colRightSelectNumber:$(".col-rightselect .number",this.container),colRightSelectSetContact:$(".col-rightselect .set-contact",this.container),colRightSelectContactName:$(".col-rightselect .contact-name",this.container),colRightSelectSaveBtn:$(".col-rightselect .save-btn",this.container),colRightSelectPersonList:$(".col-rightselect .person-list",this.container),colRightSelectRowContact:$(".col-rightselect .row-contact",this.container),confirm:$(".modal-footer .confirm",this.container),cancel:$(".modal-footer .cancel",this.container)},this.elements.colButtonsCheckIn.css("visibility","hidden"),this.elements.colButtonsCheckOut.css("visibility","hidden"),this.settings.hasContact?this.settings.hasAddContact||(this.elements.colRightSelectRowContact.remove(),this.container.addClass("none-contact-container")):(this.elements.colOrgContactTree.remove(),this.elements.colRightSelectRowContact.remove(),this.container.addClass("none-contact-container"));var n=!0;this.settings.hasJobFilter||this.settings.hasOuterFilter||(this.elements.colLeftSelectRowFilter.remove(),this.container.addClass("none-filter-container"),n=!1),!this.settings.hasJobFilter&&n&&this.elements.colLeftSelectJoblist.remove(),!this.settings.hasOuterFilter&&n&&this.elements.colLeftClklist.remove();var a=new s.ui.controls.Typeahead(this.elements.colOrgQueryTypeahead,{map:'{"text":"name","returnValue":"json"}',template:this.settings.typeaheadMethod.template,onChanged:this.settings.typeaheadMethod.onChanged||function(e,t){this.query=this.query,this.matcherReg=new RegExp(t,"i")},matcher:this.settings.typeaheadMethod.matcher||function(e){var t=this.matcherReg||new RegExp(this.query,"i"),s=t.test(e.name)||t.test(e.loginName)||t.test(e.spell)||t.test(e.spellFirst);return s===!0?1:-1},onSelected:this.settings.typeaheadMethod.onSelected||function(t,s){var i=this.getValue(s);e.addUsers([i]),e.checkLeft(e.getRightUsers())},mouseover:this.settings.typeaheadMethod.mouseover||function(e,t){var s=this.getValue(t);""!==s.title&&$(e.currentTarget).find("a").html(s.realName+"("+s.title+")")},mouseout:this.settings.typeaheadMethod.mouseout||function(e,t){var s=this.getValue(t);$(e.currentTarget).find("a").html(s.name)}}),o=null,r=null;this.settings.hasContact&&(o=new s.ui.controls.Tree(this.elements.colOrgContactTree,{levels:1,multiSelect:!1,onNodeSelected:function(t,s){e.onNodeSelected(t,s,"contact")},renderNode:this.settings.renderTreeNode}),this.settings.hasAddContact&&(r=new s.ui.controls.Typeahead(this.elements.colRightSelectSetContact,{map:'{"text":"name","returnValue":"json"}',matcher:function(e){return this.query?1:e.name.toLowerCase().indexOf(this.query.toLowerCase())>-1?1:e.loginName.toLowerCase().indexOf(this.query.toLowerCase())>-1?1:e.spell.toLowerCase().indexOf(this.query.toLowerCase())>-1?1:e.spellFirst.toLowerCase().indexOf(this.query.toLowerCase())>-1?1:-1},onSelected:function(t,s){var i=this.getValue(s),n=e.controls.rightselect.elements.right;0===n.find('option[value="'+i.id+'"]').length&&(n.append('<option value="'+i.id+'">'+i.name+"</option>"),e._updateSelectedCount())}})));var l=new s.ui.controls.Tree(this.elements.colOrgOrgTree,{levels:1,multiSelect:!1,onNodeSelected:function(t,s){e.onNodeSelected(t,s,"org")},renderNode:this.settings.renderTreeNode}),h=null;this.settings.hasJobFilter&&(h=new s.ui.controls.Selectex(this.elements.colLeftSelectJoblist,{selectFirst:!0,onSelected:function(t,s){e.states.filterStates=s.value,e.checkFilter()}}),h.setValue("-100"));var c=new s.ui.controls.Selectlist(this.elements.colLeftSelectPersonList,{map:{text:"name",value:"id"},mouseover:function(e,t){""!==t.title&&$(e.target).html(t.realName+"("+t.title+")")},mouseout:function(e,t){$(e.target).html(t.name)},click:function(t,s){var i=$(t.target).is("li")?$(t.target):$(t.target).parent("li");i.hasClass("c-selectlist-checked")?(e.removeUsers([s]),e.controls.rightSelectPersonList.clearSelectedItems(),e.checkLeft(e.getRightUsers())):(e.addUsers([s]),e.controls.leftSelectPersonList.clearSelectedItems(),e.checkLeft(e.getRightUsers()))}}),d=new s.ui.controls.Selectlist(this.elements.colRightSelectPersonList,{map:{text:"name",value:"id"},mouseover:function(e,t){""!==t.title&&$(e.target).html(t.realName+"("+t.title+")")},mouseout:function(e,t){$(e.target).html(t.name)},click:function(t,s){e.removeUsers([s]),e.controls.rightSelectPersonList.clearSelectedItems(),e.checkLeft(e.getRightUsers())}});this.controls={pop:i,typeahead:a,contactTree:o,orgTree:l,jobFilter:h,leftSelectPersonList:c,rightSelectPersonList:d}},bindEvents:function(){this.elements.confirm.on("click",$.proxy(this.onConfirm,this)),this.settings.hasOuterFilter&&(this.elements.colLeftSelectInner.on("click",$.proxy(this.checkFilter,this)),this.elements.colLeftSelectOuter.on("click",$.proxy(this.checkFilter,this))),this.elements.colButtonsCheckAll.on("click",$.proxy(this.checkAll,this)),this.elements.colButtonsCheckIn.on("click",$.proxy(this.checkIn,this)),this.elements.colButtonsCheckOut.on("click",$.proxy(this.checkOut,this)),this.elements.colButtonsCheckClear.on("click",$.proxy(this.checkClear,this)),this.elements.confirm.on("onConfirm",$.proxy(this.settings.onConfirm,this))},bindEventsInterface:function(){},onNodeSelected:function(e,t,s){var i=null;if("org"===s?(i=this.orgUsersMap[t.id],this.selectOrgId=t.id,this.selectContactId&&this.controls.contactTree.unselectNodeByIds(this.selectContactId),this.selectContactId=null):(i=this.contactUsersMap[t.id],this.selectContactId=t.id,this.selectOrgId&&this.controls.orgTree.unselectNodeByIds(this.selectOrgId),this.selectOrgId=null),this.settings.hasJobFilter){var n=this.renderLeft(i);this.states.filterLeftUsers=n,this.states.leftUsers=i,this.controls.leftSelectPersonList.setData(n),this.elements.colLeftSelectNumber.text(n.length),this.checkLeft(this.getRightUsers())}else this.states.leftUsers=i,this.controls.leftSelectPersonList.setData(i),this.elements.colLeftSelectNumber.text(i.length),this.checkLeft(this.getRightUsers())},checkAll:function(e){this.settings.hasJobFilter?this.addUsers(this.states.filterLeftUsers):this.addUsers(this.states.leftUsers),this.controls.leftSelectPersonList.clearSelectedItems(),this.checkLeft(this.getRightUsers())},checkIn:function(e){var t=this.controls.leftSelectPersonList.getSelectedItems();this.addUsers(t),this.controls.leftSelectPersonList.clearSelectedItems(),this.checkLeft(this.getRightUsers())},checkOut:function(){var e=this.controls.rightSelectPersonList.getSelectedItems();this.removeUsers(e),this.controls.leftSelectPersonList.clearSelectedItems(),this.checkLeft(this.getRightUsers())},checkClear:function(){var e=this.getRightUsers();this.removeUsers(e),this.controls.leftSelectPersonList.clearSelectedItems(),this.checkLeft(this.getRightUsers())},addUsers:function(e){var t,s=[];if(this.settings.multiSelect){for(var i=0;i<e.length;i++)t=e[i],this.states.rightUserMap[t.id]||(s.push(t),this.states.rightUserMap[t.id]=t);this.controls.rightSelectPersonList.addItem(s);
var n=Object.keys(this.states.rightUserMap).length;this.elements.colRightSelectNumber.text(n)}else t=Array.isArray(e)?e[e.length-1]:e,this.states.rightUserMap[t.id]||(this.states.rightUserMap={},s.push(t),this.states.rightUserMap[t.id]=t),this.controls.rightSelectPersonList.coverItem(s),this.elements.colRightSelectNumber.text(1)},removeUsers:function(e){for(var t=0;t<e.length;t++){var s=e[t];delete this.states.rightUserMap[s.id]}this.controls.rightSelectPersonList.deleteItem(e);var i=Object.keys(this.states.rightUserMap).length;this.elements.colRightSelectNumber.text(i)},getRightUsers:function(){var e=[];for(var t in this.states.rightUserMap)e.push(this.states.rightUserMap[t]);return e},setRightUsers:function(e){this.states.rightUserMap={};for(var t=0;t<e.length;t++){var s=e[t];this.states.rightUserMap[s.id]=s}this.controls.rightSelectPersonList.setData(e)},checkLeft:function(e){this.controls.leftSelectPersonList.clearCheckedItems(),this.controls.leftSelectPersonList.setCheckedItems(e)},onConfirm:function(e){this._renderValue();var t=this.getRightUsers();this.settings.confirmHide?this.controls.pop.hide():t.length>0&&this.controls.pop.hide()},render:function(){this._renderTypeahead(),this._renderOrgTree()},_renderTypeahead:function(){this.controls.typeahead.setSource(this.data.users)},_renderOrgTree:function(){this.controls.orgTree.setValue(this.data.orgs,2)},_renderContactTree:function(){this.controls.contactTree.setValue(this.data.contacts,2)},setSelectValue:function(e){this.setRightUsers(e),this.checkLeft(e),this.elements.colRightSelectNumber.text(e.length)},checkFilter:function(){var e=this.states.leftUsers||[];if(!(e.length<=0)){var t=this.renderLeft(e);this.states.filterLeftUsers=t,this.controls.leftSelectPersonList.setData(t),this.elements.colLeftSelectNumber.text(t.length),this.checkLeft(this.getRightUsers())}},renderLeft:function(e){for(var t=[],s=this.states.filterStates,i=this.elements.colLeftSelectInner.is(":checked"),n=this.elements.colLeftSelectOuter.is(":checked"),a=0;a<e.length;a++){var o=e[a];("-100"==s||s>0&&o.titleSortNo==s||s<=0&&o.titleSortNo<=-s)&&(i&&"内部"==o.innerOuter||n&&"外部"==o.innerOuter)&&t.push(o)}return t},_renderValue:function(){var e=this.getRightUsers();this.userselect.setData(e),this.settings.onConfirm.apply(this,[this.tranferInnerUsers(e)])},show:function(){this.container.show()},hide:function(){this.container.hide()}});this.Orgselect=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.settings._currentPluginId=t,this.initElements()},updateDataUsers:function(e){var t=this.modal.parseDataUsers(e);this.userselect.updateData(t),this.modal.updateDataUsers(t)},updateDataOrgs:function(e){this.modal.updateDataOrgs(e)},updateDataContacts:function(e){this.modal.updateDataContacts(e)},initElements:function(){var e=this;this.elements={original:this.element},this.userselect=new s.ui.controls.UserSelect(this.elements.original,{map:'{"text":"name","returnValue":"json"}',typeaheadMethod:this.settings.typeaheadMethod,ishide:this.settings.inputHide,onblured:function(t){e.settings.onConfirm.apply(e,[e.modal.tranferInnerUsers(t)])}}),this.modal=new o(this.userselect,this.settings);var e=this;this.userselect.getButton().on("click",function(t){e.modal.setSelectValue(e.userselect.getValue())})},setValue:function(e){var t=this.modal.parseDataSetValueUsers(e);this.userselect.setData(t)},refresh:function(){},enable:function(){this.element.prop("disabled",!1),this.userselect.enable(),this.disabled=!1},disable:function(){this.element.prop("disabled",!0),this.userselect.disable(),this.disabled=!0},onOpen:function(e){this.userselect.getButton().click()},disableNodeByIds:function(e){this.modal.controls.orgTree.disableNodeByIds(e)},getApi:function(){var e=this,t={onOpen:"onOpen",disableNodeByIds:"disableNodeByIds"},i=s.utilities.buildApi(e,t);return i},destory:function(){}})}),function(e){"use strict";var t="orgselect",i=s.ui.controls.Orgselect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destory(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t="上一页",i="下一页",n="跳转到",a="Go",o={enlangflag:!1,totalSize:0,pageSize:10,pageIndex:0,pageButtons:5,onPageIndexChange:void 0,pageType:"intricacy"},r={enlangflag:"enlangflag",totalSize:"total-size",pageSize:"page-size",pageIndex:"page-index",pageButtons:"page-buttons",pageType:"page-type"};this.Paginator=new e.Class({extend:s.ui.BaseControl},{defaults:o,attributeMap:r,settings:{},value:"",data:{},templates:{},init:function(e,s){if(this.element=$(e),!this.element.is("ul"))throw"in Bootstrap version 3 the pagination root item must be an ul element.";this.initSettings(s),this.settings.enlangflag&&(t="Prev",i="Next",n="To",a="GO"),this.inputPage=1,this.updateOptions(this.settings),this.bindEventsInterface()},buildHtml:function(){},initElements:function(){},bindEventsInterface:function(){var e=this.element;this.settings.onPageIndexChange&&e.on("paginator.on.pageindexchange",$.proxy(this.settings.onPageIndexChange,this))},updateOptions:function(e){this.settings=$.extend(!0,{},this.settings,e),this.settings.totalSize%this.settings.pageSize===0?this.totalPages=this.settings.totalSize/this.settings.pageSize:this.totalPages=Math.ceil(this.settings.totalSize/this.settings.pageSize),this.totalPages=this.totalPages<1?1:this.totalPages,1==this.totalPages?this.element.hide():this.element.css("display","inline-block"),this.settings.pageButtons=this.settings.pageButtons%2===0?this.settings.pageButtons+1:this.settings.pageButtons,this.refresh()},jumpTo:function(e){this.settings.pageIndex=e<0?0:e>this.totalPages-1?this.totalPages-1:e,this.refresh()},_getPageButtons:function(){var e=(this.settings.totalSize,this.totalPages),t=0,s=Math.floor(this.settings.pageButtons/2);t=this.settings.pageIndex-s,t=t<this.totalPages-this.settings.pageButtons?t:this.totalPages-this.settings.pageButtons,t=t<0?0:t;for(var i=[],n=t,a=0;a<this.settings.pageButtons&&n<e;n+=1,a+=1)i.push(n);return t>0&&(i.first=0),e>=this.settings.pageButtons+2&&this.settings.pageIndex-s>1&&(i.prevSection=this.settings.pageIndex-s-1),this.settings.pageIndex>0?i.prev=this.settings.pageIndex-1:i.prev=0,this.settings.pageIndex<e-1?i.next=this.settings.pageIndex+1:i.next=e-1,e>this.settings.pageButtons&&this.settings.pageIndex+s<this.totalPages-2&&(i.nextSection=this.settings.pageIndex+s+1),t<e-this.settings.pageButtons&&(i.last=e-1),i},onPageIndexChange:function(e){var t=parseInt($(e.target).attr("data-pi"),10);this.settings.pageIndex!=t&&(this.element.trigger("paginator.on.pageindexchange",t),this.jumpTo(t))},refresh:function(){var e=this._getPageButtons(),s=this.element;this.element.addClass("pagination"),this.element.empty();var o="",r="";if(r=0===this.settings.pageIndex?'<li class="disabled" data-show="prev"><a data-pi="'+e.prev+'">&lt;'+t+"</a><li>":'<li data-show="prev"><a data-pi="'+e.prev+'">&lt;'+t+"</a><li>",o+=r,"intricacy"==this.settings.pageType){if("undefined"!=typeof e.first){var l='<li><a data-pi="0">1</a><li>';o+=l}if("undefined"!=typeof e.prevSection){var h='<li class="ellipsed ellipsed-prev"><a data-pi="'+e.prevSection+'">...</a><li>';o+=h}for(var c=0;c<e.length;c+=1){var d=e[c]===this.settings.pageIndex?' class="active"':"",u="<li"+d+'><a data-pi="'+e[c]+'" class="'+(c==e.length-1?"item item-last":"item")+'">'+(e[c]+1)+"</a><li>";o+=u}if("undefined"!=typeof e.nextSection){var p='<li class="ellipsed ellipsed-next"><a data-pi="'+e.nextSection+'">...</a><li>';o+=p}if("undefined"!=typeof e.last){var m='<li><a data-pi="'+e.last+'">'+(e.last+1)+"</a><li>";o+=m}var f="";f=this.settings.pageIndex===this.totalPages-1?'<li class="next disabled" data-show="next"><a data-pi="'+e.next+'">'+Mi18n.locale("szsewebui.nextPage")+"&gt;</a><li>":'<li class="next" data-show="next"><a data-pi="'+e.next+'">'+Mi18n.locale("szsewebui.nextPage")+"&gt;</a><li>",o+=f,s.append(o),$('li a[data-pi="0"]',s).addClass("first"),$('li a[data-pi="'+(this.totalPages-1)+'"]',s).addClass("last");var g='<li class="pagination-go intricacy"><div>   <label class="lbl">'+n+'：</label>   <div class="input-group">     <input type="text" class="page-cur form-control">     <span class="page-go-btn input-group-addon">'+a+"!</span></div></div></li>";s.append(g)}else if("simple"==this.settings.pageType){s.append(o);var g='<li class="pagination-go simple"><div>     <input type="text" class="page-cur form-control">   <span class="separateline">/</span>   <span class="page-all">'+this.totalPages+"</span></div></li>";s.append(g);var f="";f=this.settings.pageIndex===this.totalPages-1?'<li class="disabled" data-show="next"><a data-pi="'+e.next+'">'+i+"&gt;</a><li>":'<li data-show="next"><a data-pi="'+e.next+'">'+i+"&gt;</a><li>",s.append(f)}$("input[type=text]",s).val(this.settings.pageIndex+1);$(".page-cur",s).mask("0000000");var v=this;$(".page-go-btn",s).on("click",$.proxy(this.onPageGo,this)),$(".page-cur",s).on("keypress",function(e){if(13==e.which)return v.onPageGo(),!1}),$("a",s).on("click",$.proxy(this.onPageIndexChange,this))},onPageGo:function(){var e=this.element,t=this,s=$(".page-cur",e).val();("undefined"==typeof s||""===s||isNaN(parseInt(s)))&&(s=1),s=parseInt(s),s<1?s=1:s>t.totalPages&&(s=t.totalPages),$(".page-cur",e).val(s),s=parseInt(s)-1,t.inputPage=s+1,t.element.trigger("paginator.on.pageindexchange",s),t.jumpTo(s)},checkNumber:function(e){var t=/^[1-9]+[0-9]*]*$/,s=-1;return isNaN(parseInt(e))?s:(e=parseInt(e),t.test(e)?s=1:s)},enable:function(){},disable:function(){},destroy:function(){this.element.off("page-clicked"),this.element.off("page-changed"),this.element.empty()}})}),function(e){"use strict";var t="paginator",i=s.ui.controls.Paginator;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t={all:"all",none:"none",leaf:"leaf"},i={checked:"checked",unchecked:"unchecked",partOf:"partOf"},n={all:"all",leaf:"leaf"},a=function(){},o=0,r={levels:1,dataUrl:"",expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"empty",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",checkedPartOfIcon:"glyphicon glyphicon-check partOfchecked",uncheckedIcon:"glyphicon glyphicon-unchecked",clsNodeText:"nodeValue",clsAppendHtml:"appendHtml",render:void 0,renderNode:void 0,clsBadge:"badge",clsItemContent:"item-content",clsSwitch:"switch",clsNodeUnSelect:"node-unselectable",clsNodeSelected:"node-selected",clsNodeDisabled:"node-disabled",enableLinks:!1,enableTitle:!1,showIcon:!0,showTags:!1,multiSelect:!0,silent:!1,ignoreChildren:!1,expandOne:!0,dnd:"none",showCheckbox:t.none,checkRecursive:!1,selectMode:n.all,appendHtml:"",parseAppendHtml:void 0,selectedNodeIds:"",checkedNodeIds:"",disabledNodeIds:"",onNodeDbclick:a,onNodeRightclick:a,onNodeChecked:a,onNodeCollapsed:a,onNodeDisabled:a,onNodeEnabled:a,onNodeExpanded:a,onNodeSelected:a,onNodeUnchecked:a,onNodeUnselected:a,onSearchComplete:a,onSearchCleared:a},l={expandOne:"expand-one",ignoreChildren:"ignore-children",expandIcon:"expand-icon",collapseIcon:"collapse-icon",showTags:"show-tags",levels:"levels",enableTitle:"enable-title",dataUrl:"data-url",showCheckbox:"show-checkbox",checkRecursive:"check-recursive",selectMode:"select-mode",appendHtml:"append-html",multiSelect:"multi-select",selectedNodeIds:"selected-node-ids",checkedNodeIds:"checked-node-ids",disabledNodeIds:"disabled-node-ids",dnd:"dnd"};this.Tree=new e.Class({extend:s.ui.BaseControl},{defaults:r,attributeMap:l,init:function(e,t){this.element=$(e),o+=1,this.element.data("plugin-id",o),this.initSettings(t),"function"==typeof this.settings.parseData&&(this.parseData=this.settings.parseData,delete this.settings.parseData),this.initData(),this.appendTemplate=this.settings.renderAppend||this.appendTemplate,this.render=this.settings.render||this.render,this.container=$("<ul></ul>");var s=this;$.when(this.getData()).done(function(){s._parseTreeData(s.data),s.refresh(),s.bindEvents()})},getData:function(){var e=$.Deferred();if(this.settings.data){var t=$.extend(!0,[],this.settings.data);return this.data={nodes:t},delete this.settings.data,e.resolve(),e.promise()}return e.resolve(),e.promise()},initData:function(){this.data={},this.nodeDataMap={},this.nodesMap={},this._currentSelectNode=null,this.operateNodes={selectedNodesList:[],checkedNodesList:[],partOfCheckedList:[]}},setValue:function(e,t){this.initData();var s=$.extend(!0,[],e);this.data={nodes:s},this._parseTreeData(this.data),this.refresh(),"undefined"==typeof t?this.expandLevel(this.settings.levels):this.expandLevel(t)},refresh:function(){var e=this._buildTree(this.data);this.container.empty(),this.container.remove(),this.container.append(e),this.element.addClass("c-tree"),this.element.empty().append(this.container)},unbindEvents:function(){this.element.off("nodedbclick"),this.element.off("noderightclick"),this.element.off("nodeChecked"),this.element.off("nodeCollapsed"),this.element.off("nodeDisabled"),this.element.off("nodeEnabled"),this.element.off("nodeExpanded"),this.element.off("nodeSelected"),this.element.off("nodeUnchecked"),this.element.off("nodeUnselected")},bindEvents:function(){this.unbindEvents(),this.element.on("nodedbclick",$.proxy(this.settings.onNodeDbclick,this)),this.element.on("noderightclick",$.proxy(this.settings.onNodeRightclick,this)),this.element.on("nodeChecked",$.proxy(this.settings.onNodeChecked,this)),this.element.on("nodeCollapsed",$.proxy(this.settings.onNodeCollapsed,this)),this.element.on("nodeDisabled",$.proxy(this.settings.onNodeDisabled,this)),this.element.on("nodeEnabled",$.proxy(this.settings.onNodeEnabled,this)),this.element.on("nodeExpanded",$.proxy(this.settings.onNodeExpanded,this)),this.element.on("nodeSelected",$.proxy(this.settings.onNodeSelected,this)),this.element.on("nodeUnchecked",$.proxy(this.settings.onNodeUnchecked,this)),this.element.on("nodeUnselected",$.proxy(this.settings.onNodeUnselected,this))},onNodeDragStart:function(e,t){return"function"!=typeof this.settings.onNodeDragStart||this.settings.onNodeDragStart.apply(this,[e,t])},onNodeDropStart:function(e,t){return"function"!=typeof this.settings.onNodeDropStart||this.settings.onNodeDropStart.apply(this,[e,t])},bindDragForElement:function(e){var t=this,s=$.extend(!0,{revert:!1,helper:"clone",start:function(s,i){var n=t.onNodeDragStart(s,i);n||e.draggable({disabled:!0})},drag:function(e,s){"function"==typeof t.settings.onNodeDrag&&t.settings.onNodeDrag.apply(t,[e,s])},stop:function(e,s){"function"==typeof t.settings.onNodeDragStop&&t.settings.onNodeDragStop.apply(t,[e,s])}},this.settings.draggable);e.draggable(s)},bindDropForElement:function(e){var t=this,s=$.extend(!0,{greedy:!0,hoverClass:"node-hover",over:function(s,i){var n=t.onNodeDropStart(s,i);n||e.droppable({disabled:!0})},drop:function(e,s){"function"==typeof t.settings.onNodeDrop&&t.settings.onNodeDrop.apply(t,[e,s])}},this.settings.droppable);e.droppable(s)},bindDnDForElement:function(e){"drag"===this.settings.dnd?this.bindDragForElement(e):"drop"===this.settings.dnd?this.bindDropForElement(e):"dnd"===this.settings.dnd&&(this.bindDragForElement(e),this.bindDropForElement(e))},destroy:function(){this.container.empty(),this.container=null,this.unbindEvents()},_replaceClass:function(e,t,s){e&&e.removeClass(s).addClass(t)},_parseTreeData:function(e,t){var s=0,i=null,n=e.id||-1;if("undefined"==typeof t&&(t=1),e&&e.nodes){for(var a=e.nodes.length;s<a;)i=e.nodes[s],i._innerParentId=n,i._innerLevel=t,i.nodes&&i.nodes.length>0?(i._isExpand=!1,i._hasChildren=!0):i._hasChildren=!1,s++,this.nodeDataMap[i.id]=i,this._parseTreeData(i,t+1);return e}},offsetHeight:function(e){return e instanceof jQuery&&(e=e[0]),e.getBoundingClientRect()},_getElPosition:function(e){return e instanceof jQuery&&(e=e[0]),e.getBoundingClientRect()},_buildTree:function(e,s,a){"undefined"==typeof s&&(s=1);var o=a||$(document.createDocumentFragment()),r=e,l=null,h=0;if(r&&r.nodes){for(var c=r.nodes.length;h<c;){l=r.nodes[h];var d={node:$("<li/>").attr("data-id",l.id).attr("data-level",s).attr("data-hasChildren",l._hasChildren).attr("data-disabled",l._isDisabled).data("node-data",l),nodeIcon:$("<span/>").addClass(this.settings.clsSwitch).addClass(this.settings.nodeIcon),checkIcon:$("<span/>").addClass(this.settings.uncheckedIcon),nodeValue:$("<span/>").addClass(this.settings.clsNodeText).text(l.text).attr("onselectstart","return false"),appendHtml:$("<span/>").addClass(this.settings.clsAppendHtml),wrapper:$("<div/>").addClass(this.settings.clsItemContent),childrenNode:null};this.settings.enableTitle&&d.node.attr("title",l.text),l._hasChildren&&(d.nodeIcon.on("click",$.proxy(this.toggleExpandNode,this)),this._replaceClass(d.nodeIcon,this.settings.expandIcon,this.settings.nodeIcon)),l._hasChildren&&this.settings.selectMode===n.leaf?d.wrapper.addClass(this.settings.clsNodeUnSelect):(l._isSelected&&(d.wrapper.addClass(this.settings.clsNodeSelected),this._addSelectedNode(l),this._currentSelectNode=d.wrapper),d.nodeValue.on("click",$.proxy(this.toggleSelectNode,this))),d.nodeValue.on("dblclick",$.proxy(this.onNodeDbclick,this)),d.nodeValue.on("mousedown",$.proxy(this.onNodeRightclick,this)),d.wrapper.append(d.nodeIcon),(this.settings.showCheckbox===t.all||!l._hasChildren&&this.settings.showCheckbox===t.leaf)&&(d.wrapper.append(d.checkIcon),d.node.data("node-check",d.checkIcon),d.checkIcon.on("click",$.proxy(this.toggleCheckNode,this)),"undefined"==typeof l._checkSate?l._checkSate=i.unchecked:(this._replaceClass(d.checkIcon,this._getCheckIconByState(l._checkSate),this.settings.uncheckedIcon),this._singleCheckSateNode(d.node,l,l._checkSate))),d.wrapper.append(d.nodeValue),l._isDisabled&&(d.wrapper.addClass(this.settings.clsNodeDisabled),this.disableNodeByIds(l.id)),this.bindDnDForElement(d.node);var u="";this.settings.renderNode&&(u=this.settings.renderNode(l),d.nodeValue.html(""),d.nodeValue.append(u),d.wrapper.append(d.nodeValue));var p="";if(this.settings.appendHtml){if(this.settings.parseAppendHtml){var m=this.settings.parseAppendHtml(this.settings.appendHtml);p=m}else p=this.settings.appendHtml;d.appendHtml.append(p),d.wrapper.append(d.appendHtml)}var f="";if(this.settings.render&&(f=this.settings.render(l),f=this.settings.parseAppendHtml(f),d.appendHtml.html(""),d.appendHtml.append(f),d.wrapper.append(d.appendHtml)),this.settings.showTags&&l.tags)for(var g=0;g<l.tags.length;g++){var v=$("<span/>").addClass(this.settings.clsBadge).text(l.tags[g]);d.wrapper.append(v)}d.node.append(d.wrapper),this.nodesMap[l.id]=d.node,o.append(d.node),h++}return o}},toggleSelectNode:function(e){var t=$(e.currentTarget),s=t.closest("li"),i=t.closest("div"),n=s.data("node-data");i.hasClass(this.settings.clsNodeDisabled)||(this.selectNode(n,s),e.preventDefault(),e.stopPropagation())},onNodeDbclick:function(e){var t=$(e.currentTarget),s=t.closest("li"),i=t.closest("div"),n=s.data("node-data");i.hasClass(this.settings.clsNodeDisabled)||(n._hasChildren&&this.toggleExpandNode(e),this.element.trigger("nodedbclick",n))},onNodeRightclick:function(e){if(2==e.button){var t=$(e.currentTarget),s=t.closest("li"),i=t.closest("div"),n=s.data("node-data");if(i.hasClass(this.settings.clsNodeDisabled))return;this.element.trigger("noderightclick",n)}},toggleExpandNode:function(e){var t=$(e.currentTarget),s=t.closest("li"),i=(t.closest("div"),s.data("node-data"));i._isExpand?this._collapseSingleNode(i,s):this._expandSingleNode(i,s),e.preventDefault(),e.stopPropagation()},toggleCheckNode:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget),s=t.closest("li"),i=t.closest("div"),n=s.data("node-data");i.hasClass(this.settings.clsNodeDisabled)||this.checkNode(n,s)},checkNode:function(e,t){"undefined"==typeof t&&(t=this.nodesMap[e.id]),t&&(this._singleCheckNode(t,e),this.settings.checkRecursive&&(this._setChildrenCheckedState(t,e),this._setParentCheckedState(t,e)))},_singleCheckNode:function(e,t){var s;s=t._checkSate===i.unchecked?i.checked:i.unchecked,this._singleCheckSateNode(e,t,s)},_singleCheckSateNode:function(e,t,s){e&&this._replaceClass(e.data("node-check"),this._getCheckIconByState(s),this._getCheckIconByState(t._checkSate)),t._checkSate=s,s===i.checked?(this._addCheckedNode(t),this.settings.silent||this.element.trigger("nodeChecked",t)):s===i.unchecked?(this._removeCheckedNode(t),this.settings.silent||this.element.trigger("nodeUnchecked",t)):s===i.partOf&&this._removeCheckedNode(t)},_setChildrenCheckedState:function(e,t){if(t._hasChildren)for(var s=0;s<t.nodes.length;s++){var i=t.nodes[s],n=this.nodesMap[i.id];this._singleCheckSateNode(n,i,t._checkSate),this._setChildrenCheckedState(n,i)}},_setParentCheckedState:function(e,t){if(t._innerParentId)for(var s=this.nodesMap[t._innerParentId];s;){for(var n,a=0,o=0,r=s.data("node-data"),l=0;l<r.nodes.length;l++){var h=r.nodes[l];h._checkSate===i.unchecked?a++:h._checkSate===i.checked&&o++}n=a===r.nodes.length?i.unchecked:o===r.nodes.length?i.checked:i.partOf,this._singleCheckSateNode(s,r,n),s=this.nodesMap[r._innerParentId]}},_getCheckIconByState:function(e){var t;return t=e===i.unchecked?this.settings.uncheckedIcon:e===i.checked?this.settings.checkedIcon:this.settings.checkedPartOfIcon},_addItem:function(e,t){for(var s=0;s<t.length;s++)if(t[s].id===e.id)return;t.push(e)},_removeItem:function(e,t){for(var s=-1,i=0;i<t.length;i++)if(t[i].id===e.id){s=i;break}s>=0&&t.splice(s,1)},_addSelectedNode:function(e){this._addItem(e,this.operateNodes.selectedNodesList)},_removeSelectedNode:function(e){this._removeItem(e,this.operateNodes.selectedNodesList)},_addCheckedNode:function(e){this._addItem(e,this.operateNodes.checkedNodesList)},_removeCheckedNode:function(e){this._removeItem(e,this.operateNodes.checkedNodesList)},_expandSingleNode:function(e,t){if(!e._isExpand&&e._hasChildren&&("undefined"==typeof t&&(t=this.nodesMap[e.id]),t)){var s=t.find("ul"),i=$(t.find("div>span").get(0));if(s.get(0))$(s.get(0)).show();else{var n=$("<ul/>");t.append(this._buildTree(e,e._innerLevel+1,n)),n.show()}this._replaceClass(i,this.settings.collapseIcon,this.settings.expandIcon),e._isExpand=!0,this.settings.silent||this.element.trigger("nodeExpanded",e)}},_collapseSingleNode:function(e,t){if(e._isExpand&&("undefined"==typeof t&&(t=this.nodesMap[e.id]),t)){var s=t.find("ul"),i=$(t.find("div>span").get(0));$(s.get(0)).hide(),e._isExpand=!1,this._replaceClass(i,this.settings.expandIcon,this.settings.collapseIcon),this.settings.silent||this.element.trigger("nodeCollapsed",e)}},expandPathNode:function(e){var t=[],s=e;for(t.push(s);s._innerParentId!==-1;){var i=s._innerParentId;s=this.nodeDataMap[i],t.push(s)}for(var n=t.length-1;n>=0;n--){var a=t[n];this._expandSingleNode(a)}},expandAll:function(){function e(s){var i=0;if(s.nodes)for(;i<s.nodes.length;){var n=s.nodes[i];t._expandSingleNode(n),n.nodes&&e(n),i++}}var t=this;this.data&&e(this.data)},expandNode:function(e){function t(e){var i=0;if(e.nodes)for(;i<e.nodes.length;){var n=e.nodes[i];s._expandSingleNode(n),n.nodes&&t(n),i++}}var s=this;e&&t(e)},expandLevel:function(e){function t(i){var n=1;if("undefined"!=typeof i._innerLevel&&(n=i._innerLevel),!(n>=e)){var a=0;if(i.nodes)for(;a<i.nodes.length;){var o=i.nodes[a];o._innerLevel<e&&(s._expandSingleNode(o),o.nodes&&t(o)),a++}}}var s=this;this.data&&t(this.data)},collapseAll:function(){if(this.data)for(var e=0;e<this.data.nodes.length;e++)this._collapseSingleNode(this.data.nodes[e])},collapseNode:function(e){if(this.data&&e)if(1===e.length)this._collapseSingleNode(e);else for(var t=0;t<e.nodes.length;t++)this._collapseSingleNode(e.nodes[t])},setCheckedNode:function(e){this.expandPathNode(e),e._checkSate!==i.checked&&this.checkNode(e)},setUncheckedNode:function(e){e._checkSate!==i.unchecked&&this.checkNode(e)},checkNodeByIds:function(e){for(var t=e.split(","),s=0;s<t.length;s++){var i=this.nodeDataMap[t[s]];i&&this.setCheckedNode(i)}},uncheckNodeByIds:function(e){for(var t=e.split(","),s=0;s<t.length;s++){var i=this.nodeDataMap[t[s]];i&&this.setUncheckedNode(i)}},checkAll:function(){function e(s){var n=0;if(s.nodes)for(;n<s.nodes.length;){var a=s.nodes[n];if(a._checkSate!==i.checked){var o=t.nodesMap[a.id];t._singleCheckSateNode(o,a,i.checked)}a.nodes&&e(a),n++}}var t=this;this.data&&e(this.data)},uncheckAll:function(){function e(s){var n=0;if(s.nodes)for(;n<s.nodes.length;){var a=s.nodes[n];if(a._checkSate!==i.unchecked){var o=t.nodesMap[a.id];t._singleCheckSateNode(o,a,i.unchecked)}a.nodes&&e(a),n++}}var t=this;this.data&&e(this.data)},_singleDisabledNode:function(e,t){e&&!e.hasClass(this.settings.clsNodeDisabled)&&(e.addClass(this.settings.clsNodeDisabled),this.settings.silent||this.element.trigger("nodeDisabled",t))},setDisabledNode:function(e,t){this._singleDisabledNode(e,t)},setEnabledNode:function(e,t){this._singleEnabledNode(e,t)},disableNodeByIds:function(e){for(var t=e.split(","),s=0;s<t.length;s++){var i=this.nodeDataMap[t[s]],n=this.nodesMap[i.id];if(i._isDisabled=!0,n){var a=n.children("div");i&&this.setDisabledNode(a,i)}}},enableNodeByIds:function(e){for(var t=e.split(","),s=0;s<t.length;s++){var i=this.nodeDataMap[t[s]],n=this.nodesMap[i.id];if(i._isDisabled=!1,n){var a=n.children("div");i&&this.setEnabledNode(a,i)}}},_singleEnabledNode:function(e,t){e&&e.hasClass(this.settings.clsNodeDisabled)&&(e.removeClass(this.settings.clsNodeDisabled),this.settings.silent||this.element.trigger("nodeEnabled",t))},disableAll:function(){function e(s){var i=0;if(s.nodes)for(;i<s.nodes.length;){var n=s.nodes[i];n._isDisabled=!0;var a=t.nodesMap[n.id];if(a){var o=a.children("div");t._singleDisabledNode(o,n)}n.nodes&&e(n),i++}}var t=this;this.data&&e(this.data)},enableAll:function(){function e(s){var i=0;if(s.nodes)for(;i<s.nodes.length;){var n=s.nodes[i];n._isDisabled=!1;var a=t.nodesMap[n.id];if(a){var o=a.children("div");t._singleEnabledNode(o,n)}n.nodes&&e(n),i++}}var t=this;this.data&&e(this.data)},selectNode:function(e,t){if("undefined"==typeof t&&(t=this.nodesMap[e.id]),t){var s=t.children("div");s.hasClass(this.settings.clsNodeUnSelect)||(e._isSelected?(e._isSelected=!1,s.removeClass(this.settings.clsNodeSelected),this.settings.multiSelect||(this._currentSelectNode=null),this._removeSelectedNode(e),this.settings.silent||this.element.trigger("nodeUnselected",e)):(this._addSelectedNode(e),s.addClass(this.settings.clsNodeSelected),e._isSelected=!0,this.settings.multiSelect||(this._currentSelectNode&&(this._currentSelectNode.removeClass(this.settings.clsNodeSelected),this._currentSelectNode.closest("li").data("node-data")._isSelected=!1,this._removeSelectedNode(this._currentSelectNode.closest("li").data("node-data")),this.settings.silent||this.element.trigger("nodeUnselected",this._currentSelectNode.closest("li").data("node-data"))),this._currentSelectNode=s),this.settings.silent||this.element.trigger("nodeSelected",e)))}},setSelectedNode:function(e){this.expandPathNode(e),e._isSelected||this.selectNode(e)},setUnselectedNode:function(e){e._isSelected&&this.selectNode(e)},selectNodeByIds:function(e){for(var t=e.split(","),s=0;s<t.length;s++){var i=this.nodeDataMap[t[s]];i&&this.setSelectedNode(i)}},unselectNodeByIds:function(e){for(var t=e.split(","),s=0;s<t.length;s++){var i=this.nodeDataMap[t[s]];i&&this.setUnselectedNode(i)}},getCheckedNodes:function(e){return e?this.getCheckedNodesPartOf():this.operateNodes.checkedNodesList},getCheckedNodesPartOf:function(){var e=[],t=this.nodeDataMap;for(var s in t)"partOf"!==t[s]._checkSate&&"checked"!==t[s]._checkSate||e.push(t[s]);return e},getSelectNodes:function(){return this.operateNodes.selectedNodesList},getNode:function(e){return this.nodeDataMap[e]},_beforeOrAfterNode:function(e,t,s,i){var n={id:e._innerParentId,_innerLevel:e._innerLevel,nodes:[t]},a=this.getNode(e._innerParentId),o=0,r=0;"after"===i&&(r+=1),a&&(o=$(a.nodes).index(e),a.nodes.splice(o+r,0,t)),this._parseTreeData(n,n._innerLevel+1),t._innerLevel=e._innerLevel,e._innerParentId===-1&&(o=$(this.data.nodes).index(e),this.data.nodes.splice(o+r,0,t)),"after"===i?s.after(this._buildTree(n,n._innerLevel)):"before"===i&&s.before(this._buildTree(n,n._innerLevel))},addNode:function(e,t,s){var i=this.getNode(e);if(i){var n={id:i.id,_innerLevel:i._innerLevel,nodes:[t]},a=this.nodesMap[i.id];if(a)if("before"===s||"after"==s)this.container.find("li[data-id='"+t.id+"']").remove(),this._beforeOrAfterNode(i,t,a,s);else{var o=!1;if(i._hasChildren?i.nodes.push(t):(i.nodes=[t],i._hasChildren=!0,o=!0),this._parseTreeData(n,n._innerLevel+1),o){var r={id:i._innerParentId,_innerLevel:i._innerLevel-1,nodes:[i]};a.after(this._buildTree(r,r._innerLevel+1)),a.remove()}else{var l=a.find("ul");l.get(0)&&$(l.get(0)).append(this._buildTree(n,n._innerLevel+1))}}}},removeNode:function(e){var t=this.getNode(e);if(t){var s=t._innerParentId,i=this.nodesMap[t.id];if(s===-1)this._removeItem(t,this.data.nodes),i.remove();else{var n=this.getNode(s);if(n.nodes.length>1)this._removeItem(t,n.nodes),i&&i.remove();else{this._removeItem(t,n.nodes),n._hasChildren=!1,n._isExpand=null;var a={id:n._innerParentId,_innerLevel:n._innerLevel-1,nodes:[n]},o=this.nodesMap[n.id];o&&(o.after(this._buildTree(a,a._innerLevel+1)),o.remove())}}this._removeIdNode(t)}},updateNode:function(e,t){var s=this.getNode(e);if(s){var i=this.nodesMap[e];s.text=t;var n=$(i).find(".nodeValue");n.length>0&&(n=n[0]),$(n).html(t)}},_removeIdNode:function(e){if(this.nodeDataMap[e.id]=null,this.nodesMap[e.id]=null,this._currentSelectNode&&(this._currentSelectNode.closest("li").data("node-data")&&this._currentSelectNode.closest("li").data("node-data").id!==e.id||(this._currentSelectNode=null)),this._removeSelectedNode(e),this._removeCheckedNode(e),e._hasChildren)for(var t=0;t<e.nodes.length;t++){var s=e.nodes[t];this._removeIdNode(s)}},getTreeData:function(){return this.data.nodes},appendTemplate:function(e,t){return e},render:function(e){return e},renderNode:function(e){return e},getParentNode:function(e){var t=0;if("object"==typeof e)for(;e._innerParentId&&-1!==e._innerParentId&&t<10;)e=this.nodeDataMap[e._innerParentId],t++;return e},renderPointNode:function(e,t,s){var i=this;Array.isArray(e)&&e.forEach(function(e){var n=i.nodeDataMap[e];i.expandNode({nodes:[i.getParentNode(n)]});var a=i.container.find('li[data-id="'+e+'"] div:first span.nodeValue'),o=t(n)||{};a.prop("outerHTML",o),a=i.container.find('li[data-id="'+e+'"] div:first span.nodeValue'),a.on("click",$.proxy(i.toggleSelectNode,i)),a.on("dblclick",$.proxy(i.onNodeDbclick,i)),a.on("mousedown",$.proxy(i.onNodeRightclick,i)),"function"==typeof s&&s(n)})},getApi:function(){var e=this,t={collapseAll:"collapseAll",collapseNode:"collapseNode",expandAll:"expandAll",expandNode:"expandNode",expandLevel:"expandLevel",checkAll:"checkAll",uncheckAll:"uncheckAll",disableAll:"disableAll",disableNodeByIds:"disableNodeByIds",enableNodeByIds:"enableNodeByIds",enableAll:"enableAll",checkNodeByIds:"checkNodeByIds",uncheckNodeByIds:"uncheckNodeByIds",selectNodeByIds:"selectNodeByIds",unselectNodeByIds:"unselectNodeByIds",getCheckedNodes:"getCheckedNodes",getSelectNodes:"getSelectNodes",getNode:"getNode",setValue:"setValue",addNode:"addNode",removeNode:"removeNode",updateNode:"updateNode",getTreeData:"getTreeData",renderPointNode:"renderPointNode"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="tree",i=s.ui.controls.Tree;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t={all:"all",none:"none",leaf:"leaf"},i={all:"all",leaf:"leaf"},n=function(){},a=0,o={levels:1,dataUrl:"",expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",
nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",checkedPartOfIcon:"glyphicon glyphicon-check partOfchecked",uncheckedIcon:"glyphicon glyphicon-unchecked",enableLinks:!1,enableTitle:!1,showIcon:!0,showTags:!1,multiSelect:!1,silent:!1,ignoreChildren:!1,expandOne:!0,isAsyc:!0,showCheckbox:t.none,checkRecursive:!1,selectMode:i.all,appendHtml:"",parseAppendHtml:void 0,selectedNodeIds:"",checkedNodeIds:"",onNodeChecked:n,onNodeCollapsed:n,onNodeDisabled:n,onNodeEnabled:n,onNodeExpanded:n,onNodeSelected:n,onNodeUnchecked:n,onNodeUnselected:n,onSearchComplete:n,onSearchCleared:n},r={isAsyc:"is-asyc",expandOne:"expand-one",ignoreChildren:"ignore-children",expandIcon:"expand-icon",collapseIcon:"collapse-icon",showTags:"show-tags",levels:"levels",dataUrl:"data-url",showCheckbox:"show-checkbox",checkRecursive:"check-recursive",selectMode:"select-mode",appendHtml:"append-html",multiSelect:"multi-select",selectedNodeIds:"selected-node-ids",checkedNodeIds:"checked-node-ids"};this.Treeasyc=new e.Class({extend:s.ui.controls.Slowtree},{defaults:o,attributeMap:r,init:function(e,t){this.element=$(e),a+=1,this.element.data("plugin-id",a),this.initSettings(t),"function"==typeof this.settings.parseData&&(this.parseData=this.settings.parseData,delete this.settings.parseData),this.data=[],this.idIndexMap={},this.container=$('<ul class="list-group"></ul>');var s=this;$.when(this.getData()).done(function(){s.buildHtml(),s.initElements(),s.refresh(),s.bindEvents()})},parseData:function(e){function t(e,n){if(e.nodes){n++;for(var o=0;o<e.nodes.length;o++){var r=e.nodes[o];r.id=r.id||i,r._innerParentId=e.id,r._innerPath=(e._innerPath||"r")+"|"+r.id,r._innerLevel=n,s.push(r),a.idIndexMap["id_"+r.id]=i,i++,r.nodes&&t(r,n)}}}var s=[],i=0,n=0;this.index&&(i=this.index),e._innerLevel&&(n=e._innerLevel);var a=this;return t(e,n),this.index=i,s},updateData:function(e){var t=$.extend(!0,[],e);this.level=0,this.index=0;var s={nodes:t};this.data=this.parseData(s)},addNodeData:function(e,t){var s=$.extend(!0,[],t),i=e;if(i||(i={}),i.nodes=s,this.childData=this.parseData(i),this.childData&&this.childData.length>0){for(var n=0;n<this.childData.length;n++){var a=this.childData[n];this.data.push(a)}this.buildChildTree(i),this.setOneLevelExpandedState(i,!0,!0,this.settings.ignoreChildren)}},addChildrenData:function(e,t){var s=$.extend(!0,[],t);if(e.nodes=s,this.childData=this.parseData(e),!this.childData||0===this.childData.length){var i=this.elements.getNode(e.id);return i.find(".expand-icon").removeClass(this.settings.expandIcon),i.find(".expand-icon").removeClass("expand-icon"),void i.attr("data-hasChildren","false")}for(var n=0;n<this.childData.length;n++){var a=this.childData[n];this.data.push(a)}this.buildChildTree(e),this.setOneLevelExpandedState(e,!0,!0,this.settings.ignoreChildren)},buildHtml:function(){this.element.addClass("c-slowtree"),this.element.empty().append(this.container)},buildChildTree:function(e){if(this.childData)for(var t=0;t<this.childData.length;t++){var s=this.childData[t],i=this.buildItem(s);if(i=$(i),s._innerParentId||0===s._innerParentId){var n=this.elements.getNode(s._innerParentId);i.insertAfter(n)}else this.container.append(i);var a="";if(this.settings.appendHtml){if(this.settings.parseAppendHtml){var o=this.settings.parseAppendHtml(this.settings.appendHtml);a=o}else a=this.settings.appendHtml;i.find(".appendHtml").append(a)}}},buildItem:function(e){var s=!1;this.settings.isAsyc?s=!0:!this.settings.isAsyc&&e.nodes&&e.nodes.length>0&&(s=!0);for(var n="",a=0;a<e._innerLevel-1;a++)n+='<span class="indent"></span>';var o="icon";o+=s?this.settings.isAsyc?" expand-icon "+this.settings.expandIcon:e._innerLevel<this.settings.levels?" expand-icon "+this.settings.collapseIcon:" expand-icon "+this.settings.expandIcon:" "+this.settings.emptyIcon;var r='<span class="'+o+'"></span>',l="";if(this.settings.showIcon){var h="icon node-icon ";h+=e.icon||this.settings.nodeIcon,l='<span class="'+h+'"></span>'}var c="";if(this.settings.showCheckbox===t.all||!s&&this.settings.showCheckbox===t.leaf){var d="icon check-icon ";d+=this.settings.uncheckedIcon,c='<span class="'+d+'"></span>'}var u="";if(this.settings.showTags&&e.tags)for(var p=0;p<e.tags.length;p++){var m=e.tags[p];u+='<span class="badge">'+m+"</span>"}var f="list-group-item";s&&this.settings.selectMode===i.leaf&&(f+=" node-unselectable");var g='<li    class="'+f+'" '+(this.settings.levels&&e._innerLevel>this.settings.levels?'   style="display: none;"':"")+(this.settings.enableTitle?'   title="'+e.text+'"':"")+'   data-id="'+e.id+'"   data-hasChildren="'+s+'"   data-level="'+e._innerLevel+'"   data-path="'+e._innerPath+'"><div class = "item-content">'+n+r+l+c+(this.settings.enableLinks?'   <a class="nodevalue" href="'+e.href+'" style="color:inherit;">'+e.text+"</a>":'<span class="nodevalue">'+e.text+"</span>")+(this.settings.appendHtml?'   <span class="appendHtml"></span>':"")+u+"</div></li>";return g},setOneLevelExpandedState:function(e,t,s,i){if(this.settings.isAsyc&&e&&!e.nodes)return void(s||this.elements.original.trigger("nodeExpanded",e));var n=this.elements.getNode(e.id),a=this.elements.getChildNodes(e.id);if(t?(n.find(".expand-icon").removeClass(this.settings.expandIcon).addClass(this.settings.collapseIcon),a.show(),s||this.elements.original.trigger("nodeExpanded",e)):(n.find(".expand-icon").removeClass(this.settings.collapseIcon).addClass(this.settings.expandIcon),a.hide(),s||this.elements.original.trigger("nodeCollapsed",e)),a.length>0){var o=this;a.each(function(){var e=$(this).data("id"),t=o.elements.getNode(e),s=o.elements.getChildNodes(e);t.find(".expand-icon").removeClass(o.settings.collapseIcon).addClass(o.settings.expandIcon),s.hide()})}},getApi:function(){var e=this,t={collapseAll:"collapseAll",expandAll:"expandAll",checkAll:"checkAll",uncheckAll:"uncheckAll",disableAll:"disableAll",enableAll:"enableAll",checkNodeByIds:"checkNodeByIds",uncheckNodeByIds:"uncheckNodeByIds",selectNodeByIds:"selectNodeByIds",unselectNodeByIds:"unselectNodeByIds",getCheckedNodes:"getCheckedNodes",getSelectNodes:"getSelectNodes",getNode:"getNode",addChildrenData:"addChildrenData",addNodeData:"addNodeData"},i=s.utilities.buildApi(e,t);return i}})}),function(e){"use strict";var t="treeasyc",i=s.ui.controls.Treeasyc;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destroy(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery),Jx()["package"]("s.ui.controls",function(e){"use strict";var t=0,i=function(){},n={onConfirm:i,map:{id:"id",text:"text"},titleName:"title",tranferOriginalOrgs:void 0,tranferInnerOrgs:void 0,parseDataTrees:void 0,multiSelect:!0,inputHide:!1,renderTreeNode:void 0},a={titleName:"title-name",multiSelect:"multi-select",inputHide:"input-hide",map:"map"},o=new e.Class({data:{},init:function(e,t){this.userselect=e,this.settings=t,"string"==typeof this.settings.map&&""!==this.settings.map&&(this.settings.map=JSON.parse(this.settings.map)),this.states={rightOrg:[],rightOrgMap:{},orgsMap:{}},this.buildHtml(),this.initElements(),this.bindEvents(),this.bindEventsInterface()},parseDataTrees:function(e){this.states.orgsMap={};var t=e[0],s=this.settings.map.id,i=this.settings.map.text;if(this.states.orgsMap[t[s]]=t,"function"==typeof this.settings.parseDataTrees)return this.settings.parseDataTrees();for(var n=[{id:t[s],parentId:t.ParentID,text:t[i],path:""+t[s]}],a=1;a<e.length;a++){t=e[a];for(var o=n[n.length-1];t.ParentID!==o.id&&o.nodes;)o=o.nodes[o.nodes.length-1];t.ParentID===o.id&&(o.nodes=o.nodes||[],o.nodes[o.nodes.length]={id:t[s],parentId:t.ParentID,text:t[i],path:o.path+">"+t[s]}),this.states.orgsMap[t[s]]=t}return this.elements.colOrgNumber.text(e.length),n},updateDataOrgs:function(e){this.data.orgs=this.parseDataTrees(e),this.typeheadSrouces=e,this.render()},buildHtml:function(){var e='<div class="c-treeselect-container">    <div class="col-org">        <div class="row-query">            <input class="query-typeahead form-control"  placeholder="请输入关键字" />        </div>        <div class="row-header">            <span class="title">'+this.settings.titleName+'</span>            <span class="number-container">(<span class="number">0</span>)</span>        </div>        <div class="row-tree">            <div class="contact-tree"></div>            <div class="org-tree"></div>        </div>    </div>    <div class="col-buttons">        <a class="btn btn-default check-in">添加<span>&gt;</span></a>        <a class="btn btn-default check-out"><span>&lt;</span>移除</a>        <a class="btn btn-default check-clear"><span>&lt;&lt;</span>清除</a>    </div>    <div class="col-rightselect">        <div class="row-header">            <span class="title">已选</span>            <span class="number-container">(<span class="number">0</span>)</span>        </div>        <div class="row-list">            <div class="person-list"></div>        </div>    </div>    <div class="clearfix"></div></div>',t='<div class="modal-content c-treeselect-modal">    <div class="modal-header">        <button type="button" class="close"><span aria-hidden="true">&times;</span></button>        <h4 class="modal-title">选择'+this.settings.titleName+'</h4>    </div>    <div class="modal-body">'+e+'    </div>    <div class="modal-footer">         <button type="button" class="btn btn-default cancel">取消</button>        <button type="button" class="btn btn-primary confirm">确定</button>    </div></div>';this.container=$(t)},initElements:function(){var e=this,t="#c-treeselect-dialog-"+this.settings._currentPluginId,i=new s.ui.controls.Modal(this.userselect.getButton(),{modalId:t,modalClass:"c-treeselect-modal",content:this.container,backdrop:"static"});this.elements={colOrgQueryTypeahead:$(".col-org .query-typeahead",this.container),colOrgNumber:$(".col-org .number",this.container),colOrgContactTree:$(".col-org .contact-tree",this.container),colOrgOrgTree:$(".col-org .org-tree",this.container),colButtonsCheckAll:$(".col-buttons .check-all",this.container),colButtonsCheckIn:$(".col-buttons .check-in",this.container),colButtonsCheckOut:$(".col-buttons .check-out",this.container),colButtonsCheckClear:$(".col-buttons .check-clear",this.container),colRightSelectNumber:$(".col-rightselect .number",this.container),colRightSelectSetContact:$(".col-rightselect .set-contact",this.container),colRightSelectContactName:$(".col-rightselect .contact-name",this.container),colRightSelectSaveBtn:$(".col-rightselect .save-btn",this.container),colRightSelectPersonList:$(".col-rightselect .person-list",this.container),colRightSelectRowContact:$(".col-rightselect .row-contact",this.container),confirm:$(".modal-footer .confirm",this.container),cancel:$(".modal-footer .cancel",this.container)};var n=new s.ui.controls.Typeahead(this.elements.colOrgQueryTypeahead,{map:'{"text":"'+e.settings.map.text+'","returnValue":"json"}',onChanged:function(e,t){this.query=this.query,this.matcherReg=new RegExp(t,"i")},matcher:function(t){var s=this.matcherReg||new RegExp(this.query,"i"),i=s.test(t[e.settings.map.text]);return i===!0?1:-1},onSelected:function(t,s){var i=this.getValue(s);i=e.tranferInnerOrgs([i]),e.addOrgs(i),e.addNodeClass(i)}}),a=new s.ui.controls.Tree(this.elements.colOrgOrgTree,{levels:1,multiSelect:this.settings.multiSelect,onNodeDbclick:function(t,s){e.onNodeDbclick(t,s)},renderNode:this.settings.renderTreeNode}),o=new s.ui.controls.Selectlist(this.elements.colRightSelectPersonList,{map:{text:"text",value:"id"},dblclick:function(t,s){e.removeOrgs([s]),e.removeNodeClass([s]),e.removeOrgs([s])}});this.controls={pop:i,typeahead:n,orgTree:a,rightSelectPersonList:o}},bindEvents:function(){this.elements.confirm.on("click",$.proxy(this.onConfirm,this)),this.elements.colButtonsCheckAll.on("click",$.proxy(this.checkAll,this)),this.elements.colButtonsCheckIn.on("click",$.proxy(this.checkIn,this)),this.elements.colButtonsCheckOut.on("click",$.proxy(this.checkOut,this)),this.elements.colButtonsCheckClear.on("click",$.proxy(this.checkClear,this)),this.elements.confirm.on("onConfirm",$.proxy(this.settings.onConfirm,this))},bindEventsInterface:function(){},tranferOriginalOrgs:function(e){var t=[],s=this.settings.map.id;if("function"==typeof this.settings.tranferOriginalOrgs)return this.settings.tranferOriginalOrgs();for(var i=0;i<e.length;i++){var n=e[i][s]?e[i][s]:e[i].id;t.push(this.states.orgsMap[n])}return t},tranferInnerOrgs:function(e){var t=[],s=this.settings.map.id,i=this.settings.map.text;if("function"==typeof this.settings.tranferInnerOrgs)return this.settings.tranferInnerOrgs();for(var n=0;n<e.length;n++){var a={id:e[n][s],parentId:e[n].ParentID,text:e[n][i],path:""+e[n][s]};t.push(a)}return t},setRightOrgs:function(e){this.states.rightOrgMap={};for(var t=0;t<e.length;t++){var s=e[t];this.states.rightOrgMap[s.id]=s}var i=Object.keys(this.states.rightOrgMap).length;this.elements.colRightSelectNumber.text(i),this.controls.rightSelectPersonList.setData(e)},addOrgs:function(e){if(0!==e.length){var t,s=[];if(this.settings.multiSelect){for(var i=0;i<e.length;i++){var t=e[i];this.states.rightOrgMap[t.id]||(s.push(t),this.states.rightOrgMap[t.id]=t)}var n=Object.keys(this.states.rightOrgMap).length;this.controls.rightSelectPersonList.addItem(s),this.elements.colRightSelectNumber.text(n)}else t=Array.isArray(e)?e[e.length-1]:e,this.states.rightOrgMap[t.id]||(this.states.rightOrgMap={},s.push(t),this.states.rightOrgMap[t.id]=t),this.controls.rightSelectPersonList.coverItem(s),this.elements.colRightSelectNumber.text(1)}},removeOrgs:function(e){for(var t=0;t<e.length;t++){var s=e[t];delete this.states.rightOrgMap[s.id]}this.controls.rightSelectPersonList.deleteItem(e);var i=Object.keys(this.states.rightOrgMap).length;this.elements.colRightSelectNumber.text(i)},onNodeDbclick:function(e,t){this.addOrgs([t]),this.addNodeClass([t]),this.selectedClear([t])},checkAll:function(e){},checkIn:function(e){var t=this.controls.orgTree.getSelectNodes();this.addOrgs(t),this.addNodeClass(t),this.selectedClear(t)},checkOut:function(){var e=this.controls.rightSelectPersonList.getSelectedItems();this.removeNodeClass(e),this.removeOrgs(e)},checkClear:function(){var e=this.getRightOrgs();this.removeOrgs(e),this.removeNodeClass(),this.selectedClear(e)},onConfirm:function(e){this._renderValue(),this.controls.pop.hide()},getRightOrgs:function(){var e=[];for(var t in this.states.rightOrgMap)e.push(this.states.rightOrgMap[t]);return e},selectedClear:function(e){for(var t="",s=0;s<e.length;s++){var i=e[s].id;t+=i+","}t=t.substring(0,t.length-1),this.controls.orgTree.unselectNodeByIds(t)},addNodeClass:function(e){this.settings.multiSelect||this.container.find("li[data-id]").removeClass("checked");for(var t=0;t<e.length;t++){var s=e[t].id;this.container.find("li[data-id="+s+"]").addClass("checked")}},removeNodeClass:function(e){if(e)for(var t=0;t<e.length;t++){var s=e[t].id;this.container.find("li[data-id="+s+"]").removeClass("checked")}else this.container.find("li[data-id]").removeClass("checked")},render:function(){this._renderTypeahead(),this._renderOrgTree()},_renderTypeahead:function(){this.controls.typeahead.setSource(this.typeheadSrouces)},_renderOrgTree:function(){this.controls.orgTree.setValue(this.data.orgs,2)},_renderContactTree:function(){this.controls.contactTree.setValue(this.data.contacts,2)},setSelectValue:function(e){this.setRightOrgs(e),this.removeNodeClass(),this.addNodeClass(e)},_renderValue:function(){var e=this.tranferOriginalOrgs(this.getRightOrgs());this.userselect.setData(e),this.settings.onConfirm.apply(this,[e])},show:function(){this.container.show()},hide:function(){this.container.hide()}});this.Treeselect=new e.Class({extend:s.ui.BaseControl},{defaults:n,attributeMap:a,init:function(e,s){this.element=$(e),t+=1,this.element.data("plugin-id",t),this.initSettings(s),this.settings._currentPluginId=t,this.initElements()},updateDataOrgs:function(e){this.modal.updateDataOrgs(e),this.userselect.updateData(e)},initElements:function(){var e=this;this.elements={original:this.element},this.userselect=new s.ui.controls.UserSelect(this.elements.original,{showItemList:!0,ishide:this.settings.inputHide,mateKey:{id:e.settings.map.id},map:'{"text":"'+e.settings.map.text+'","returnValue":"json"}',onblured:function(t){e.settings.onConfirm.apply(e,[e.modal.tranferOriginalOrgs(t)])}}),this.modal=new o(this.userselect,this.settings),this.userselect.getButton().on("click",function(t){e.modal.setSelectValue(e.modal.tranferInnerOrgs(e.userselect.getValue()))})},setValue:function(e){this.userselect.setData(e)},refresh:function(){},enable:function(){this.element.prop("disabled",!1),this.userselect.enable(),this.disabled=!1},disable:function(){this.element.prop("disabled",!0),this.userselect.disable(),this.disabled=!0},onOpen:function(e){this.userselect.getButton().click()},disableNodeByIds:function(e){this.modal.controls.orgTree.disableNodeByIds(e)},getApi:function(){var e=this,t={onOpen:"onOpen",disableNodeByIds:"disableNodeByIds"},i=s.utilities.buildApi(e,t);return i},destory:function(){}})}),function(e){"use strict";var t="treeselect",i=s.ui.controls.Treeselect;e.fn[t]=function(t){return this.each(function(){var s=e(this);s.data("plugin-ref")&&s.data("plugin-ref").destory(),s.data("plugin-ref",new i(this,e.extend(!0,{},t)))}),this}}(jQuery);